/*
 ? 2006 Mika Tuupola, Dylan Verheul, Nicolas CARPi
 @licence MIT (see LICENCE file)
 @name Jquery-jeditable
 @type  jQuery

 @param {String|Function} target - URL or Function to send edited content to. Can also be 'disable', 'enable', or 'destroy'
 @param {Object} [options] - Additional options
 @param {Object} [options.ajaxoptions] - jQuery Ajax options. See https://api.jquery.com/jQuery.ajax/
 @param {Function} [options.before] - Function to be executed before going into edit mode
 @param {Function} [options.callback] - function(result, settings, submitdata) Function to run after submitting edited content
 @param {String} [options.cancel] - Cancel button value, empty means no button
 @param {String} [options.cancelcssclass] - CSS class to apply to cancel button
 @param {Number} [options.cols] - Number of columns if using textarea
 @param {String} [options.cssclass] - CSS class to apply to input form; use 'inherit' to copy from parent
 @param {String} [options.inputcssclass] - CSS class to apply to input. 'inherit' to copy from parent
 @param {Function} [options.intercept] - Intercept the returned data so you have a chance to process it before returning it in the page
 @param {String|Function} [options.data] - Content loaded in the form
 @param {String} [options.event='click'] - jQuery event such as 'click' or 'dblclick'. See https://api.jquery.com/category/events/
 @param {String} [options.formid] - Give an id to the form that is produced
 @param {String|Number} [options.height='auto'] - Height of the element in pixels or 'auto' or 'none'
 @param {String} [options.id='id'] - POST parameter name of edited div id
 @param {String} [options.indicator] - Indicator html to show when saving
 @param {String} [options.label] - Label for the form
 @param {String} [options.list] - HTML5 attribute for text input. Will suggest from a datalist with id of the list option
 @param {String|Function} [options.loaddata] - Extra parameters to pass when fetching content before editing
 @param {String} [options.loadtext='Loading?'] - Text to display while loading external content
 @param {String} [options.loadtype='GET'] - Request type for loadurl (GET or POST)
 @param {String} [options.loadurl] - URL to fetch input content before editing
 @param {Number} [options.max] - Maximum value for number type
 @param {String} [options.maxlength] - The maximum number of character in the text field
 @param {String} [options.method] - Method to use to send edited content (POST or PUT)
 @param {Number} [options.min] - Minimum value for number type
 @param {Boolean} [options.multiple] - Allow multiple selections in a select input
 @param {String} [options.name='value'] - POST parameter name of edited content
 @param {String|Function} [options.onblur='cancel'] - Use 'cancel', 'submit', 'ignore' or function. If function returns false, the form is cancelled.
 @param {Function} [options.onedit] - function triggered upon edition; will cancel edition if it returns false
 @param {Function} [options.onerror] - function(settings, original, xhr) { ... } called on error
 @param {Function} [options.onreset] - function(settings, original) { ... } called before reset
 @param {Function} [options.onsubmit] - function(settings, original) { ... } called before submit
 @param {String} [options.pattern] - HTML5 attribute for text or URL input
 @param {String} [options.placeholder='Click to edit'] - Placeholder text or html to insert when element is empty
 @param {Number} [options.rows] - number of rows if using textarea
 @param {Boolean} [options.select] - When true text is selected
 @param {Function} [options.showfn]- Function that can animate the element when switching to edit mode
 @param {String} [options.size] - The size of the text field
 @param {String} [options.sortselectoptions] - Sort the options of a select form
 @param {Number} [options.step] - Step size for number type
 @param {String} [options.style] - Style to apply to input form; 'inherit' to copy from parent
 @param {String} [options.submit] - submit button value, empty means no button
 @param {String} [options.submitcssclass] - CSS class to apply to submit button
 @param {Object|Function} [options.submitdata] - Extra parameters to send when submitting edited content. function(revert, settings, submitdata)
 @param {String} [options.tooltip] - Tooltip text that appears on hover (via title attribute)
 @param {String} [options.type='text'] - text, textarea, select, email, number, url (or any 3rd party input type)
 @param {String|Number} [options.width='auto'] - The width of the element in pixels or 'auto' or 'none'

 @example <caption>Simple usage example:</caption>
 $(".editable").editable("save.php", {
     cancel : 'Cancel',
     submit : 'Save',
     tooltip : "Click to edit...",
 });
 2015-2021 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires jQuery jstree 3.0.3
 2013-2021 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory

 jQuery UI :data 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Disable Selection 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Focusable 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Keycode 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Labels 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Scroll Parent 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Tabbable 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Unique ID 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Widget 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Position 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/
 jQuery UI Mouse 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Tabs 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Datepicker 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Menu 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Draggable 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Droppable 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Resizable 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Button 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Dialog 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Autocomplete 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Selectmenu 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Slider 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery Timepicker Addon - v1.6.3 - 2016-04-20
 http://trentrichardson.com/examples/timepicker
 Copyright (c) 2016 Trent Richardson; Licensed MIT  jQuery clueTip plugin v1.2.5

 Date: Sun Jun 10 17:51:13 2012 EDT
 Requires: jQuery v1.3+

 Copyright 2012, Karl Swedberg
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html


 Examples can be found at http://plugins.learningjquery.com/cluetip/demo/

 jQuery UI Sortable 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Accordion 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){a.ui=a.ui||{};return a.ui.version="1.13.2"});(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){return a.extend(a.expr.pseudos,{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(d){return!!a.data(d,b)}}):function(b,d,g){return!!a.data(b,g[3])}})});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){return a.fn.extend({disableSelection:function(){var b="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(b+".ui-disableSelection",function(d){d.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){a.ui.focusable=function(b,d){var g=b.nodeName.toLowerCase();if("area"===g){d=b.parentNode;g=d.name;if(!b.href||!g||"map"!==d.nodeName.toLowerCase())return!1;b=a("img[usemap='#"+g+"']");return 0<b.length&&b.is(":visible")}/^(input|select|textarea|button|object)$/.test(g)?(d=!b.disabled)&&(g=a(b).closest("fieldset")[0])&&(d=!g.disabled):d="a"===g?b.href||d:d;if(d=d&&a(b).is(":visible")){b=a(b);
for(d=b.css("visibility");"inherit"===d;)b=b.parent(),d=b.css("visibility");d="visible"===d}return d};a.extend(a.expr.pseudos,{focusable:function(b){return a.ui.focusable(b,null!=a.attr(b,"tabindex"))}});return a.ui.focusable});(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){return a.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){return a.fn.labels=function(){var b;if(!this.length)return this.pushStack([]);if(this[0].labels&&this[0].labels.length)return this.pushStack(this[0].labels);var d=this.eq(0).parents("label");if(b=this.attr("id")){var g=this.eq(0).parents().last();g=g.add(g.length?g.siblings():this.siblings());b="label[for='"+a.escapeSelector(b)+"']";d=d.add(g.find(b).addBack(b))}return this.pushStack(d)}});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){return a.ui.plugin={add:function(b,d,g){var c;b=a.ui[b].prototype;for(c in g)b.plugins[c]=b.plugins[c]||[],b.plugins[c].push([d,g[c]])},call:function(b,d,g,c){if((d=b.plugins[d])&&(c||b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType))for(c=0;c<d.length;c++)b.options[d[c][0]]&&d[c][1].apply(b.element,g)}}});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){return a.ui.safeActiveElement=function(b){try{var d=b.activeElement}catch(g){d=b.body}d||(d=b.body);d.nodeName||(d=b.body);return d}});(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){return a.ui.safeBlur=function(b){b&&"body"!==b.nodeName.toLowerCase()&&a(b).trigger("blur")}});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){return a.fn.scrollParent=function(b){var d=this.css("position"),g="absolute"===d,c=b?/(auto|scroll|hidden)/:/(auto|scroll)/;b=this.parents().filter(function(){var e=a(this);return g&&"static"===e.css("position")?!1:c.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==d&&b.length?b:a(this[0].ownerDocument||document)}});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./version","./focusable"],a):a(jQuery)})(function(a){return a.extend(a.expr.pseudos,{tabbable:function(b){var d=a.attr(b,"tabindex"),g=null!=d;return(!g||0<=d)&&a.ui.focusable(b,g)}})});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){return a.fn.extend({uniqueId:function(){var b=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++b)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}})});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){var b=0,d=Array.prototype.hasOwnProperty,g=Array.prototype.slice;a.cleanData=function(c){return function(e){var h,f,k;for(k=0;null!=(f=e[k]);k++)(h=a._data(f,"events"))&&h.remove&&a(f).triggerHandler("remove");c(e)}}(a.cleanData);a.widget=function(c,e,h){var f={},k=c.split(".")[0];c=c.split(".")[1];var q=k+"-"+c;h||(h=e,e=a.Widget);Array.isArray(h)&&(h=a.extend.apply(null,[{}].concat(h)));
a.expr.pseudos[q.toLowerCase()]=function(p){return!!a.data(p,q)};a[k]=a[k]||{};var l=a[k][c];var n=a[k][c]=function(p,r){if(!this||!this._createWidget)return new n(p,r);arguments.length&&this._createWidget(p,r)};a.extend(n,l,{version:h.version,_proto:a.extend({},h),_childConstructors:[]});var m=new e;m.options=a.widget.extend({},m.options);a.each(h,function(p,r){f[p]="function"!==typeof r?r:function(){function v(){return e.prototype[p].apply(this,arguments)}function y(B){return e.prototype[p].apply(this,
B)}return function(){var B=this._super,t=this._superApply;this._super=v;this._superApply=y;var u=r.apply(this,arguments);this._super=B;this._superApply=t;return u}}()});n.prototype=a.widget.extend(m,{widgetEventPrefix:l?m.widgetEventPrefix||c:c},f,{constructor:n,namespace:k,widgetName:c,widgetFullName:q});l?(a.each(l._childConstructors,function(p,r){p=r.prototype;a.widget(p.namespace+"."+p.widgetName,n,r._proto)}),delete l._childConstructors):e._childConstructors.push(n);a.widget.bridge(c,n);return n};
a.widget.extend=function(c){for(var e=g.call(arguments,1),h=0,f=e.length,k,q;h<f;h++)for(k in e[h])q=e[h][k],d.call(e[h],k)&&void 0!==q&&(a.isPlainObject(q)?c[k]=a.isPlainObject(c[k])?a.widget.extend({},c[k],q):a.widget.extend({},q):c[k]=q);return c};a.widget.bridge=function(c,e){var h=e.prototype.widgetFullName||c;a.fn[c]=function(f){var k="string"===typeof f,q=g.call(arguments,1),l=this;k?this.length||"instance"!==f?this.each(function(){var n=a.data(this,h);if("instance"===f)return l=n,!1;if(!n)return a.error("cannot call methods on "+
c+" prior to initialization; attempted to call method '"+f+"'");if("function"!==typeof n[f]||"_"===f.charAt(0))return a.error("no such method '"+f+"' for "+c+" widget instance");var m=n[f].apply(n,q);if(m!==n&&void 0!==m)return l=m&&m.jquery?l.pushStack(m.get()):m,!1}):l=void 0:(q.length&&(f=a.widget.extend.apply(null,[f].concat(q))),this.each(function(){var n=a.data(this,h);n?(n.option(f||{}),n._init&&n._init()):a.data(this,h,new e(f,this))}));return l}};a.Widget=function(){};a.Widget._childConstructors=
[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(c,e){e=a(e||this.defaultElement||this)[0];this.element=a(e);this.uuid=b++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=a();this.hoverable=a();this.focusable=a();this.classesElementLookup={};e!==this&&(a.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(h){h.target===e&&this.destroy()}}),this.document=
a(e.style?e.ownerDocument:e.document||e),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this.options=a.widget.extend({},this.options,this._getCreateOptions(),c);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){var c=this;this._destroy();a.each(this.classesElementLookup,
function(e,h){c._removeClass(h,e)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:a.noop,widget:function(){return this.element},option:function(c,e){var h=c,f;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof c){h={};var k=c.split(".");c=k.shift();if(k.length){var q=h[c]=a.widget.extend({},this.options[c]);for(f=0;f<k.length-
1;f++)q[k[f]]=q[k[f]]||{},q=q[k[f]];c=k.pop();if(1===arguments.length)return void 0===q[c]?null:q[c];q[c]=e}else{if(1===arguments.length)return void 0===this.options[c]?null:this.options[c];h[c]=e}}this._setOptions(h);return this},_setOptions:function(c){for(var e in c)this._setOption(e,c[e]);return this},_setOption:function(c,e){"classes"===c&&this._setOptionClasses(e);this.options[c]=e;"disabled"===c&&this._setOptionDisabled(e);return this},_setOptionClasses:function(c){var e;for(e in c){var h=
this.classesElementLookup[e];if(c[e]!==this.options.classes[e]&&h&&h.length){var f=a(h.get());this._removeClass(h,e);f.addClass(this._classes({element:f,keys:e,classes:c,add:!0}))}}},_setOptionDisabled:function(c){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!c);c&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},
_classes:function(c){function e(){var q=[];c.element.each(function(l,n){a.map(k.classesElementLookup,function(m){return m}).some(function(m){return m.is(n)})||q.push(n)});k._on(a(q),{remove:"_untrackClassesElement"})}function h(q,l){var n;for(n=0;n<q.length;n++){var m=k.classesElementLookup[q[n]]||a();c.add?(e(),m=a(a.uniqueSort(m.get().concat(c.element.get())))):m=a(m.not(c.element).get());k.classesElementLookup[q[n]]=m;f.push(q[n]);l&&c.classes[q[n]]&&f.push(c.classes[q[n]])}}var f=[],k=this;c=
a.extend({element:this.element,classes:this.options.classes||{}},c);c.keys&&h(c.keys.match(/\S+/g)||[],!0);c.extra&&h(c.extra.match(/\S+/g)||[]);return f.join(" ")},_untrackClassesElement:function(c){var e=this;a.each(e.classesElementLookup,function(h,f){-1!==a.inArray(c.target,f)&&(e.classesElementLookup[h]=a(f.not(c.target).get()))});this._off(a(c.target))},_removeClass:function(c,e,h){return this._toggleClass(c,e,h,!1)},_addClass:function(c,e,h){return this._toggleClass(c,e,h,!0)},_toggleClass:function(c,
e,h,f){f="boolean"===typeof f?f:h;var k="string"===typeof c||null===c;c={extra:k?e:h,keys:k?c:e,element:k?this.element:c,add:f};c.element.toggleClass(this._classes(c),f);return this},_on:function(c,e,h){var f,k=this;"boolean"!==typeof c&&(h=e,e=c,c=!1);h?(e=f=a(e),this.bindings=this.bindings.add(e)):(h=e,e=this.element,f=this.widget());a.each(h,function(q,l){function n(){if(c||!0!==k.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof l?k[l]:l).apply(k,arguments)}"string"!==
typeof l&&(n.guid=l.guid=l.guid||n.guid||a.guid++);var m=q.match(/^([\w:-]*)\s*(.*)$/);q=m[1]+k.eventNamespace;if(m=m[2])f.on(q,m,n);else e.on(q,n)})},_off:function(c,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;c.off(e);this.bindings=a(this.bindings.not(c).get());this.focusable=a(this.focusable.not(c).get());this.hoverable=a(this.hoverable.not(c).get())},_delay:function(c,e){var h=this;return setTimeout(function(){return("string"===typeof c?h[c]:c).apply(h,arguments)},
e||0)},_hoverable:function(c){this.hoverable=this.hoverable.add(c);this._on(c,{mouseenter:function(e){this._addClass(a(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(a(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(c){this.focusable=this.focusable.add(c);this._on(c,{focusin:function(e){this._addClass(a(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(a(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(c,
e,h){var f,k=this.options[c];h=h||{};e=a.Event(e);e.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();e.target=this.element[0];if(c=e.originalEvent)for(f in c)f in e||(e[f]=c[f]);this.element.trigger(e,h);return!("function"===typeof k&&!1===k.apply(this.element[0],[e].concat(h))||e.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(c,e){a.Widget.prototype["_"+c]=function(h,f,k){"string"===typeof f&&(f={effect:f});var q=f?!0===f||"number"===typeof f?e:f.effect||
e:c;f=f||{};"number"===typeof f?f={duration:f}:!0===f&&(f={});var l=!a.isEmptyObject(f);f.complete=k;f.delay&&h.delay(f.delay);if(l&&a.effects&&a.effects.effect[q])h[c](f);else if(q!==c&&h[q])h[q](f.duration,f.easing,k);else h.queue(function(n){a(this)[c]();k&&k.call(h[0]);n()})}});return a.widget});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./version"],a):a(jQuery)})(function(a){(function(){function b(m,p,r){return[parseFloat(m[0])*(l.test(m[0])?p/100:1),parseFloat(m[1])*(l.test(m[1])?r/100:1)]}function d(m){var p=m[0];return 9===p.nodeType?{width:m.width(),height:m.height(),offset:{top:0,left:0}}:null!=p&&p===p.window?{width:m.width(),height:m.height(),offset:{top:m.scrollTop(),left:m.scrollLeft()}}:p.preventDefault?{width:0,height:0,offset:{top:p.pageY,left:p.pageX}}:
{width:m.outerWidth(),height:m.outerHeight(),offset:m.offset()}}var g,c=Math.max,e=Math.abs,h=/left|center|right/,f=/top|center|bottom/,k=/[\+\-]\d+(\.[\d]+)?%?/,q=/^\w+/,l=/%$/,n=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==g)return g;var m=a("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>");var p=m.children()[0];a("body").append(m);var r=p.offsetWidth;m.css("overflow","scroll");p=p.offsetWidth;
r===p&&(p=m[0].clientWidth);m.remove();return g=r-p},getScrollInfo:function(m){var p=m.isWindow||m.isDocument?"":m.element.css("overflow-x"),r=m.isWindow||m.isDocument?"":m.element.css("overflow-y");p="scroll"===p||"auto"===p&&m.width<m.element[0].scrollWidth;return{width:"scroll"===r||"auto"===r&&m.height<m.element[0].scrollHeight?a.position.scrollbarWidth():0,height:p?a.position.scrollbarWidth():0}},getWithinInfo:function(m){var p=a(m||window);var r=p[0];r=null!=r&&r===r.window;var v=!!p[0]&&9===
p[0].nodeType;return{element:p,isWindow:r,isDocument:v,offset:r||v?{left:0,top:0}:a(m).offset(),scrollLeft:p.scrollLeft(),scrollTop:p.scrollTop(),width:p.outerWidth(),height:p.outerHeight()}}};a.fn.position=function(m){if(!m||!m.of)return n.apply(this,arguments);m=a.extend({},m);var p="string"===typeof m.of?a(document).find(m.of):a(m.of),r=a.position.getWithinInfo(m.within),v=a.position.getScrollInfo(r),y=(m.collision||"flip").split(" "),B={};var t=d(p);p[0].preventDefault&&(m.at="left top");var u=
t.width;var x=t.height;var w=t.offset;var C=a.extend({},w);a.each(["my","at"],function(){var z=(m[this]||"").split(" ");1===z.length&&(z=h.test(z[0])?z.concat(["center"]):f.test(z[0])?["center"].concat(z):["center","center"]);z[0]=h.test(z[0])?z[0]:"center";z[1]=f.test(z[1])?z[1]:"center";var D=k.exec(z[0]);var F=k.exec(z[1]);B[this]=[D?D[0]:0,F?F[0]:0];m[this]=[q.exec(z[0])[0],q.exec(z[1])[0]]});1===y.length&&(y[1]=y[0]);"right"===m.at[0]?C.left+=u:"center"===m.at[0]&&(C.left+=u/2);"bottom"===m.at[1]?
C.top+=x:"center"===m.at[1]&&(C.top+=x/2);var A=b(B.at,u,x);C.left+=A[0];C.top+=A[1];return this.each(function(){var z,D=a(this),F=D.outerWidth(),E=D.outerHeight(),G=parseInt(a.css(this,"marginLeft"),10)||0,I=parseInt(a.css(this,"marginTop"),10)||0,H=F+G+(parseInt(a.css(this,"marginRight"),10)||0)+v.width,J=E+I+(parseInt(a.css(this,"marginBottom"),10)||0)+v.height,M=a.extend({},C),R=b(B.my,D.outerWidth(),D.outerHeight());"right"===m.my[0]?M.left-=F:"center"===m.my[0]&&(M.left-=F/2);"bottom"===m.my[1]?
M.top-=E:"center"===m.my[1]&&(M.top-=E/2);M.left+=R[0];M.top+=R[1];var S={marginLeft:G,marginTop:I};a.each(["left","top"],function(L,O){if(a.ui.position[y[L]])a.ui.position[y[L]][O](M,{targetWidth:u,targetHeight:x,elemWidth:F,elemHeight:E,collisionPosition:S,collisionWidth:H,collisionHeight:J,offset:[A[0]+R[0],A[1]+R[1]],my:m.my,at:m.at,within:r,elem:D})});m.using&&(z=function(L){var O=w.left-M.left,P=O+u-F,Q=w.top-M.top,U=Q+x-E,N={target:{element:p,left:w.left,top:w.top,width:u,height:x},element:{element:D,
left:M.left,top:M.top,width:F,height:E},horizontal:0>P?"left":0<O?"right":"center",vertical:0>U?"top":0<Q?"bottom":"middle"};u<F&&e(O+P)<u&&(N.horizontal="center");x<E&&e(Q+U)<x&&(N.vertical="middle");c(e(O),e(P))>c(e(Q),e(U))?N.important="horizontal":N.important="vertical";m.using.call(this,L,N)});D.offset(a.extend(M,{using:z}))})};a.ui.position={fit:{left:function(m,p){var r=p.within,v=r.isWindow?r.scrollLeft:r.offset.left,y=r.width,B=m.left-p.collisionPosition.marginLeft;r=v-B;var t=B+p.collisionWidth-
y-v;p.collisionWidth>y?0<r&&0>=t?(p=m.left+r+p.collisionWidth-y-v,m.left+=r-p):m.left=0<t&&0>=r?v:r>t?v+y-p.collisionWidth:v:m.left=0<r?m.left+r:0<t?m.left-t:c(m.left-B,m.left)},top:function(m,p){var r=p.within,v=r.isWindow?r.scrollTop:r.offset.top,y=p.within.height,B=m.top-p.collisionPosition.marginTop;r=v-B;var t=B+p.collisionHeight-y-v;p.collisionHeight>y?0<r&&0>=t?(p=m.top+r+p.collisionHeight-y-v,m.top+=r-p):m.top=0<t&&0>=r?v:r>t?v+y-p.collisionHeight:v:m.top=0<r?m.top+r:0<t?m.top-t:c(m.top-B,
m.top)}},flip:{left:function(m,p){var r=p.within,v=r.offset.left+r.scrollLeft,y=r.width,B=r.isWindow?r.scrollLeft:r.offset.left,t=m.left-p.collisionPosition.marginLeft;r=t-B;var u=t+p.collisionWidth-y-B;t="left"===p.my[0]?-p.elemWidth:"right"===p.my[0]?p.elemWidth:0;var x="left"===p.at[0]?p.targetWidth:"right"===p.at[0]?-p.targetWidth:0,w=-2*p.offset[0];if(0>r){if(p=m.left+t+x+w+p.collisionWidth-y-v,0>p||p<e(r))m.left+=t+x+w}else 0<u&&(p=m.left-p.collisionPosition.marginLeft+t+x+w-B,0<p||e(p)<u)&&
(m.left+=t+x+w)},top:function(m,p){var r=p.within,v=r.offset.top+r.scrollTop,y=r.height,B=r.isWindow?r.scrollTop:r.offset.top,t=m.top-p.collisionPosition.marginTop;r=t-B;var u=t+p.collisionHeight-y-B;t="top"===p.my[1]?-p.elemHeight:"bottom"===p.my[1]?p.elemHeight:0;var x="top"===p.at[1]?p.targetHeight:"bottom"===p.at[1]?-p.targetHeight:0,w=-2*p.offset[1];if(0>r){if(p=m.top+t+x+w+p.collisionHeight-y-v,0>p||p<e(r))m.top+=t+x+w}else 0<u&&(p=m.top-p.collisionPosition.marginTop+t+x+w-B,0<p||e(p)<u)&&(m.top+=
t+x+w)}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}}})();return a.ui.position});
(function(a){"function"===typeof define&&define.amd?define(["jquery","../ie","../version","../widget"],a):a(jQuery)})(function(a){var b=!1;a(document).on("mouseup",function(){b=!1});return a.widget("ui.mouse",{version:"1.13.2",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.on("mousedown."+this.widgetName,function(g){return d._mouseDown(g)}).on("click."+this.widgetName,function(g){if(!0===a.data(g.target,d.widgetName+".preventClickEvent"))return a.removeData(g.target,
d.widgetName+".preventClickEvent"),g.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName);this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(d){if(!b){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var g=this,c=1===d.which,e="string"===typeof this.options.cancel&&d.target.nodeName?a(d.target).closest(this.options.cancel).length:
!1;if(!c||e||!this._mouseCapture(d))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){g.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&(this._mouseStarted=!1!==this._mouseStart(d),!this._mouseStarted))return d.preventDefault(),!0;!0===a.data(d.target,this.widgetName+".preventClickEvent")&&a.removeData(d.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(h){return g._mouseMove(h)};
this._mouseUpDelegate=function(h){return g._mouseUp(h)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);d.preventDefault();return b=!0}},_mouseMove:function(d){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!d.button)return this._mouseUp(d);if(!d.which)if(d.originalEvent.altKey||d.originalEvent.ctrlKey||d.originalEvent.metaKey||d.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(d)}if(d.which||
d.button)this._mouseMoved=!0;if(this._mouseStarted)return this._mouseDrag(d),d.preventDefault();this._mouseDistanceMet(d)&&this._mouseDelayMet(d)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,d))?this._mouseDrag(d):this._mouseUp(d));return!this._mouseStarted},_mouseUp:function(d){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,d.target===this._mouseDownEvent.target&&
a.data(d.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(d));this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer);b=this.ignoreMissingWhich=!1;d.preventDefault()},_mouseDistanceMet:function(d){return Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},
_mouseCapture:function(){return!0}})});
(function(a){"function"===typeof define&&define.amd?define("jquery ../keycode ../safe-active-element ../unique-id ../version ../widget".split(" "),a):a(jQuery)})(function(a){a.widget("ui.tabs",{version:"1.13.2",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},
_isLocal:function(){var b=/#.*$/;return function(d){var g=d.href.replace(b,"");var c=location.href.replace(b,"");try{g=decodeURIComponent(g)}catch(e){}try{c=decodeURIComponent(c)}catch(e){}return 1<d.hash.length&&g===c}}(),_create:function(){var b=this,d=this.options;this.running=!1;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,d.collapsible);this._processTabs();d.active=this._initialActive();Array.isArray(d.disabled)&&(d.disabled=a.uniqueSort(d.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),
function(g){return b.tabs.index(g)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(d.active):a();this._refresh();this.active.length&&this.load(d.active)},_initialActive:function(){var b=this.options.active,d=this.options.collapsible,g=location.hash.substring(1);null===b&&(g&&this.tabs.each(function(c,e){if(a(e).attr("aria-controls")===g)return b=c,!1}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===b||-1===b)&&(b=this.tabs.length?0:
!1);!1!==b&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=d?!1:0));!d&&!1===b&&this.anchors.length&&(b=0);return b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var d=a(a.ui.safeActiveElement(this.document[0])).closest("li"),g=this.tabs.index(d),c=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:g++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:c=!1;
g--;break;case a.ui.keyCode.END:g=this.anchors.length-1;break;case a.ui.keyCode.HOME:g=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(g);return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(g===this.options.active?!1:g);return;default:return}b.preventDefault();clearTimeout(this.activating);g=this._focusNextTab(g,c);b.ctrlKey||b.metaKey||(d.attr("aria-selected","false"),this.tabs.eq(g).attr("aria-selected","true"),
this.activating=this._delay(function(){this.option("active",g)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,
d){function g(){b>c&&(b=0);0>b&&(b=c);return b}for(var c=this.tabs.length-1;-1!==a.inArray(g(),this.options.disabled);)b=d?b+1:b-1;return b},_focusNextTab:function(b,d){b=this._findNextTab(b,d);this.tabs.eq(b).trigger("focus");return b},_setOption:function(b,d){"active"===b?this._activate(d):(this._super(b,d),"collapsible"===b&&(this._toggleClass("ui-tabs-collapsible",null,d),d||!1!==this.options.active||this._activate(0)),"event"===b&&this._setupEvents(d),"heightStyle"===b&&this._setupHeightStyle(d))},
_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,d=this.tablist.children(":has(a[href])");b.disabled=a.map(d.filter(".ui-state-disabled"),function(g){return d.index(g)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):
b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",
tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,d=this.tabs,g=this.anchors,c=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){a(this).is(".ui-state-disabled")&&
e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return a("a",this)[0]}).attr({tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=a();this.anchors.each(function(e,h){var f=a(h).uniqueId().attr("id"),k=a(h).closest("li"),
q=k.attr("aria-controls");if(b._isLocal(h)){e=h.hash;h=e.substring(1);var l=b.element.find(b._sanitizeSelector(e))}else h=k.attr("aria-controls")||a({}).uniqueId()[0].id,l=b.element.find("#"+h),l.length||(l=b._createPanel(h),l.insertAfter(b.panels[e-1]||b.tablist)),l.attr("aria-live","polite");l.length&&(b.panels=b.panels.add(l));q&&k.data("ui-tabs-aria-controls",q);k.attr({"aria-controls":h,"aria-labelledby":f});l.attr("aria-labelledby",f)});this.panels.attr("role","tabpanel");this._addClass(this.panels,
"ui-tabs-panel","ui-widget-content");d&&(this._off(d.not(this.tabs)),this._off(g.not(this.anchors)),this._off(c.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(b){var d,g;Array.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(g=0;d=this.tabs[g];g++)d=a(d),!0===b||-1!==a.inArray(g,b)?(d.attr("aria-disabled","true"),this._addClass(d,
null,"ui-state-disabled")):(d.removeAttr("aria-disabled"),this._removeClass(d,null,"ui-state-disabled"));this.options.disabled=b;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===b)},_setupEvents:function(b){var d={};b&&a.each(b.split(" "),function(g,c){d[c]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(!0,this.anchors,{click:function(g){g.preventDefault()}});this._on(this.anchors,d);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,
{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var d=this.element.parent();if("fill"===b){var g=d.height();g-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var c=a(this),e=c.css("position");"absolute"!==e&&"fixed"!==e&&(g-=c.outerHeight(!0))});this.element.children().not(this.panels).each(function(){g-=a(this).outerHeight(!0)});this.panels.each(function(){a(this).height(Math.max(0,
g-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else"auto"===b&&(g=0,this.panels.each(function(){g=Math.max(g,a(this).height("").height())}).height(g))},_eventHandler:function(b){var d=this.options,g=this.active,c=a(b.currentTarget).closest("li"),e=c[0]===g[0],h=e&&d.collapsible,f=h?a():this._getPanelForTab(c),k=g.length?this._getPanelForTab(g):a();g={oldTab:g,oldPanel:k,newTab:h?a():c,newPanel:f};b.preventDefault();c.hasClass("ui-state-disabled")||c.hasClass("ui-tabs-loading")||
this.running||e&&!d.collapsible||!1===this._trigger("beforeActivate",b,g)||(d.active=h?!1:this.tabs.index(c),this.active=e?a():c,this.xhr&&this.xhr.abort(),k.length||f.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),f.length&&this.load(this.tabs.index(c),b),this._toggle(b,g))},_toggle:function(b,d){function g(){e.running=!1;e._trigger("activate",b,d)}function c(){e._addClass(d.newTab.closest("li"),"ui-tabs-active","ui-state-active");h.length&&e.options.show?e._show(h,e.options.show,
g):(h.show(),g())}var e=this,h=d.newPanel,f=d.oldPanel;this.running=!0;f.length&&this.options.hide?this._hide(f,this.options.hide,function(){e._removeClass(d.oldTab.closest("li"),"ui-tabs-active","ui-state-active");c()}):(this._removeClass(d.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),f.hide(),c());f.attr("aria-hidden","true");d.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});h.length&&f.length?d.oldTab.attr("tabIndex",-1):h.length&&this.tabs.filter(function(){return 0===
a(this).attr("tabIndex")}).attr("tabIndex",-1);h.attr("aria-hidden","false");d.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(b){"string"===typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+
a.escapeSelector(b)+"']")));return b},_destroy:function(){this.xhr&&this.xhr.abort();this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")});this.tabs.each(function(){var b=a(this),d=b.data("ui-tabs-aria-controls");d?b.attr("aria-controls",
d).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var d=this.options.disabled;!1!==d&&(void 0===b?d=!1:(b=this._getIndex(b),d=Array.isArray(d)?a.map(d,function(g){return g!==b?g:null}):a.map(this.tabs,function(g,c){return c!==b?c:null})),this._setOptionDisabled(d))},disable:function(b){var d=this.options.disabled;if(!0!==d){if(void 0===b)d=!0;else{b=this._getIndex(b);if(-1!==
a.inArray(b,d))return;d=Array.isArray(d)?a.merge([b],d).sort():[b]}this._setOptionDisabled(d)}},load:function(b,d){b=this._getIndex(b);var g=this,c=this.tabs.eq(b);b=c.find(".ui-tabs-anchor");var e=this._getPanelForTab(c),h={tab:c,panel:e},f=function(k,q){"abort"===q&&g.panels.stop(!1,!0);g._removeClass(c,"ui-tabs-loading");e.removeAttr("aria-busy");k===g.xhr&&delete g.xhr};this._isLocal(b[0])||(this.xhr=a.ajax(this._ajaxSettings(b,d,h)))&&"canceled"!==this.xhr.statusText&&(this._addClass(c,"ui-tabs-loading"),
e.attr("aria-busy","true"),this.xhr.done(function(k,q,l){setTimeout(function(){e.html(k);g._trigger("load",d,h);f(l,q)},1)}).fail(function(k,q){setTimeout(function(){f(k,q)},1)}))},_ajaxSettings:function(b,d,g){var c=this;return{url:b.attr("href").replace(/#.*$/,""),beforeSend:function(e,h){return c._trigger("beforeLoad",d,a.extend({jqXHR:e,ajaxSettings:h},g))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}});!1!==a.uiBackCompat&&
a.widget("ui.tabs",a.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}});return a.ui.tabs});
(function(a){"function"===typeof define&&define.amd?define(["jquery","../version","../keycode"],a):a(jQuery)})(function(a){function b(f){for(var k;f.length&&f[0]!==document;){k=f.css("position");if("absolute"===k||"relative"===k||"fixed"===k)if(k=parseInt(f.css("zIndex"),10),!isNaN(k)&&0!==k)return k;f=f.parent()}return 0}function d(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";
this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",
buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",
constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,this.regional[""]);this.regional.en=a.extend(!0,{},this.regional[""]);this.regional["en-US"]=a.extend(!0,{},this.regional.en);this.dpDiv=g(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function g(f){return f.on("mouseout","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",function(){a(this).removeClass("ui-state-hover");
-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).on("mouseover","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",c)}function c(){a.datepicker._isDisabledDatepicker(h.inline?h.dpDiv.parent()[0]:h.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),
-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))}function e(f,k){a.extend(f,k);for(var q in k)null==k[q]&&(f[q]=k[q]);return f}a.extend(a.ui,{datepicker:{version:"1.13.2"}});var h;a.extend(d.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(f){e(this._defaults,f||{});return this},_attachDatepicker:function(f,
k){var q=f.nodeName.toLowerCase();var l="div"===q||"span"===q;f.id||(this.uuid+=1,f.id="dp"+this.uuid);var n=this._newInst(a(f),l);n.settings=a.extend({},k||{});"input"===q?this._connectDatepicker(f,n):l&&this._inlineDatepicker(f,n)},_newInst:function(f,k){return{id:f[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:f,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:k,dpDiv:k?g(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):
this.dpDiv}},_connectDatepicker:function(f,k){var q=a(f);k.append=a([]);k.trigger=a([]);q.hasClass(this.markerClassName)||(this._attachments(q,k),q.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(k),a.data(f,"datepicker",k),k.settings.disabled&&this._disableDatepicker(f))},_attachments:function(f,k){var q=this._get(k,"appendText");var l=this._get(k,"isRTL");k.append&&k.append.remove();q&&(k.append=a("<span>").addClass(this._appendClass).text(q),
f[l?"before":"after"](k.append));f.off("focus",this._showDatepicker);k.trigger&&k.trigger.remove();q=this._get(k,"showOn");if("focus"===q||"both"===q)f.on("focus",this._showDatepicker);if("button"===q||"both"===q){q=this._get(k,"buttonText");var n=this._get(k,"buttonImage");this._get(k,"buttonImageOnly")?k.trigger=a("<img>").addClass(this._triggerClass).attr({src:n,alt:q,title:q}):(k.trigger=a("<button type='button'>").addClass(this._triggerClass),n?k.trigger.html(a("<img>").attr({src:n,alt:q,title:q})):
k.trigger.text(q));f[l?"before":"after"](k.trigger);k.trigger.on("click",function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput===f[0]?a.datepicker._hideDatepicker():(a.datepicker._datepickerShowing&&a.datepicker._lastInput!==f[0]&&a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(f[0]));return!1})}},_autoSize:function(f){if(this._get(f,"autoSize")&&!f.inline){var k,q,l,n=new Date(2009,11,20),m=this._get(f,"dateFormat");if(m.match(/[DM]/)){var p=function(r){for(l=q=k=0;l<r.length;l++)r[l].length>
k&&(k=r[l].length,q=l);return q};n.setMonth(p(this._get(f,m.match(/MM/)?"monthNames":"monthNamesShort")));n.setDate(p(this._get(f,m.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())}f.input.attr("size",this._formatDate(f,n).length)}},_inlineDatepicker:function(f,k){var q=a(f);q.hasClass(this.markerClassName)||(q.addClass(this.markerClassName).append(k.dpDiv),a.data(f,"datepicker",k),this._setDate(k,this._getDefaultDate(k),!0),this._updateDatepicker(k),this._updateAlternate(k),k.settings.disabled&&
this._disableDatepicker(f),k.dpDiv.css("display","block"))},_dialogDatepicker:function(f,k,q,l,n){f=this._dialogInst;f||(this.uuid+=1,f="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+f+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),a("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},a.data(this._dialogInput[0],"datepicker",f));e(f.settings,l||{});k=k&&k.constructor===Date?
this._formatDate(f,k):k;this._dialogInput.val(k);this._pos=n?n.length?n:[n.pageX,n.pageY]:null;if(!this._pos){k=document.documentElement.clientWidth;l=document.documentElement.clientHeight;n=document.documentElement.scrollLeft||document.body.scrollLeft;var m=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[k/2-100+n,l/2-150+m]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");f.settings.onSelect=q;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);
this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);a.data(this._dialogInput[0],"datepicker",f);return this},_destroyDatepicker:function(f){var k=a(f),q=a.data(f,"datepicker");if(k.hasClass(this.markerClassName)){var l=f.nodeName.toLowerCase();a.removeData(f,"datepicker");"input"===l?(q.append.remove(),q.trigger.remove(),k.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):
"div"!==l&&"span"!==l||k.removeClass(this.markerClassName).empty();h===q&&(this._curInst=h=null)}},_enableDatepicker:function(f){var k=a(f),q=a.data(f,"datepicker");if(k.hasClass(this.markerClassName)){var l=f.nodeName.toLowerCase();if("input"===l)f.disabled=!1,q.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"===l||"span"===l)l=k.children("."+this._inlineClass),l.children().removeClass("ui-state-disabled"),l.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!1);this._disabledInputs=a.map(this._disabledInputs,function(n){return n===f?null:n})}},_disableDatepicker:function(f){var k=a(f),q=a.data(f,"datepicker");if(k.hasClass(this.markerClassName)){var l=f.nodeName.toLowerCase();if("input"===l)f.disabled=!0,q.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"===l||"span"===l)l=k.children("."+this._inlineClass),l.children().addClass("ui-state-disabled"),l.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=a.map(this._disabledInputs,function(n){return n===f?null:n});this._disabledInputs[this._disabledInputs.length]=f}},_isDisabledDatepicker:function(f){if(!f)return!1;for(var k=0;k<this._disabledInputs.length;k++)if(this._disabledInputs[k]===f)return!0;return!1},_getInst:function(f){try{return a.data(f,"datepicker")}catch(k){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(f,k,q){var l=this._getInst(f);if(2===arguments.length&&"string"===typeof k)return"defaults"===
k?a.extend({},a.datepicker._defaults):l?"all"===k?a.extend({},l.settings):this._get(l,k):null;var n=k||{};"string"===typeof k&&(n={},n[k]=q);if(l){this._curInst===l&&this._hideDatepicker();var m=this._getDateDatepicker(f,!0);var p=this._getMinMaxDate(l,"min");var r=this._getMinMaxDate(l,"max");e(l.settings,n);null!==p&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,p));null!==r&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,r));
"disabled"in n&&(n.disabled?this._disableDatepicker(f):this._enableDatepicker(f));this._attachments(a(f),l);this._autoSize(l);this._setDate(l,m);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function(f,k,q){this._optionDatepicker(f,k,q)},_refreshDatepicker:function(f){(f=this._getInst(f))&&this._updateDatepicker(f)},_setDateDatepicker:function(f,k){if(f=this._getInst(f))this._setDate(f,k),this._updateDatepicker(f),this._updateAlternate(f)},_getDateDatepicker:function(f,k){(f=
this._getInst(f))&&!f.inline&&this._setDateFromField(f,k);return f?this._getDate(f):null},_doKeyDown:function(f){var k=a.datepicker._getInst(f.target);var q=!0;var l=k.dpDiv.is(".ui-datepicker-rtl");k._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(f.keyCode){case 9:a.datepicker._hideDatepicker();q=!1;break;case 13:return q=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",k.dpDiv),q[0]&&a.datepicker._selectDay(f.target,k.selectedMonth,k.selectedYear,q[0]),(f=a.datepicker._get(k,
"onSelect"))?(q=a.datepicker._formatDate(k),f.apply(k.input?k.input[0]:null,[q,k])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(f.target,f.ctrlKey?-a.datepicker._get(k,"stepBigMonths"):-a.datepicker._get(k,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(f.target,f.ctrlKey?+a.datepicker._get(k,"stepBigMonths"):+a.datepicker._get(k,"stepMonths"),"M");break;case 35:(f.ctrlKey||f.metaKey)&&a.datepicker._clearDate(f.target);
q=f.ctrlKey||f.metaKey;break;case 36:(f.ctrlKey||f.metaKey)&&a.datepicker._gotoToday(f.target);q=f.ctrlKey||f.metaKey;break;case 37:(f.ctrlKey||f.metaKey)&&a.datepicker._adjustDate(f.target,l?1:-1,"D");q=f.ctrlKey||f.metaKey;f.originalEvent.altKey&&a.datepicker._adjustDate(f.target,f.ctrlKey?-a.datepicker._get(k,"stepBigMonths"):-a.datepicker._get(k,"stepMonths"),"M");break;case 38:(f.ctrlKey||f.metaKey)&&a.datepicker._adjustDate(f.target,-7,"D");q=f.ctrlKey||f.metaKey;break;case 39:(f.ctrlKey||f.metaKey)&&
a.datepicker._adjustDate(f.target,l?-1:1,"D");q=f.ctrlKey||f.metaKey;f.originalEvent.altKey&&a.datepicker._adjustDate(f.target,f.ctrlKey?+a.datepicker._get(k,"stepBigMonths"):+a.datepicker._get(k,"stepMonths"),"M");break;case 40:(f.ctrlKey||f.metaKey)&&a.datepicker._adjustDate(f.target,7,"D");q=f.ctrlKey||f.metaKey;break;default:q=!1}else 36===f.keyCode&&f.ctrlKey?a.datepicker._showDatepicker(this):q=!1;q&&(f.preventDefault(),f.stopPropagation())},_doKeyPress:function(f){var k=a.datepicker._getInst(f.target);
if(a.datepicker._get(k,"constrainInput")){k=a.datepicker._possibleChars(a.datepicker._get(k,"dateFormat"));var q=String.fromCharCode(null==f.charCode?f.keyCode:f.charCode);return f.ctrlKey||f.metaKey||" ">q||!k||-1<k.indexOf(q)}},_doKeyUp:function(f){var k;f=a.datepicker._getInst(f.target);if(f.input.val()!==f.lastVal)try{if(k=a.datepicker.parseDate(a.datepicker._get(f,"dateFormat"),f.input?f.input.val():null,a.datepicker._getFormatConfig(f)))a.datepicker._setDateFromField(f),a.datepicker._updateAlternate(f),
a.datepicker._updateDatepicker(f)}catch(q){}return!0},_showDatepicker:function(f){f=f.target||f;"input"!==f.nodeName.toLowerCase()&&(f=a("input",f.parentNode)[0]);if(!a.datepicker._isDisabledDatepicker(f)&&a.datepicker._lastInput!==f){var k=a.datepicker._getInst(f);a.datepicker._curInst&&a.datepicker._curInst!==k&&(a.datepicker._curInst.dpDiv.stop(!0,!0),k&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var q=(q=a.datepicker._get(k,"beforeShow"))?q.apply(f,
[f,k]):{};if(!1!==q){e(k.settings,q);k.lastVal=null;a.datepicker._lastInput=f;a.datepicker._setDateFromField(k);a.datepicker._inDialog&&(f.value="");a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(f),a.datepicker._pos[1]+=f.offsetHeight);var l=!1;a(f).parents().each(function(){l|="fixed"===a(this).css("position");return!l});q={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;k.dpDiv.empty();k.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(k);
q=a.datepicker._checkOffset(k,q,l);k.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":l?"fixed":"absolute",display:"none",left:q.left+"px",top:q.top+"px"});if(!k.inline){q=a.datepicker._get(k,"showAnim");var n=a.datepicker._get(k,"duration");k.dpDiv.css("z-index",b(a(f))+1);a.datepicker._datepickerShowing=!0;if(a.effects&&a.effects.effect[q])k.dpDiv.show(q,a.datepicker._get(k,"showOptions"),n);else k.dpDiv[q||"show"](q?n:null);a.datepicker._shouldFocusInput(k)&&k.input.trigger("focus");
a.datepicker._curInst=k}}}},_updateDatepicker:function(f){this.maxRows=4;h=f;f.dpDiv.empty().append(this._generateHTML(f));this._attachHandlers(f);var k=this._getNumberOfMonths(f),q=k[1],l=f.dpDiv.find("."+this._dayOverClass+" a"),n=a.datepicker._get(f,"onUpdateDatepicker");0<l.length&&c.apply(l.get(0));f.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<q&&f.dpDiv.addClass("ui-datepicker-multi-"+q).css("width",17*q+"em");f.dpDiv[(1!==k[0]||1!==k[1]?
"add":"remove")+"Class"]("ui-datepicker-multi");f.dpDiv[(this._get(f,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");f===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(f)&&f.input.trigger("focus");if(f.yearshtml){var m=f.yearshtml;setTimeout(function(){m===f.yearshtml&&f.yearshtml&&f.dpDiv.find("select.ui-datepicker-year").first().replaceWith(f.yearshtml);m=f.yearshtml=null},0)}n&&n.apply(f.input?f.input[0]:null,[f])},_shouldFocusInput:function(f){return f.input&&
f.input.is(":visible")&&!f.input.is(":disabled")&&!f.input.is(":focus")},_checkOffset:function(f,k,q){var l=f.dpDiv.outerWidth(),n=f.dpDiv.outerHeight(),m=f.input?f.input.outerWidth():0,p=f.input?f.input.outerHeight():0,r=document.documentElement.clientWidth+(q?0:a(document).scrollLeft()),v=document.documentElement.clientHeight+(q?0:a(document).scrollTop());k.left-=this._get(f,"isRTL")?l-m:0;k.left-=q&&k.left===f.input.offset().left?a(document).scrollLeft():0;k.top-=q&&k.top===f.input.offset().top+
p?a(document).scrollTop():0;k.left-=Math.min(k.left,k.left+l>r&&r>l?Math.abs(k.left+l-r):0);k.top-=Math.min(k.top,k.top+n>v&&v>n?Math.abs(n+p):0);return k},_findPos:function(f){var k=this._getInst(f);for(k=this._get(k,"isRTL");f&&("hidden"===f.type||1!==f.nodeType||a.expr.pseudos.hidden(f));)f=f[k?"previousSibling":"nextSibling"];f=a(f).offset();return[f.left,f.top]},_hideDatepicker:function(f){var k=this._curInst;if(k&&(!f||k===a.data(f,"datepicker"))&&this._datepickerShowing){f=this._get(k,"showAnim");
var q=this._get(k,"duration");var l=function(){a.datepicker._tidyDialog(k)};if(a.effects&&(a.effects.effect[f]||a.effects[f]))k.dpDiv.hide(f,a.datepicker._get(k,"showOptions"),q,l);else k.dpDiv["slideDown"===f?"slideUp":"fadeIn"===f?"fadeOut":"hide"](f?q:null,l);f||l();this._datepickerShowing=!1;(f=this._get(k,"onClose"))&&f.apply(k.input?k.input[0]:null,[k.input?k.input.val():"",k]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&
(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(f){f.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(f){if(a.datepicker._curInst){f=a(f.target);var k=a.datepicker._getInst(f[0]);(!(f[0].id===a.datepicker._mainDivId||0!==f.parents("#"+a.datepicker._mainDivId).length||f.hasClass(a.datepicker.markerClassName)||f.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&
a.blockUI)||f.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==k)&&a.datepicker._hideDatepicker()}},_adjustDate:function(f,k,q){f=a(f);var l=this._getInst(f[0]);this._isDisabledDatepicker(f[0])||(this._adjustInstDate(l,k,q),this._updateDatepicker(l))},_gotoToday:function(f){var k=a(f),q=this._getInst(k[0]);this._get(q,"gotoCurrent")&&q.currentDay?(q.selectedDay=q.currentDay,q.drawMonth=q.selectedMonth=q.currentMonth,q.drawYear=q.selectedYear=q.currentYear):(f=new Date,q.selectedDay=
f.getDate(),q.drawMonth=q.selectedMonth=f.getMonth(),q.drawYear=q.selectedYear=f.getFullYear());this._notifyChange(q);this._adjustDate(k)},_selectMonthYear:function(f,k,q){f=a(f);var l=this._getInst(f[0]);l["selected"+("M"===q?"Month":"Year")]=l["draw"+("M"===q?"Month":"Year")]=parseInt(k.options[k.selectedIndex].value,10);this._notifyChange(l);this._adjustDate(f)},_selectDay:function(f,k,q,l){var n=a(f);a(l).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||(n=this._getInst(n[0]),
n.selectedDay=n.currentDay=parseInt(a("a",l).attr("data-date")),n.selectedMonth=n.currentMonth=k,n.selectedYear=n.currentYear=q,this._selectDate(f,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(f){f=a(f);this._selectDate(f,"")},_selectDate:function(f,k){f=a(f);var q=this._getInst(f[0]);k=null!=k?k:this._formatDate(q);q.input&&q.input.val(k);this._updateAlternate(q);(f=this._get(q,"onSelect"))?f.apply(q.input?q.input[0]:null,[k,q]):q.input&&q.input.trigger("change");
q.inline?this._updateDatepicker(q):(this._hideDatepicker(),this._lastInput=q.input[0],"object"!==typeof q.input[0]&&q.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(f){var k=this._get(f,"altField");if(k){var q=this._get(f,"altFormat")||this._get(f,"dateFormat");var l=this._getDate(f);f=this.formatDate(q,l,this._getFormatConfig(f));a(document).find(k).val(f)}},noWeekends:function(f){f=f.getDay();return[0<f&&6>f,""]},iso8601Week:function(f){var k=new Date(f.getTime());k.setDate(k.getDate()+
4-(k.getDay()||7));f=k.getTime();k.setMonth(0);k.setDate(1);return Math.floor(Math.round((f-k)/864E5)/7)+1},parseDate:function(f,k,q){if(null==f||null==k)throw"Invalid arguments";k="object"===typeof k?k.toString():k+"";if(""===k)return null;var l,n=0;var m=(q?q.shortYearCutoff:null)||this._defaults.shortYearCutoff;m="string"!==typeof m?m:(new Date).getFullYear()%100+parseInt(m,10);var p=(q?q.dayNamesShort:null)||this._defaults.dayNamesShort;var r=(q?q.dayNames:null)||this._defaults.dayNames,v=(q?
q.monthNamesShort:null)||this._defaults.monthNamesShort,y=(q?q.monthNames:null)||this._defaults.monthNames,B=q=-1,t=-1,u=-1,x=!1,w=function(F){(F=l+1<f.length&&f.charAt(l+1)===F)&&l++;return F},C=function(F){var E=w(F);E="@"===F?14:"!"===F?20:"y"===F&&E?4:"o"===F?3:2;F=new RegExp("^\\d{"+("y"===F?E:1)+","+E+"}");F=k.substring(n).match(F);if(!F)throw"Missing number at position "+n;n+=F[0].length;return parseInt(F[0],10)},A=function(F,E,G){var I=-1;F=a.map(w(F)?G:E,function(H,J){return[[J,H]]}).sort(function(H,
J){return-(H[1].length-J[1].length)});a.each(F,function(H,J){H=J[1];if(k.substr(n,H.length).toLowerCase()===H.toLowerCase())return I=J[0],n+=H.length,!1});if(-1!==I)return I+1;throw"Unknown name at position "+n;},z=function(){if(k.charAt(n)!==f.charAt(l))throw"Unexpected literal at position "+n;n++};for(l=0;l<f.length;l++)if(x)"'"!==f.charAt(l)||w("'")?z():x=!1;else switch(f.charAt(l)){case "d":t=C("d");break;case "D":A("D",p,r);break;case "o":u=C("o");break;case "m":B=C("m");break;case "M":B=A("M",
v,y);break;case "y":q=C("y");break;case "@":var D=new Date(C("@"));q=D.getFullYear();B=D.getMonth()+1;t=D.getDate();break;case "!":D=new Date((C("!")-this._ticksTo1970)/1E4);q=D.getFullYear();B=D.getMonth()+1;t=D.getDate();break;case "'":w("'")?z():x=!0;break;default:z()}if(n<k.length&&(p=k.substr(n),!/^\s+/.test(p)))throw"Extra/unparsed characters found in date: "+p;-1===q?q=(new Date).getFullYear():100>q&&(q+=(new Date).getFullYear()-(new Date).getFullYear()%100+(q<=m?0:-100));if(-1<u){B=1;t=u;
do{m=this._getDaysInMonth(q,B-1);if(t<=m)break;B++;t-=m}while(1)}D=this._daylightSavingAdjust(new Date(q,B-1,t));if(D.getFullYear()!==q||D.getMonth()+1!==B||D.getDate()!==t)throw"Invalid date";return D},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:62135596800*1E7,formatDate:function(f,k,q){if(!k)return"";var l,n=(q?q.dayNamesShort:
null)||this._defaults.dayNamesShort,m=(q?q.dayNames:null)||this._defaults.dayNames,p=(q?q.monthNamesShort:null)||this._defaults.monthNamesShort;q=(q?q.monthNames:null)||this._defaults.monthNames;var r=function(u){(u=l+1<f.length&&f.charAt(l+1)===u)&&l++;return u},v=function(u,x,w){x=""+x;if(r(u))for(;x.length<w;)x="0"+x;return x},y=function(u,x,w,C){return r(u)?C[x]:w[x]},B="",t=!1;if(k)for(l=0;l<f.length;l++)if(t)"'"!==f.charAt(l)||r("'")?B+=f.charAt(l):t=!1;else switch(f.charAt(l)){case "d":B+=
v("d",k.getDate(),2);break;case "D":B+=y("D",k.getDay(),n,m);break;case "o":B+=v("o",Math.round(((new Date(k.getFullYear(),k.getMonth(),k.getDate())).getTime()-(new Date(k.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":B+=v("m",k.getMonth()+1,2);break;case "M":B+=y("M",k.getMonth(),p,q);break;case "y":B+=r("y")?k.getFullYear():(10>k.getFullYear()%100?"0":"")+k.getFullYear()%100;break;case "@":B+=k.getTime();break;case "!":B+=1E4*k.getTime()+this._ticksTo1970;break;case "'":r("'")?B+="'":
t=!0;break;default:B+=f.charAt(l)}return B},_possibleChars:function(f){var k,q="",l=!1,n=function(m){(m=k+1<f.length&&f.charAt(k+1)===m)&&k++;return m};for(k=0;k<f.length;k++)if(l)"'"!==f.charAt(k)||n("'")?q+=f.charAt(k):l=!1;else switch(f.charAt(k)){case "d":case "m":case "y":case "@":q+="0123456789";break;case "D":case "M":return null;case "'":n("'")?q+="'":l=!0;break;default:q+=f.charAt(k)}return q},_get:function(f,k){return void 0!==f.settings[k]?f.settings[k]:this._defaults[k]},_setDateFromField:function(f,
k){if(f.input.val()!==f.lastVal){var q=this._get(f,"dateFormat"),l=f.lastVal=f.input?f.input.val():null,n=this._getDefaultDate(f),m=n,p=this._getFormatConfig(f);try{m=this.parseDate(q,l,p)||n}catch(r){l=k?"":l}f.selectedDay=m.getDate();f.drawMonth=f.selectedMonth=m.getMonth();f.drawYear=f.selectedYear=m.getFullYear();f.currentDay=l?m.getDate():0;f.currentMonth=l?m.getMonth():0;f.currentYear=l?m.getFullYear():0;this._adjustInstDate(f)}},_getDefaultDate:function(f){return this._restrictMinMax(f,this._determineDate(f,
this._get(f,"defaultDate"),new Date))},_determineDate:function(f,k,q){var l=function(m){var p=new Date;p.setDate(p.getDate()+m);return p},n=function(m){try{return a.datepicker.parseDate(a.datepicker._get(f,"dateFormat"),m,a.datepicker._getFormatConfig(f))}catch(t){}var p=(m.toLowerCase().match(/^c/)?a.datepicker._getDate(f):null)||new Date,r=p.getFullYear(),v=p.getMonth();p=p.getDate();for(var y=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,B=y.exec(m);B;){switch(B[2]||"d"){case "d":case "D":p+=parseInt(B[1],
10);break;case "w":case "W":p+=7*parseInt(B[1],10);break;case "m":case "M":v+=parseInt(B[1],10);p=Math.min(p,a.datepicker._getDaysInMonth(r,v));break;case "y":case "Y":r+=parseInt(B[1],10),p=Math.min(p,a.datepicker._getDaysInMonth(r,v))}B=y.exec(m)}return new Date(r,v,p)};if(k=(k=null==k||""===k?q:"string"===typeof k?n(k):"number"===typeof k?isNaN(k)?q:l(k):new Date(k.getTime()))&&"Invalid Date"===k.toString()?q:k)k.setHours(0),k.setMinutes(0),k.setSeconds(0),k.setMilliseconds(0);return this._daylightSavingAdjust(k)},
_daylightSavingAdjust:function(f){if(!f)return null;f.setHours(12<f.getHours()?f.getHours()+2:0);return f},_setDate:function(f,k,q){var l=!k,n=f.selectedMonth,m=f.selectedYear;k=this._restrictMinMax(f,this._determineDate(f,k,new Date));f.selectedDay=f.currentDay=k.getDate();f.drawMonth=f.selectedMonth=f.currentMonth=k.getMonth();f.drawYear=f.selectedYear=f.currentYear=k.getFullYear();n===f.selectedMonth&&m===f.selectedYear||q||this._notifyChange(f);this._adjustInstDate(f);f.input&&f.input.val(l?"":
this._formatDate(f))},_getDate:function(f){return!f.currentYear||f.input&&""===f.input.val()?null:this._daylightSavingAdjust(new Date(f.currentYear,f.currentMonth,f.currentDay))},_attachHandlers:function(f){var k=this._get(f,"stepMonths"),q="#"+f.id.replace(/\\\\/g,"\\");f.dpDiv.find("[data-handler]").map(function(){a(this).on(this.getAttribute("data-event"),{prev:function(){a.datepicker._adjustDate(q,-k,"M")},next:function(){a.datepicker._adjustDate(q,+k,"M")},hide:function(){a.datepicker._hideDatepicker()},
today:function(){a.datepicker._gotoToday(q)},selectDay:function(){a.datepicker._selectDay(q,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){a.datepicker._selectMonthYear(q,this,"M");return!1},selectYear:function(){a.datepicker._selectMonthYear(q,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(f){var k,q,l,n,m=new Date;m=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth(),m.getDate()));var p=this._get(f,
"isRTL");var r=this._get(f,"showButtonPanel");var v=this._get(f,"hideIfNoPrevNext");var y=this._get(f,"navigationAsDateFormat");var B=this._getNumberOfMonths(f),t=this._get(f,"showCurrentAtPos");var u=this._get(f,"stepMonths");var x=1!==B[0]||1!==B[1],w=this._daylightSavingAdjust(f.currentDay?new Date(f.currentYear,f.currentMonth,f.currentDay):new Date(9999,9,9)),C=this._getMinMaxDate(f,"min"),A=this._getMinMaxDate(f,"max");t=f.drawMonth-t;var z=f.drawYear;0>t&&(t+=12,z--);if(A){var D=this._daylightSavingAdjust(new Date(A.getFullYear(),
A.getMonth()-B[0]*B[1]+1,A.getDate()));for(D=C&&D<C?C:D;this._daylightSavingAdjust(new Date(z,t,1))>D;)t--,0>t&&(t=11,z--)}f.drawMonth=t;f.drawYear=z;D=this._get(f,"prevText");D=y?this.formatDate(D,this._daylightSavingAdjust(new Date(z,t-u,1)),this._getFormatConfig(f)):D;D=this._canAdjustMonth(f,-1,z,t)?a("<a>").attr({"class":"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:D}).append(a("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(p?"e":"w")).text(D))[0].outerHTML:
v?"":a("<a>").attr({"class":"ui-datepicker-prev ui-corner-all ui-state-disabled",title:D}).append(a("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(p?"e":"w")).text(D))[0].outerHTML;var F=this._get(f,"nextText");F=y?this.formatDate(F,this._daylightSavingAdjust(new Date(z,t+u,1)),this._getFormatConfig(f)):F;v=this._canAdjustMonth(f,1,z,t)?a("<a>").attr({"class":"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:F}).append(a("<span>").addClass("ui-icon ui-icon-circle-triangle-"+
(p?"w":"e")).text(F))[0].outerHTML:v?"":a("<a>").attr({"class":"ui-datepicker-next ui-corner-all ui-state-disabled",title:F}).append(a("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(p?"w":"e")).text(F))[0].outerHTML;u=this._get(f,"currentText");F=this._get(f,"gotoCurrent")&&f.currentDay?w:m;u=y?this.formatDate(u,F,this._getFormatConfig(f)):u;var E="";f.inline||(E=a("<button>").attr({type:"button","class":"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide",
"data-event":"click"}).text(this._get(f,"closeText"))[0].outerHTML);y="";r&&(y=a("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(p?E:"").append(this._isInRange(f,F)?a("<button>").attr({type:"button","class":"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(u):"").append(p?"":E)[0].outerHTML);r=parseInt(this._get(f,"firstDay"),10);r=isNaN(r)?0:r;u=this._get(f,"showWeek");F=this._get(f,"dayNames");E=this._get(f,
"dayNamesMin");var G=this._get(f,"monthNames");var I=this._get(f,"monthNamesShort");var H=this._get(f,"beforeShowDay");var J=this._get(f,"showOtherMonths");var M=this._get(f,"selectOtherMonths");var R=this._getDefaultDate(f);var S="";for(k=0;k<B[0];k++){var L="";this.maxRows=4;for(q=0;q<B[1];q++){var O=this._daylightSavingAdjust(new Date(z,t,f.selectedDay));var P=" ui-corner-all";var Q="";if(x){Q+="<div class='ui-datepicker-group";if(1<B[1])switch(q){case 0:Q+=" ui-datepicker-group-first";P=" ui-corner-"+
(p?"right":"left");break;case B[1]-1:Q+=" ui-datepicker-group-last";P=" ui-corner-"+(p?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}Q+="'>"}Q+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+P+"'>"+(/all|left/.test(P)&&0===k?p?v:D:"")+(/all|right/.test(P)&&0===k?p?D:v:"")+this._generateMonthYearHeader(f,t,z,C,A,0<k||0<q,G,I)+"</div><table class='ui-datepicker-calendar'><thead><tr>";var U=u?"<th class='ui-datepicker-week-col'>"+this._get(f,"weekHeader")+
"</th>":"";for(P=0;7>P;P++){var N=(P+r)%7;U+="<th scope='col'"+(5<=(P+r+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+F[N]+"'>"+E[N]+"</span></th>"}Q+=U+"</tr></thead><tbody>";U=this._getDaysInMonth(z,t);z===f.selectedYear&&t===f.selectedMonth&&(f.selectedDay=Math.min(f.selectedDay,U));P=(this._getFirstDayOfMonth(z,t)-r+7)%7;U=Math.ceil((P+U)/7);this.maxRows=U=x?this.maxRows>U?this.maxRows:U:U;N=this._daylightSavingAdjust(new Date(z,t,1-P));for(l=0;l<U;l++){Q+="<tr>";var ca=u?"<td class='ui-datepicker-week-col'>"+
this._get(f,"calculateWeek")(N)+"</td>":"";for(P=0;7>P;P++){var da=H?H.apply(f.input?f.input[0]:null,[N]):[!0,""];var ha=(n=N.getMonth()!==t)&&!M||!da[0]||C&&N<C||A&&N>A;ca+="<td class='"+(5<=(P+r+6)%7?" ui-datepicker-week-end":"")+(n?" ui-datepicker-other-month":"")+(N.getTime()===O.getTime()&&t===f.selectedMonth&&f._keyEvent||R.getTime()===N.getTime()&&R.getTime()===O.getTime()?" "+this._dayOverClass:"")+(ha?" "+this._unselectableClass+" ui-state-disabled":"")+(n&&!J?"":" "+da[1]+(N.getTime()===
w.getTime()?" "+this._currentClass:"")+(N.getTime()===m.getTime()?" ui-datepicker-today":""))+"'"+(n&&!J||!da[2]?"":" title='"+da[2].replace(/'/g,"&#39;")+"'")+(ha?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(n&&!J?"&#xa0;":ha?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===m.getTime()?" ui-state-highlight":"")+(N.getTime()===w.getTime()?" ui-state-active":"")+(n?" ui-priority-secondary":
"")+"' href='#' aria-current='"+(N.getTime()===w.getTime()?"true":"false")+"' data-date='"+N.getDate()+"'>"+N.getDate()+"</a>")+"</td>";N.setDate(N.getDate()+1);N=this._daylightSavingAdjust(N)}Q+=ca+"</tr>"}t++;11<t&&(t=0,z++);Q+="</tbody></table>"+(x?"</div>"+(0<B[0]&&q===B[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");L+=Q}S+=L}f._keyEvent=!1;return S+y},_generateMonthYearHeader:function(f,k,q,l,n,m,p,r){var v=this._get(f,"changeMonth"),y=this._get(f,"changeYear"),B=this._get(f,"showMonthAfterYear");
var t=this._get(f,"selectMonthLabel");var u=this._get(f,"selectYearLabel"),x="<div class='ui-datepicker-title'>",w="";if(m||!v)w+="<span class='ui-datepicker-month'>"+p[k]+"</span>";else{p=l&&l.getFullYear()===q;var C=n&&n.getFullYear()===q;w+="<select class='ui-datepicker-month' aria-label='"+t+"' data-handler='selectMonth' data-event='change'>";for(t=0;12>t;t++)(!p||t>=l.getMonth())&&(!C||t<=n.getMonth())&&(w+="<option value='"+t+"'"+(t===k?" selected='selected'":"")+">"+r[t]+"</option>");w+="</select>"}B||
(x+=w+(!m&&v&&y?"":"&#xa0;"));if(!f.yearshtml)if(f.yearshtml="",m||!y)x+="<span class='ui-datepicker-year'>"+q+"</span>";else{r=this._get(f,"yearRange").split(":");var A=(new Date).getFullYear();p=function(z){z=z.match(/c[+\-].*/)?q+parseInt(z.substring(1),10):z.match(/[+\-].*/)?A+parseInt(z,10):parseInt(z,10);return isNaN(z)?A:z};k=p(r[0]);r=Math.max(k,p(r[1]||""));k=l?Math.max(k,l.getFullYear()):k;r=n?Math.min(r,n.getFullYear()):r;for(f.yearshtml+="<select class='ui-datepicker-year' aria-label='"+
u+"' data-handler='selectYear' data-event='change'>";k<=r;k++)f.yearshtml+="<option value='"+k+"'"+(k===q?" selected='selected'":"")+">"+k+"</option>";f.yearshtml+="</select>";x+=f.yearshtml;f.yearshtml=null}x+=this._get(f,"yearSuffix");B&&(x+=(!m&&v&&y?"":"&#xa0;")+w);return x+"</div>"},_adjustInstDate:function(f,k,q){var l=f.selectedYear+("Y"===q?k:0),n=f.selectedMonth+("M"===q?k:0);k=Math.min(f.selectedDay,this._getDaysInMonth(l,n))+("D"===q?k:0);l=this._restrictMinMax(f,this._daylightSavingAdjust(new Date(l,
n,k)));f.selectedDay=l.getDate();f.drawMonth=f.selectedMonth=l.getMonth();f.drawYear=f.selectedYear=l.getFullYear();"M"!==q&&"Y"!==q||this._notifyChange(f)},_restrictMinMax:function(f,k){var q=this._getMinMaxDate(f,"min");f=this._getMinMaxDate(f,"max");k=q&&k<q?q:k;return f&&k>f?f:k},_notifyChange:function(f){var k=this._get(f,"onChangeMonthYear");k&&k.apply(f.input?f.input[0]:null,[f.selectedYear,f.selectedMonth+1,f])},_getNumberOfMonths:function(f){f=this._get(f,"numberOfMonths");return null==f?
[1,1]:"number"===typeof f?[1,f]:f},_getMinMaxDate:function(f,k){return this._determineDate(f,this._get(f,k+"Date"),null)},_getDaysInMonth:function(f,k){return 32-this._daylightSavingAdjust(new Date(f,k,32)).getDate()},_getFirstDayOfMonth:function(f,k){return(new Date(f,k,1)).getDay()},_canAdjustMonth:function(f,k,q,l){var n=this._getNumberOfMonths(f);q=this._daylightSavingAdjust(new Date(q,l+(0>k?k:n[0]*n[1]),1));0>k&&q.setDate(this._getDaysInMonth(q.getFullYear(),q.getMonth()));return this._isInRange(f,
q)},_isInRange:function(f,k){var q=this._getMinMaxDate(f,"min"),l=this._getMinMaxDate(f,"max"),n=null,m=null;if(f=this._get(f,"yearRange")){f=f.split(":");var p=(new Date).getFullYear();n=parseInt(f[0],10);m=parseInt(f[1],10);f[0].match(/[+\-].*/)&&(n+=p);f[1].match(/[+\-].*/)&&(m+=p)}return(!q||k.getTime()>=q.getTime())&&(!l||k.getTime()<=l.getTime())&&(!n||k.getFullYear()>=n)&&(!m||k.getFullYear()<=m)},_getFormatConfig:function(f){var k=this._get(f,"shortYearCutoff");k="string"!==typeof k?k:(new Date).getFullYear()%
100+parseInt(k,10);return{shortYearCutoff:k,dayNamesShort:this._get(f,"dayNamesShort"),dayNames:this._get(f,"dayNames"),monthNamesShort:this._get(f,"monthNamesShort"),monthNames:this._get(f,"monthNames")}},_formatDate:function(f,k,q,l){k||(f.currentDay=f.selectedDay,f.currentMonth=f.selectedMonth,f.currentYear=f.selectedYear);k=k?"object"===typeof k?k:this._daylightSavingAdjust(new Date(l,q,k)):this._daylightSavingAdjust(new Date(f.currentYear,f.currentMonth,f.currentDay));return this.formatDate(this._get(f,
"dateFormat"),k,this._getFormatConfig(f))}});a.fn.datepicker=function(f){if(!this.length)return this;a.datepicker.initialized||(a(document).on("mousedown",a.datepicker._checkExternalClick),a.datepicker.initialized=!0);0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var k=Array.prototype.slice.call(arguments,1);return"string"===typeof f&&("isDisabled"===f||"getDate"===f||"widget"===f)||"option"===f&&2===arguments.length&&"string"===typeof arguments[1]?a.datepicker["_"+
f+"Datepicker"].apply(a.datepicker,[this[0]].concat(k)):this.each(function(){"string"===typeof f?a.datepicker["_"+f+"Datepicker"].apply(a.datepicker,[this].concat(k)):a.datepicker._attachDatepicker(this,f)})};a.datepicker=new d;a.datepicker.initialized=!1;a.datepicker.uuid=(new Date).getTime();a.datepicker.version="1.13.2";return a.datepicker});
(function(a){"function"===typeof define&&define.amd?define("jquery ../keycode ../position ../safe-active-element ../unique-id ../version ../widget".split(" "),a):a(jQuery)})(function(a){return a.widget("ui.menu",{version:"1.13.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.lastMousePosition=
{x:null,y:null};this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(b){b.preventDefault();this._activateItem(b)},"click .ui-menu-item":function(b){var d=a(b.target),g=a(a.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&d.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),d.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&
g.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(b,d){var g=this.active||this._menuItems().first();d||this.focus(b,g)},blur:function(b){this._delay(function(){a.contains(this.element[0],a.ui.safeActiveElement(this.document[0]))||this.collapseAll(b)})},
keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){this._closeOnDocumentClick(b)&&this.collapseAll(b,!0);this.mouseHandled=!1}})},_activateItem:function(b){if(!this.previousFilter&&(b.clientX!==this.lastMousePosition.x||b.clientY!==this.lastMousePosition.y)){this.lastMousePosition={x:b.clientX,y:b.clientY};var d=a(b.target).closest(".ui-menu-item"),g=a(b.currentTarget);d[0]!==g[0]||g.is(".ui-state-active")||(this._removeClass(g.siblings().children(".ui-state-active"),null,
"ui-state-active"),this.focus(b,g))}},_destroy:function(){var b=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show();b.children().each(function(){var d=a(this);d.data("ui-menu-submenu-caret")&&d.remove()})},_keydown:function(b){var d=
!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:d=!1;var g=this.previousFilter||"";var c=!1;var e=96<=b.keyCode&&105>=b.keyCode?(b.keyCode-96).toString():String.fromCharCode(b.keyCode);clearTimeout(this.filterTimer);e===g?c=!0:e=g+e;g=this._filterMenuItems(e);g=c&&-1!==g.index(this.active.next())?this.active.nextAll(".ui-menu-item"):g;g.length||(e=String.fromCharCode(b.keyCode),g=this._filterMenuItems(e));g.length?(this.focus(b,g),this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},
1E3)):delete this.previousFilter}d&&b.preventDefault()},_activate:function(b){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(b):this.select(b))},refresh:function(){var b=this,d=this.options.icons.submenu;var g=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);var c=g.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var h=
a(this),f=h.prev(),k=a("<span>").data("ui-menu-submenu-caret",!0);b._addClass(k,"ui-menu-icon","ui-icon "+d);f.attr("aria-haspopup","true").prepend(k);h.attr("aria-labelledby",f.attr("id"))});this._addClass(c,"ui-menu","ui-widget ui-widget-content ui-front");c=g.add(this.element).find(this.options.items);c.not(".ui-menu-item").each(function(){var h=a(this);b._isDivider(h)&&b._addClass(h,"ui-menu-divider","ui-widget-content")});g=c.not(".ui-menu-item, .ui-menu-divider");var e=g.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,
role:this._itemRole()});this._addClass(g,"ui-menu-item")._addClass(e,"ui-menu-item-wrapper");c.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(b,d){if("icons"===b){var g=this.element.find(".ui-menu-icon");this._removeClass(g,null,this.options.icons.submenu)._addClass(g,null,d.submenu)}this._super(b,d)},_setOptionDisabled:function(b){this._super(b);
this.element.attr("aria-disabled",String(b));this._toggleClass(null,"ui-state-disabled",!!b)},focus:function(b,d){this.blur(b,b&&"focus"===b.type);this._scrollIntoView(d);this.active=d.first();var g=this.active.children(".ui-menu-item-wrapper");this._addClass(g,null,"ui-state-active");this.options.role&&this.element.attr("aria-activedescendant",g.attr("id"));g=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(g,null,"ui-state-active");b&&"keydown"===b.type?
this._close():this.timer=this._delay(function(){this._close()},this.delay);g=d.children(".ui-menu");g.length&&b&&/^mouse/.test(b.type)&&this._startOpening(g);this.activeMenu=d.parent();this._trigger("focus",b,{item:d})},_scrollIntoView:function(b){if(this._hasScroll()){var d=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0;var g=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0;d=b.offset().top-this.activeMenu.offset().top-d-g;g=this.activeMenu.scrollTop();var c=this.activeMenu.height();
b=b.outerHeight();0>d?this.activeMenu.scrollTop(g+d):d+b>c&&this.activeMenu.scrollTop(g+d-c+b)}},blur:function(b,d){d||clearTimeout(this.timer);this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",b,{item:this.active}),this.active=null)},_startOpening:function(b){clearTimeout(this.timer);"true"===b.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(b)},this.delay))},_open:function(b){var d=a.extend({of:this.active},
this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(d)},collapseAll:function(b,d){clearTimeout(this.timer);this.timer=this._delay(function(){var g=d?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));g.length||(g=this.element);this._close(g);this.blur(b);this._removeClass(g.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=
g},d?0:this.delay)},_close:function(b){b||=this.active?this.active.parent():this.element;b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(b){return!/[^\-\u2014\u2013\s]/.test(b.text())},collapse:function(b){var d=this.active&&this.active.parent().closest(".ui-menu-item",this.element);d&&d.length&&(this._close(),this.focus(b,d))},expand:function(b){var d=this.active&&
this._menuItems(this.active.children(".ui-menu")).first();d&&d.length&&(this._open(d.parent()),this._delay(function(){this.focus(b,d)}))},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(b){return(b||this.element).find(this.options.items).filter(".ui-menu-item")},
_move:function(b,d,g){var c;this.active&&(c="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".ui-menu-item").last():this.active[b+"All"](".ui-menu-item").first());c&&c.length&&this.active||(c=this._menuItems(this.activeMenu)[d]());this.focus(g,c)},nextPage:function(b){var d;if(!this.active)this.next(b);else if(!this.isLastItem())if(this._hasScroll()){var g=this.active.offset().top;var c=this.element.innerHeight();0===a.fn.jquery.indexOf("3.2.")&&(c+=this.element[0].offsetHeight-
this.element.outerHeight());this.active.nextAll(".ui-menu-item").each(function(){d=a(this);return 0>d.offset().top-g-c});this.focus(b,d)}else this.focus(b,this._menuItems(this.activeMenu)[this.active?"last":"first"]())},previousPage:function(b){var d;if(!this.active)this.next(b);else if(!this.isFirstItem())if(this._hasScroll()){var g=this.active.offset().top;var c=this.element.innerHeight();0===a.fn.jquery.indexOf("3.2.")&&(c+=this.element[0].offsetHeight-this.element.outerHeight());this.active.prevAll(".ui-menu-item").each(function(){d=
a(this);return 0<d.offset().top-g+c});this.focus(b,d)}else this.focus(b,this._menuItems(this.activeMenu).first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var d={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,d)},_filterMenuItems:function(b){b=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var d=new RegExp("^"+b,
"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return d.test(String.prototype.trim.call(a(this).children(".ui-menu-item-wrapper").text()))})}})});
(function(a){"function"===typeof define&&define.amd?define("jquery ./mouse ../data ../plugin ../safe-active-element ../safe-blur ../scroll-parent ../version ../widget".split(" "),a):a(jQuery)})(function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.13.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,
scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this._addClass("ui-draggable");this._setHandleClassName();this._mouseInit()},_setOption:function(b,d){this._super(b,d);"handle"===b&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?
this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(b){var d=this.options;if(this.helper||d.disabled||0<a(b.target).closest(".ui-resizable-handle").length)return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;this._blurActiveElement(b);this._blockFrames(!0===d.iframeFix?"iframe":d.iframeFix);return!0},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var d=a(this);return a("<div>").css("position","absolute").appendTo(d.parent()).outerWidth(d.outerWidth()).outerHeight(d.outerHeight()).offset(d.offset())[0]})},
_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var d=a.ui.safeActiveElement(this.document[0]);a(b.target).closest(d).length||a.ui.safeBlur(d)},_mouseStart:function(b){var d=this.options;this.helper=this._createHelper(b);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=
this.helper.scrollParent(!0);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length;this.positionAbs=this.element.offset();this._refreshOffsets(b);this.originalPosition=this.position=this._generatePosition(b,!1);this.originalPageX=b.pageX;this.originalPageY=b.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;
this._cacheHelperProportions();a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_refreshOffsets:function(b){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:b.pageX-this.offset.left,top:b.pageY-this.offset.top}},_mouseDrag:function(b,d){this.hasFixedAncestor&&
(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(b,!0);this.positionAbs=this._convertPositionTo("absolute");if(!d){d=this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp(new a.Event("mouseup",b)),!1;this.position=d.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var d=this,g=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&
(g=a.ui.ddmanager.drop(this,b));this.dropped&&(g=this.dropped,this.dropped=!1);"invalid"===this.options.revert&&!g||"valid"===this.options.revert&&g||!0===this.options.revert||"function"===typeof this.options.revert&&this.options.revert.call(this.element,g)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==d._trigger("stop",b)&&d._clear()}):!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){this._unblockFrames();a.ui.ddmanager&&
a.ui.ddmanager.dragStop(this,b);this.handleElement.is(b.target)&&this.element.trigger("focus");return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp(new a.Event("mouseup",{target:this.element[0]})):this._clear();return this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):
this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var d=this.options,g="function"===typeof d.helper;b=g?a(d.helper.apply(this.element[0],[b])):"clone"===d.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"===d.appendTo?this.element[0].parentNode:d.appendTo);g&&b[0]===this.element[0]&&this._setPositionRelative();
b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"===typeof b&&(b=b.split(" "));Array.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);
"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(b){return/(html|body)/i.test(b.tagName)||b===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),d=this.document[0];"absolute"===this.cssPosition&&this.scrollParent[0]!==d&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());
this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0});return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var b=this.element.position(),d=this._isRootNode(this.scrollParent[0]);return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+(d?0:this.scrollParent.scrollTop()),left:b.left-(parseInt(this.helper.css("left"),
10)||0)+(d?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b;var d=this.options;var g=this.document[0];this.relativeContainer=
null;if(d.containment)if("window"===d.containment)this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||g.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if("document"===d.containment)this.containment=[0,0,a(g).width()-this.helperProportions.width-
this.margins.left,(a(g).height()||g.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(d.containment.constructor===Array)this.containment=d.containment;else{if("parent"===d.containment&&(d.containment=this.helper[0].parentNode),g=a(d.containment),b=g[0])d=/(scroll|auto)/.test(g.css("overflow")),this.containment=[(parseInt(g.css("borderLeftWidth"),10)||0)+(parseInt(g.css("paddingLeft"),10)||0),(parseInt(g.css("borderTopWidth"),10)||0)+(parseInt(g.css("paddingTop"),
10)||0),(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(g.css("borderRightWidth"),10)||0)-(parseInt(g.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(g.css("borderBottomWidth"),10)||0)-(parseInt(g.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=g}else this.containment=null},_convertPositionTo:function(b,
d){d||(d=this.position);b="absolute"===b?1:-1;var g=this._isRootNode(this.scrollParent[0]);return{top:d.top+this.offset.relative.top*b+this.offset.parent.top*b-("fixed"===this.cssPosition?-this.offset.scroll.top:g?0:this.offset.scroll.top)*b,left:d.left+this.offset.relative.left*b+this.offset.parent.left*b-("fixed"===this.cssPosition?-this.offset.scroll.left:g?0:this.offset.scroll.left)*b}},_generatePosition:function(b,d){var g=this.options,c=this._isRootNode(this.scrollParent[0]);var e=b.pageX;var h=
b.pageY;c&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()});if(d){if(this.containment){if(this.relativeContainer){var f=this.relativeContainer.offset();f=[this.containment[0]+f.left,this.containment[1]+f.top,this.containment[2]+f.left,this.containment[3]+f.top]}else f=this.containment;b.pageX-this.offset.click.left<f[0]&&(e=f[0]+this.offset.click.left);b.pageY-this.offset.click.top<f[1]&&(h=f[1]+this.offset.click.top);b.pageX-this.offset.click.left>
f[2]&&(e=f[2]+this.offset.click.left);b.pageY-this.offset.click.top>f[3]&&(h=f[3]+this.offset.click.top)}g.grid&&(h=g.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,h=f?h-this.offset.click.top>=f[1]||h-this.offset.click.top>f[3]?h:h-this.offset.click.top>=f[1]?h-g.grid[1]:h+g.grid[1]:h,e=g.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,e=f?e-this.offset.click.left>=f[0]||e-this.offset.click.left>
f[2]?e:e-this.offset.click.left>=f[0]?e-g.grid[0]:e+g.grid[0]:e);"y"===g.axis&&(e=this.originalPageX);"x"===g.axis&&(h=this.originalPageY)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:c?0:this.offset.scroll.top),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:c?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,
"ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(b,d,g){g=g||this._uiHash();a.ui.plugin.call(this,b,[d,g,this],!0);/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),g.offset=this.positionAbs);return a.Widget.prototype._trigger.call(this,b,d,g)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,
originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,d,g){var c=a.extend({},d,{item:g.element});g.sortables=[];a(g.options.connectToSortable).each(function(){var e=a(this).sortable("instance");e&&!e.options.disabled&&(g.sortables.push(e),e.refreshPositions(),e._trigger("activate",b,c))})},stop:function(b,d,g){var c=a.extend({},d,{item:g.element});g.cancelHelperRemoval=!1;a.each(g.sortables,function(){this.isOver?(this.isOver=
0,g.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(b),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",b,c))})},drag:function(b,d,g){a.each(g.sortables,function(){var c=!1,e=this;e.positionAbs=g.positionAbs;e.helperProportions=g.helperProportions;e.offset.click=g.offset.click;e._intersectsWith(e.containerCache)&&
(c=!0,a.each(g.sortables,function(){this.positionAbs=g.positionAbs;this.helperProportions=g.helperProportions;this.offset.click=g.offset.click;this!==e&&this._intersectsWith(this.containerCache)&&a.contains(e.element[0],this.element[0])&&(c=!1);return c}));c?(e.isOver||(e.isOver=1,g._parent=d.helper.parent(),e.currentItem=d.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return d.helper[0]},b.target=e.currentItem[0],e._mouseCapture(b,
!0),e._mouseStart(b,!0,!0),e.offset.click.top=g.offset.click.top,e.offset.click.left=g.offset.click.left,e.offset.parent.left-=g.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=g.offset.parent.top-e.offset.parent.top,g._trigger("toSortable",b),g.dropped=e.element,a.each(g.sortables,function(){this.refreshPositions()}),g.currentItem=g.element,e.fromOutside=g),e.currentItem&&(e._mouseDrag(b),d.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,
e.options.revert=!1,e._trigger("out",b,e._uiHash(e)),e._mouseStop(b,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),d.helper.appendTo(g._parent),g._refreshOffsets(b),d.position=g._generatePosition(b,!0),g._trigger("fromSortable",b),g.dropped=!1,a.each(g.sortables,function(){this.refreshPositions()}))})}});a.ui.plugin.add("draggable","cursor",{start:function(b,d,g){b=a("body");g=g.options;b.css("cursor")&&(g._cursor=b.css("cursor"));b.css("cursor",
g.cursor)},stop:function(b,d,g){b=g.options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,d,g){b=a(d.helper);g=g.options;b.css("opacity")&&(g._opacity=b.css("opacity"));b.css("opacity",g.opacity)},stop:function(b,d,g){b=g.options;b._opacity&&a(d.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(b,d,g){g.scrollParentNotHidden||(g.scrollParentNotHidden=g.helper.scrollParent(!1));g.scrollParentNotHidden[0]!==
g.document[0]&&"HTML"!==g.scrollParentNotHidden[0].tagName&&(g.overflowOffset=g.scrollParentNotHidden.offset())},drag:function(b,d,g){d=g.options;var c=!1,e=g.scrollParentNotHidden[0],h=g.document[0];e!==h&&"HTML"!==e.tagName?(d.axis&&"x"===d.axis||(g.overflowOffset.top+e.offsetHeight-b.pageY<d.scrollSensitivity?e.scrollTop=c=e.scrollTop+d.scrollSpeed:b.pageY-g.overflowOffset.top<d.scrollSensitivity&&(e.scrollTop=c=e.scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(g.overflowOffset.left+e.offsetWidth-
b.pageX<d.scrollSensitivity?e.scrollLeft=c=e.scrollLeft+d.scrollSpeed:b.pageX-g.overflowOffset.left<d.scrollSensitivity&&(e.scrollLeft=c=e.scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(h).scrollTop()<d.scrollSensitivity?c=a(h).scrollTop(a(h).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<d.scrollSensitivity&&(c=a(h).scrollTop(a(h).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(h).scrollLeft()<d.scrollSensitivity?c=a(h).scrollLeft(a(h).scrollLeft()-
d.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<d.scrollSensitivity&&(c=a(h).scrollLeft(a(h).scrollLeft()+d.scrollSpeed))));!1!==c&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(g,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,d,g){b=g.options;g.snapElements=[];a(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var c=a(this),e=c.offset();this!==g.element[0]&&g.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),
top:e.top,left:e.left})})},drag:function(b,d,g){var c,e=g.options,h=e.snapTolerance,f=d.offset.left,k=f+g.helperProportions.width,q=d.offset.top,l=q+g.helperProportions.height;for(c=g.snapElements.length-1;0<=c;c--){var n=g.snapElements[c].left-g.margins.left;var m=n+g.snapElements[c].width;var p=g.snapElements[c].top-g.margins.top;var r=p+g.snapElements[c].height;if(k<n-h||f>m+h||l<p-h||q>r+h||!a.contains(g.snapElements[c].item.ownerDocument,g.snapElements[c].item))g.snapElements[c].snapping&&g.options.snap.release&&
g.options.snap.release.call(g.element,b,a.extend(g._uiHash(),{snapItem:g.snapElements[c].item})),g.snapElements[c].snapping=!1;else{if("inner"!==e.snapMode){var v=Math.abs(p-l)<=h;var y=Math.abs(r-q)<=h;var B=Math.abs(n-k)<=h;var t=Math.abs(m-f)<=h;v&&(d.position.top=g._convertPositionTo("relative",{top:p-g.helperProportions.height,left:0}).top);y&&(d.position.top=g._convertPositionTo("relative",{top:r,left:0}).top);B&&(d.position.left=g._convertPositionTo("relative",{top:0,left:n-g.helperProportions.width}).left);
t&&(d.position.left=g._convertPositionTo("relative",{top:0,left:m}).left)}var u=v||y||B||t;"outer"!==e.snapMode&&(v=Math.abs(p-q)<=h,y=Math.abs(r-l)<=h,B=Math.abs(n-f)<=h,t=Math.abs(m-k)<=h,v&&(d.position.top=g._convertPositionTo("relative",{top:p,left:0}).top),y&&(d.position.top=g._convertPositionTo("relative",{top:r-g.helperProportions.height,left:0}).top),B&&(d.position.left=g._convertPositionTo("relative",{top:0,left:n}).left),t&&(d.position.left=g._convertPositionTo("relative",{top:0,left:m-
g.helperProportions.width}).left));!g.snapElements[c].snapping&&(v||y||B||t||u)&&g.options.snap.snap&&g.options.snap.snap.call(g.element,b,a.extend(g._uiHash(),{snapItem:g.snapElements[c].item}));g.snapElements[c].snapping=v||y||B||t||u}}}});a.ui.plugin.add("draggable","stack",{start:function(b,d,g){b=a.makeArray(a(g.options.stack)).sort(function(e,h){return(parseInt(a(e).css("zIndex"),10)||0)-(parseInt(a(h).css("zIndex"),10)||0)});if(b.length){var c=parseInt(a(b[0]).css("zIndex"),10)||0;a(b).each(function(e){a(this).css("zIndex",
c+e)});this.css("zIndex",c+b.length)}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,d,g){b=a(d.helper);g=g.options;b.css("zIndex")&&(g._zIndex=b.css("zIndex"));b.css("zIndex",g.zIndex)},stop:function(b,d,g){b=g.options;b._zIndex&&a(d.helper).css("zIndex",b._zIndex)}});return a.ui.draggable});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./draggable","./mouse","../version","../widget"],a):a(jQuery)})(function(a){a.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,d=this.options,g=d.accept;this.isover=!1;this.isout=!0;this.accept="function"===typeof g?g:function(c){return c.is(g)};this.proportions=
function(){if(arguments.length)b=arguments[0];else return b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(d.scope);d.addClasses&&this._addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[];a.ui.ddmanager.droppables[b].push(this)},_splice:function(b){for(var d=0;d<b.length;d++)b[d]===this&&b.splice(d,1)},_destroy:function(){this._splice(a.ui.ddmanager.droppables[this.options.scope])},_setOption:function(b,
d){"accept"===b?this.accept="function"===typeof d?d:function(g){return g.is(d)}:"scope"===b&&(this._splice(a.ui.ddmanager.droppables[this.options.scope]),this._addToManager(d));this._super(b,d)},_activate:function(b){var d=a.ui.ddmanager.current;this._addActiveClass();d&&this._trigger("activate",b,this.ui(d))},_deactivate:function(b){var d=a.ui.ddmanager.current;this._removeActiveClass();d&&this._trigger("deactivate",b,this.ui(d))},_over:function(b){var d=a.ui.ddmanager.current;d&&(d.currentItem||
d.element)[0]!==this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this._addHoverClass(),this._trigger("over",b,this.ui(d)))},_out:function(b){var d=a.ui.ddmanager.current;d&&(d.currentItem||d.element)[0]!==this.element[0]&&this.accept.call(this.element[0],d.currentItem||d.element)&&(this._removeHoverClass(),this._trigger("out",b,this.ui(d)))},_drop:function(b,d){var g=d||a.ui.ddmanager.current,c=!1;if(!g||(g.currentItem||g.element)[0]===this.element[0])return!1;this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=
a(this).droppable("instance");if(e.options.greedy&&!e.options.disabled&&e.options.scope===g.options.scope&&e.accept.call(e.element[0],g.currentItem||g.element)&&a.ui.intersect(g,a.extend(e,{offset:e.element.offset()}),e.options.tolerance,b))return c=!0,!1});return c?!1:this.accept.call(this.element[0],g.currentItem||g.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",b,this.ui(g)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,
position:b.position,offset:b.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});a.ui.intersect=function(){return function(b,d,g,c){if(!d.offset)return!1;var e=(b.positionAbs||b.position.absolute).left+b.margins.left,h=(b.positionAbs||b.position.absolute).top+b.margins.top,
f=e+b.helperProportions.width,k=h+b.helperProportions.height,q=d.offset.left,l=d.offset.top,n=q+d.proportions().width,m=l+d.proportions().height;switch(g){case "fit":return q<=e&&f<=n&&l<=h&&k<=m;case "intersect":return q<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<n&&l<h+b.helperProportions.height/2&&k-b.helperProportions.height/2<m;case "pointer":b=c.pageY;g=d.proportions().height;if(l=b>=l&&b<l+g)c=c.pageX,d=d.proportions().width,l=c>=q&&c<q+d;return l;case "touch":return(h>=l&&
h<=m||k>=l&&k<=m||h<l&&k>m)&&(e>=q&&e<=n||f>=q&&f<=n||e<q&&f>n);default:return!1}}}();a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,d){var g,c=a.ui.ddmanager.droppables[b.options.scope]||[],e=d?d.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();var f=0;a:for(;f<c.length;f++)if(!(c[f].options.disabled||b&&!c[f].accept.call(c[f].element[0],b.currentItem||b.element))){for(g=0;g<h.length;g++)if(h[g]===c[f].element[0]){c[f].proportions().height=
0;continue a}c[f].visible="none"!==c[f].element.css("display");c[f].visible&&("mousedown"===e&&c[f]._activate.call(c[f],d),c[f].offset=c[f].element.offset(),c[f].proportions({width:c[f].element[0].offsetWidth,height:c[f].element[0].offsetHeight}))}},drop:function(b,d){var g=!1;a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance,d)&&(g=this._drop.call(this,d)||g),!this.options.disabled&&
this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,d)))});return g},dragStart:function(b,d){b.element.parentsUntil("body").on("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,d)})},drag:function(b,d){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,d);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var g=
a.ui.intersect(b,this,this.options.tolerance,d);var c=!g&&this.isover?"isout":g&&!this.isover?"isover":null;if(c){if(this.options.greedy){var e=this.options.scope;g=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===e});if(g.length){var h=a(g[0]).droppable("instance");h.greedyChild="isover"===c}}h&&"isover"===c&&(h.isover=!1,h.isout=!0,h._out.call(h,d));this[c]=!0;this["isout"===c?"isover":"isout"]=!1;this["isover"===c?"_over":"_out"].call(this,
d);h&&"isout"===c&&(h.isout=!1,h.isover=!0,h._over.call(h,d))}}})},dragStop:function(b,d){b.element.parentsUntil("body").off("scroll.droppable");b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,d)}};!1!==a.uiBackCompat&&a.widget("ui.droppable",a.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super();this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super();this.options.activeClass&&this.element.removeClass(this.options.activeClass)},
_addHoverClass:function(){this._super();this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super();this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});return a.ui.droppable});
(function(a){"function"===typeof define&&define.amd?define("jquery ./mouse ../disable-selection ../plugin ../version ../widget".split(" "),a):a(jQuery)})(function(a){a.widget("ui.resizable",a.ui.mouse,{version:"1.13.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,
minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(b){return parseFloat(b)||0},_isNumber:function(b){return!isNaN(parseFloat(b))},_hasScroll:function(b,d){if("hidden"===a(b).css("overflow"))return!1;d=d&&"left"===d?"scrollLeft":"scrollTop";var g=!1;if(0<b[d])return!0;try{b[d]=1,g=0<b[d],b[d]=0}catch(c){}return g},_create:function(){var b=this.options,d=this;this._addClass("ui-resizable");a.extend(this,{_aspectRatio:!!b.aspectRatio,aspectRatio:b.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:b.helper||b.ghost||b.animate?b.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(a("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));
this.elementIsWrapper=!0;var g={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(g);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));
this.originalElement.css(g);this._proportionallyResize()}this._setupHandles();if(b.autoHide)a(this.element).on("mouseenter",function(){b.disabled||(d._removeClass("ui-resizable-autohide"),d._handles.show())}).on("mouseleave",function(){b.disabled||d.resizing||(d._addClass("ui-resizable-autohide"),d._handles.hide())});this._mouseInit()},_destroy:function(){this._mouseDestroy();this._addedHandles.remove();var b=function(g){a(g).removeData("resizable").removeData("ui-resizable").off(".resizable")};if(this.elementIsWrapper){b(this.element);
var d=this.element;this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d);d.remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_setOption:function(b,d){this._super(b,d);switch(b){case "handles":this._removeHandles();this._setupHandles();break;case "aspectRatio":this._aspectRatio=!!d}},_setupHandles:function(){var b=this.options,d,g=this;this.handles=
b.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");this._handles=a();this._addedHandles=a();if(this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var c=this.handles.split(",");this.handles={};for(d=0;d<c.length;d++){var e=String.prototype.trim.call(c[d]);var h="ui-resizable-"+
e;var f=a("<div>");this._addClass(f,"ui-resizable-handle "+h);f.css({zIndex:b.zIndex});this.handles[e]=".ui-resizable-"+e;this.element.children(this.handles[e]).length||(this.element.append(f),this._addedHandles=this._addedHandles.add(f))}}this._renderAxis=function(k){var q;k=k||this.element;for(q in this.handles){if(this.handles[q].constructor===String)this.handles[q]=this.element.children(this.handles[q]).first().show();else if(this.handles[q].jquery||this.handles[q].nodeType)this.handles[q]=a(this.handles[q]),
this._on(this.handles[q],{mousedown:g._mouseDown});if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){var l=a(this.handles[q],this.element);var n=/sw|ne|nw|se|n|s/.test(q)?l.outerHeight():l.outerWidth();l=["padding",/ne|nw|n/.test(q)?"Top":/se|sw|s/.test(q)?"Bottom":/^e$/.test(q)?"Right":"Left"].join("");k.css(l,n);this._proportionallyResize()}this._handles=this._handles.add(this.handles[q])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));
this._handles.disableSelection();this._handles.on("mouseover",function(){g.resizing||(this.className&&(f=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=f&&f[1]?f[1]:"se")});b.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(b){var d,g=!1;for(d in this.handles){var c=a(this.handles[d])[0];if(c===b.target||a.contains(c,b.target))g=!0}return!this.options.disabled&&g},_mouseStart:function(b){var d=
this.options,g=this.element;this.resizing=!0;this._renderProxy();var c=this._num(this.helper.css("left"));var e=this._num(this.helper.css("top"));d.containment&&(c+=a(d.containment).scrollLeft()||0,e+=a(d.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:c,top:e};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()};this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),
height:g.height()};this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()};this.originalPosition={left:c,top:e};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio="number"===typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;c=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor","auto"===c?this.axis+"-resize":c);this._addClass("ui-resizable-resizing");this._propagate("start",b);return!0},_mouseDrag:function(b){var d=
this.originalMousePosition;var g=b.pageX-d.left||0;d=b.pageY-d.top||0;var c=this._change[this.axis];this._updatePrevProperties();if(!c)return!1;g=c.apply(this,[b,g,d]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)g=this._updateRatio(g,b);g=this._respectSize(g,b);this._updateCache(g);this._propagate("resize",b);g=this._applyChanges();!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();a.isEmptyObject(g)||(this._updatePrevProperties(),
this._trigger("resize",b,this.ui()),this._applyChanges());return!1},_mouseStop:function(b){this.resizing=!1;var d,g=this.options;if(this._helper){var c=this._proportionallyResizeElements;c=(d=c.length&&/textarea/i.test(c[0].nodeName))&&this._hasScroll(c[0],"left")?0:this.sizeDiff.height;d=d?0:this.sizeDiff.width;d={width:this.helper.width()-d,height:this.helper.height()-c};c=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null;var e=parseFloat(this.element.css("top"))+
(this.position.top-this.originalPosition.top)||null;g.animate||this.element.css(a.extend(d,{top:e,left:c}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!g.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,
height:this.size.height}},_applyChanges:function(){var b={};this.position.top!==this.prevPosition.top&&(b.top=this.position.top+"px");this.position.left!==this.prevPosition.left&&(b.left=this.position.left+"px");this.size.width!==this.prevSize.width&&(b.width=this.size.width+"px");this.size.height!==this.prevSize.height&&(b.height=this.size.height+"px");this.helper.css(b);return b},_updateVirtualBoundaries:function(b){var d=this.options;d={minWidth:this._isNumber(d.minWidth)?d.minWidth:0,maxWidth:this._isNumber(d.maxWidth)?
d.maxWidth:Infinity,minHeight:this._isNumber(d.minHeight)?d.minHeight:0,maxHeight:this._isNumber(d.maxHeight)?d.maxHeight:Infinity};if(this._aspectRatio||b){b=d.minHeight*this.aspectRatio;var g=d.minWidth/this.aspectRatio;var c=d.maxHeight*this.aspectRatio;var e=d.maxWidth/this.aspectRatio;b>d.minWidth&&(d.minWidth=b);g>d.minHeight&&(d.minHeight=g);c<d.maxWidth&&(d.maxWidth=c);e<d.maxHeight&&(d.maxHeight=e)}this._vBoundaries=d},_updateCache:function(b){this.offset=this.helper.offset();this._isNumber(b.left)&&
(this.position.left=b.left);this._isNumber(b.top)&&(this.position.top=b.top);this._isNumber(b.height)&&(this.size.height=b.height);this._isNumber(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var d=this.position,g=this.size,c=this.axis;this._isNumber(b.height)?b.width=b.height*this.aspectRatio:this._isNumber(b.width)&&(b.height=b.width/this.aspectRatio);"sw"===c&&(b.left=d.left+(g.width-b.width),b.top=null);"nw"===c&&(b.top=d.top+(g.height-b.height),b.left=d.left+(g.width-b.width));
return b},_respectSize:function(b){var d=this._vBoundaries,g=this.axis,c=this._isNumber(b.width)&&d.maxWidth&&d.maxWidth<b.width,e=this._isNumber(b.height)&&d.maxHeight&&d.maxHeight<b.height,h=this._isNumber(b.width)&&d.minWidth&&d.minWidth>b.width,f=this._isNumber(b.height)&&d.minHeight&&d.minHeight>b.height,k=this.originalPosition.left+this.originalSize.width,q=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(g);g=/nw|ne|n/.test(g);h&&(b.width=d.minWidth);f&&(b.height=d.minHeight);
c&&(b.width=d.maxWidth);e&&(b.height=d.maxHeight);h&&l&&(b.left=k-d.minWidth);c&&l&&(b.left=k-d.maxWidth);f&&g&&(b.top=q-d.minHeight);e&&g&&(b.top=q-d.maxHeight);b.width||b.height||b.left||!b.top?b.width||b.height||b.top||!b.left||(b.left=null):b.top=null;return b},_getPaddingPlusBorderDimensions:function(b){var d=0,g=[],c=[b.css("borderTopWidth"),b.css("borderRightWidth"),b.css("borderBottomWidth"),b.css("borderLeftWidth")];for(b=[b.css("paddingTop"),b.css("paddingRight"),b.css("paddingBottom"),
b.css("paddingLeft")];4>d;d++)g[d]=parseFloat(c[d])||0,g[d]+=parseFloat(b[d])||0;return{height:g[0]+g[2],width:g[1]+g[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b,d=0,g=this.helper||this.element;d<this._proportionallyResizeElements.length;d++)b=this._proportionallyResizeElements[d],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(b)),b.css({height:g.height()-this.outerDimensions.height||0,width:g.width()-this.outerDimensions.width||
0})},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||a("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(b,d){return{width:this.originalSize.width+
d}},w:function(b,d){return{left:this.originalPosition.left+d,width:this.originalSize.width-d}},n:function(b,d,g){return{top:this.originalPosition.top+g,height:this.originalSize.height-g}},s:function(b,d,g){return{height:this.originalSize.height+g}},se:function(b,d,g){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,d,g]))},sw:function(b,d,g){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,d,g]))},ne:function(b,d,g){return a.extend(this._change.n.apply(this,
arguments),this._change.e.apply(this,[b,d,g]))},nw:function(b,d,g){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,d,g]))}},_propagate:function(b,d){a.ui.plugin.call(this,b,[d,this.ui()]);"resize"!==b&&this._trigger(b,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable",
"animate",{stop:function(b){var d=a(this).resizable("instance"),g=d.options,c=d._proportionallyResizeElements,e=c.length&&/textarea/i.test(c[0].nodeName),h=e&&d._hasScroll(c[0],"left")?0:d.sizeDiff.height;e={width:d.size.width-(e?0:d.sizeDiff.width),height:d.size.height-h};h=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null;var f=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(e,f&&h?{top:f,left:h}:{}),{duration:g.animateDuration,
easing:g.animateEasing,step:function(){var k={width:parseFloat(d.element.css("width")),height:parseFloat(d.element.css("height")),top:parseFloat(d.element.css("top")),left:parseFloat(d.element.css("left"))};c&&c.length&&a(c[0]).css({width:k.width,height:k.height});d._updateCache(k);d._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var b=a(this).resizable("instance"),d=b.element;var g=b.options.containment;if(d=g instanceof a?g.get(0):/parent/.test(g)?d.parent().get(0):
g)if(b.containerElement=a(d),/document/.test(g)||g===document)b.containerOffset={left:0,top:0},b.containerPosition={left:0,top:0},b.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var c=a(d);var e=[];a(["Top","Right","Left","Bottom"]).each(function(k,q){e[k]=b._num(c.css("padding"+q))});b.containerOffset=c.offset();b.containerPosition=c.position();b.containerSize={height:c.innerHeight()-e[3],width:c.innerWidth()-
e[1]};g=b.containerOffset;var h=b.containerSize.height;var f=b.containerSize.width;f=b._hasScroll(d,"left")?d.scrollWidth:f;h=b._hasScroll(d)?d.scrollHeight:h;b.parentData={element:d,left:g.left,top:g.top,width:f,height:h}}},resize:function(b){var d=a(this).resizable("instance");var g=d.options;var c=d.containerOffset;var e=d.position;b=d._aspectRatio||b.shiftKey;var h={top:0,left:0},f=d.containerElement,k=!0;f[0]!==document&&/static/.test(f.css("position"))&&(h=c);e.left<(d._helper?c.left:0)&&(d.size.width+=
d._helper?d.position.left-c.left:d.position.left-h.left,b&&(d.size.height=d.size.width/d.aspectRatio,k=!1),d.position.left=g.helper?c.left:0);e.top<(d._helper?c.top:0)&&(d.size.height+=d._helper?d.position.top-c.top:d.position.top,b&&(d.size.width=d.size.height*d.aspectRatio,k=!1),d.position.top=d._helper?c.top:0);g=d.containerElement.get(0)===d.element.parent().get(0);e=/relative|absolute/.test(d.containerElement.css("position"));g&&e?(d.offset.left=d.parentData.left+d.position.left,d.offset.top=
d.parentData.top+d.position.top):(d.offset.left=d.element.offset().left,d.offset.top=d.element.offset().top);g=Math.abs(d.sizeDiff.width+(d._helper?d.offset.left-h.left:d.offset.left-c.left));c=Math.abs(d.sizeDiff.height+(d._helper?d.offset.top-h.top:d.offset.top-c.top));g+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-g,b&&(d.size.height=d.size.width/d.aspectRatio,k=!1));c+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-c,b&&(d.size.width=d.size.height*
d.aspectRatio,k=!1));k||(d.position.left=d.prevPosition.left,d.position.top=d.prevPosition.top,d.size.width=d.prevSize.width,d.size.height=d.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),d=b.options,g=b.containerOffset,c=b.containerPosition,e=b.containerElement,h=a(b.helper),f=h.offset(),k=h.outerWidth()-b.sizeDiff.width;h=h.outerHeight()-b.sizeDiff.height;b._helper&&!d.animate&&/relative/.test(e.css("position"))&&a(this).css({left:f.left-c.left-g.left,width:k,height:h});b._helper&&
!d.animate&&/static/.test(e.css("position"))&&a(this).css({left:f.left-c.left-g.left,width:k,height:h})}});a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance").options;a(b.alsoResize).each(function(){var d=a(this);d.data("ui-resizable-alsoresize",{width:parseFloat(d.width()),height:parseFloat(d.height()),left:parseFloat(d.css("left")),top:parseFloat(d.css("top"))})})},resize:function(b,d){b=a(this).resizable("instance");var g=b.originalSize,c=b.originalPosition,
e={height:b.size.height-g.height||0,width:b.size.width-g.width||0,top:b.position.top-c.top||0,left:b.position.left-c.left||0};a(b.options.alsoResize).each(function(){var h=a(this),f=a(this).data("ui-resizable-alsoresize"),k={},q=h.parents(d.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(q,function(l,n){(l=(f[n]||0)+(e[n]||0))&&0<=l&&(k[n]=l||null)});h.css(k)})},stop:function(){a(this).removeData("ui-resizable-alsoresize")}});a.ui.plugin.add("resizable","ghost",
{start:function(){var b=a(this).resizable("instance"),d=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0});b._addClass(b.ghost,"ui-resizable-ghost");!1!==a.uiBackCompat&&"string"===typeof b.options.ghost&&b.ghost.addClass(this.options.ghost);b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},
stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).resizable("instance"),d=b.options,g=b.size,c=b.originalSize,e=b.originalPosition,h=b.axis,f="number"===typeof d.grid?[d.grid,d.grid]:d.grid,k=f[0]||1,q=f[1]||1,l=Math.round((g.width-c.width)/k)*k;g=Math.round((g.height-c.height)/q)*q;var n=c.width+l,m=c.height+g,p=d.maxWidth&&d.maxWidth<n,r=d.maxHeight&&d.maxHeight<
m,v=d.minWidth&&d.minWidth>n,y=d.minHeight&&d.minHeight>m;d.grid=f;v&&(n+=k);y&&(m+=q);p&&(n-=k);r&&(m-=q);if(/^(se|s|e)$/.test(h))b.size.width=n,b.size.height=m;else if(/^(ne)$/.test(h))b.size.width=n,b.size.height=m,b.position.top=e.top-g;else if(/^(sw)$/.test(h))b.size.width=n,b.size.height=m,b.position.left=e.left-l;else{if(0>=m-q||0>=n-k)var B=b._getPaddingPlusBorderDimensions(this);0<m-q?(b.size.height=m,b.position.top=e.top-g):(m=q-B.height,b.size.height=m,b.position.top=e.top+c.height-m);
0<n-k?(b.size.width=n,b.position.left=e.left-l):(n=k-B.width,b.size.width=n,b.position.left=e.left+c.width-n)}}});return a.ui.resizable});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./controlgroup","./checkboxradio","../keycode","../widget"],a):a(jQuery)})(function(a){a.widget("ui.button",{version:"1.13.2",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var b=this._super()||{};this.isInput=this.element.is("input");var d=this.element[0].disabled;null!=d&&(b.disabled=d);if(this.originalLabel=
this.isInput?this.element.val():this.element.html())b.label=this.originalLabel;return b},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0);null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1);this.hasTitle=!!this.element.attr("title");this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label));this._addClass("ui-button","ui-widget");this._setOption("disabled",
this.options.disabled);this._enhance();this.element.is("a")&&this._on({keyup:function(b){b.keyCode===a.ui.keyCode.SPACE&&(b.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button");this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title");this.options.showLabel||this.title||this.element.attr("title",
this.options.label)},_updateIcon:function(b,d){var g=(b="iconPosition"!==b)?this.options.iconPosition:d,c="top"===g||"bottom"===g;this.icon?b&&this._removeClass(this.icon,null,this.options.icon):(this.icon=a("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only"));b&&this._addClass(this.icon,null,d);this._attachIcon(g);c?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||
(this.iconSpace=a("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(g))},_destroy:function(){this.element.removeAttr("role");this.icon&&this.icon.remove();this.iconSpace&&this.iconSpace.remove();this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(b){this.icon[/^(?:end|bottom)/.test(b)?"before":"after"](this.iconSpace)},_attachIcon:function(b){this.element[/^(?:end|bottom)/.test(b)?
"append":"prepend"](this.icon)},_setOptions:function(b){var d=void 0===b.icon?this.options.icon:b.icon;(void 0===b.showLabel?this.options.showLabel:b.showLabel)||d||(b.showLabel=!0);this._super(b)},_setOption:function(b,d){"icon"===b&&(d?this._updateIcon(b,d):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove()));"iconPosition"===b&&this._updateIcon(b,d);"showLabel"===b&&(this._toggleClass("ui-button-icon-only",null,!d),this._updateTooltip());"label"===b&&(this.isInput?this.element.val(d):
(this.element.html(d),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition))));this._super(b,d);"disabled"===b&&(this._toggleClass(null,"ui-state-disabled",d),(this.element[0].disabled=d)&&this.element.trigger("blur"))},refresh:function(){var b=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOptions({disabled:b});this._updateTooltip()}});!1!==a.uiBackCompat&&
(a.widget("ui.button",a.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text);!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel);this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=
this.options.icons.secondary,this.options.iconPosition="end");this._super()},_setOption:function(b,d){"text"===b?this._super("showLabel",d):("showLabel"===b&&(this.options.text=d),"icon"===b&&(this.options.icons.primary=d),"icons"===b&&(d.primary?(this._super("icon",d.primary),this._super("iconPosition","beginning")):d.secondary&&(this._super("icon",d.secondary),this._super("iconPosition","end"))),this._superApply(arguments))}}),a.fn.button=function(b){return function(d){var g="string"===typeof d,
c=Array.prototype.slice.call(arguments,1),e=this;g?this.length||"instance"!==d?this.each(function(){var h=a(this).attr("type");var f=a.data(this,"ui-"+("checkbox"!==h&&"radio"!==h?"button":"checkboxradio"));if("instance"===d)return e=f,!1;if(!f)return a.error("cannot call methods on button prior to initialization; attempted to call method '"+d+"'");if("function"!==typeof f[d]||"_"===d.charAt(0))return a.error("no such method '"+d+"' for button widget instance");h=f[d].apply(f,c);if(h!==f&&void 0!==
h)return e=h&&h.jquery?e.pushStack(h.get()):h,!1}):e=void 0:(c.length&&(d=a.widget.extend.apply(null,[d].concat(c))),this.each(function(){var h=a(this).attr("type");h="checkbox"!==h&&"radio"!==h?"button":"checkboxradio";var f=a.data(this,"ui-"+h);f?(f.option(d||{}),f._init&&f._init()):"button"===h?b.call(a(this),d):a(this).checkboxradio(a.extend({icon:!1},d))}));return e}}(a.fn.button),a.fn.buttonset=function(){a.ui.controlgroup||a.error("Controlgroup widget missing");if("option"===arguments[0]&&
"items"===arguments[1]&&arguments[2])return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]);if("option"===arguments[0]&&"items"===arguments[1])return this.controlgroup.apply(this,[arguments[0],"items.button"]);"object"===typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items});return this.controlgroup.apply(this,arguments)});return a.ui.button});
(function(a){"function"===typeof define&&define.amd?define("jquery ./button ./draggable ./mouse ./resizable ../focusable ../keycode ../position ../safe-active-element ../safe-blur ../tabbable ../unique-id ../version ../widget".split(" "),a):a(jQuery)})(function(a){a.widget("ui.dialog",{version:"1.13.2",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,
maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var d=a(this).css(b).offset().top;0>d&&a(this).css("top",b.top-d)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,
maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle);
this.options.disabled&&(this.options.disabled=!1);this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();this.options.draggable&&a.fn.draggable&&this._makeDraggable();this.options.resizable&&a.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;
return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var b=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var d=b.parent.children().eq(b.index);d.length&&d[0]!==this.element[0]?d.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,
close:function(b){var d=this;this._isOpen&&!1!==this._trigger("beforeClose",b)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||a.ui.safeBlur(a.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,d){var g=!1,c=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get();
c=Math.max.apply(null,c);c>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",c+1),g=!0);g&&!d&&this._trigger("focus",b);return g},open:function(){var b=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=a(a.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable();
b._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var b=this._focusedElement;b||=this.element.find("[autofocus]");b.length||(b=this.element.find(":tabbable"));b.length||(b=this.uiDialogButtonPane.find(":tabbable"));b.length||(b=this.uiDialogTitlebarClose.filter(":tabbable"));b.length||(b=this.uiDialog);b.eq(0).trigger("focus")},_restoreTabbableFocus:function(){var b=a.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===b||a.contains(this.uiDialog[0],
b)||this._focusTabbable()},_keepFocus:function(b){b.preventDefault();this._restoreTabbableFocus();this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=a("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)b.preventDefault(),
this.close(b);else if(b.keyCode===a.ui.keyCode.TAB&&!b.isDefaultPrevented()){var d=this.uiDialog.find(":tabbable"),g=d.first(),c=d.last();b.target!==c[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==g[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){c.trigger("focus")}),b.preventDefault()):(this._delay(function(){g.trigger("focus")}),b.preventDefault())}},mousedown:function(b){this._moveToTop(b)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||
this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){this.uiDialogTitlebar=a("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(d){a(d.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}});this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:a("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",
showLabel:!1}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(d){d.preventDefault();this.close(d)}});var b=a("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(b,"ui-dialog-title");this._title(b);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(b){this.options.title?b.text(this.options.title):b.html("&#160;")},
_createButtonPane:function(){this.uiDialogButtonPane=a("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=a("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var b=this,d=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();a.isEmptyObject(d)||Array.isArray(d)&&!d.length?this._removeClass(this.uiDialog,
"ui-dialog-buttons"):(a.each(d,function(g,c){c="function"===typeof c?{click:c,text:g}:c;c=a.extend({type:"button"},c);var e=c.click;g={icon:c.icon,iconPosition:c.iconPosition,showLabel:c.showLabel,icons:c.icons,text:c.text};delete c.click;delete c.icon;delete c.iconPosition;delete c.showLabel;delete c.icons;"boolean"===typeof c.text&&delete c.text;a("<button></button>",c).button(g).appendTo(b.uiButtonSet).on("click",function(){e.apply(b.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),
this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(c){return{position:c.position,offset:c.offset}}var d=this,g=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,e){d._addClass(a(this),"ui-dialog-dragging");d._blockFrames();d._trigger("dragStart",c,b(e))},drag:function(c,e){d._trigger("drag",c,b(e))},stop:function(c,e){var h=e.offset.left-d.document.scrollLeft(),
f=e.offset.top-d.document.scrollTop();g.position={my:"left top",at:"left"+(0<=h?"+":"")+h+" top"+(0<=f?"+":"")+f,of:d.window};d._removeClass(a(this),"ui-dialog-dragging");d._unblockFrames();d._trigger("dragStop",c,b(e))}})},_makeResizable:function(){function b(h){return{originalPosition:h.originalPosition,originalSize:h.originalSize,position:h.position,size:h.size}}var d=this,g=this.options,c=g.resizable,e=this.uiDialog.css("position");c="string"===typeof c?c:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",
containment:"document",alsoResize:this.element,maxWidth:g.maxWidth,maxHeight:g.maxHeight,minWidth:g.minWidth,minHeight:this._minHeight(),handles:c,start:function(h,f){d._addClass(a(this),"ui-dialog-resizing");d._blockFrames();d._trigger("resizeStart",h,b(f))},resize:function(h,f){d._trigger("resize",h,b(f))},stop:function(h,f){var k=d.uiDialog.offset(),q=k.left-d.document.scrollLeft();k=k.top-d.document.scrollTop();g.height=d.uiDialog.height();g.width=d.uiDialog.width();g.position={my:"left top",
at:"left"+(0<=q?"+":"")+q+" top"+(0<=k?"+":"")+k,of:d.window};d._removeClass(a(this),"ui-dialog-resizing");d._unblockFrames();d._trigger("resizeStop",h,b(f))}}).css("position",e)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget();this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),d=a.inArray(this,b);-1!==d&&b.splice(d,1)},
_trackingInstances:function(){var b=this.document.data("ui-dialog-instances");b||(b=[],this.document.data("ui-dialog-instances",b));return b},_minHeight:function(){var b=this.options;return"auto"===b.height?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(){var b=this.uiDialog.is(":visible");b||this.uiDialog.show();this.uiDialog.position(this.options.position);b||this.uiDialog.hide()},_setOptions:function(b){var d=this,g=!1,c={};a.each(b,function(e,h){d._setOption(e,h);e in d.sizeRelatedOptions&&
(g=!0);e in d.resizableRelatedOptions&&(c[e]=h)});g&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",c)},_setOption:function(b,d){var g,c=this.uiDialog;"disabled"!==b&&(this._super(b,d),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),"buttons"===b&&this._createButtons(),"closeText"===b&&this.uiDialogTitlebarClose.button({label:a("<a>").text(""+this.options.closeText).html()}),"draggable"===b&&((g=c.is(":data(ui-draggable)"))&&!d&&
c.draggable("destroy"),!g&&d&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&((g=c.is(":data(ui-resizable)"))&&!d&&c.resizable("destroy"),g&&"string"===typeof d&&c.resizable("option","handles",d),g||!1===d||this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var b=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});b.minWidth>b.width&&(b.width=b.minWidth);var d=this.uiDialog.css({height:"auto",
width:b.width}).outerHeight();var g=Math.max(0,b.minHeight-d);var c="number"===typeof b.maxHeight?Math.max(0,b.maxHeight-d):"none";"auto"===b.height?this.element.css({minHeight:g,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,b.height-d));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),
height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=a.fn.jquery.substring(0,4),d=!0;this._delay(function(){d=!1});if(!this.document.data("ui-dialog-overlays"))this.document.on("focusin.ui-dialog",function(g){if(!d){var c=
this._trackingInstances()[0];c._allowInteraction(g)||(g.preventDefault(),c._focusTabbable(),"3.4."!==b&&"3.5."!==b||c._delay(c._restoreTabbableFocus))}}.bind(this));this.overlay=a("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var b=this.document.data("ui-dialog-overlays")-
1;b?this.document.data("ui-dialog-overlays",b):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays"));this.overlay.remove();this.overlay=null}}});!1!==a.uiBackCompat&&a.widget("ui.dialog",a.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(b,d){"dialogClass"===b&&this.uiDialog.removeClass(this.options.dialogClass).addClass(d);this._superApply(arguments)}});return a.ui.dialog});
(function(a){"function"===typeof define&&define.amd?define("jquery ./menu ../keycode ../position ../safe-active-element ../version ../widget".split(" "),a):a(jQuery)})(function(a){a.widget("ui.autocomplete",{version:"1.13.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,
_create:function(){var b,d,g,c=this.element[0].nodeName.toLowerCase(),e="textarea"===c;c="input"===c;this.isMultiLine=e||!c&&this._isContentEditable(this.element);this.valueMethod=this.element[e||c?"val":"text"];this.isNewMenu=!0;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(h){if(this.element.prop("readOnly"))d=g=b=!0;else{d=g=b=!1;var f=a.ui.keyCode;switch(h.keyCode){case f.PAGE_UP:b=!0;this._move("previousPage",h);break;
case f.PAGE_DOWN:b=!0;this._move("nextPage",h);break;case f.UP:b=!0;this._keyEvent("previous",h);break;case f.DOWN:b=!0;this._keyEvent("next",h);break;case f.ENTER:this.menu.active&&(b=!0,h.preventDefault(),this.menu.select(h));break;case f.TAB:this.menu.active&&this.menu.select(h);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(h),h.preventDefault());break;default:d=!0,this._searchTimeout(h)}}},keypress:function(h){if(b)b=!1,this.isMultiLine&&
!this.menu.element.is(":visible")||h.preventDefault();else if(!d){var f=a.ui.keyCode;switch(h.keyCode){case f.PAGE_UP:this._move("previousPage",h);break;case f.PAGE_DOWN:this._move("nextPage",h);break;case f.UP:this._keyEvent("previous",h);break;case f.DOWN:this._keyEvent("next",h)}}},input:function(h){g?(g=!1,h.preventDefault()):this._searchTimeout(h)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(h){clearTimeout(this.searching);this.close(h);this._change(h)}});
this._initSource();this.menu=a("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(h){h.preventDefault()},menufocus:function(h,f){var k;if(this.isNewMenu&&(this.isNewMenu=!1,h.originalEvent&&/^mouse/.test(h.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(h.target).trigger(h.originalEvent)});return}var q=f.item.data("ui-autocomplete-item");
!1!==this._trigger("focus",h,{item:q})&&h.originalEvent&&/^key/.test(h.originalEvent.type)&&this._value(q.value);(k=f.item.attr("aria-label")||q.value)&&String.prototype.trim.call(k).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay(function(){this.liveRegion.html(a("<div>").text(k))},100))},menuselect:function(h,f){var k=f.item.data("ui-autocomplete-item"),q=this.previous;this.element[0]!==a.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=
q,this._delay(function(){this.previous=q;this.selectedItem=k}));!1!==this._trigger("select",h,{item:k})&&this._value(k.value);this.term=this._value();this.close(h);this.selectedItem=k}});this.liveRegion=a("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);
this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(b,d){this._super(b,d);"source"===b&&this._initSource();"appendTo"===b&&this.menu.element.appendTo(this._appendTo());"disabled"===b&&d&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(b){var d=this.menu.element[0];return b.target===this.element[0]||b.target===d||a.contains(d,b.target)},_closeOnClickOutside:function(b){this._isEventTargetInWidget(b)||this.close()},_appendTo:function(){var b=
this.options.appendTo;b&&=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0);b&&b[0]||(b=this.element.closest(".ui-front, dialog"));b.length||(b=this.document[0].body);return b},_initSource:function(){var b=this;if(Array.isArray(this.options.source)){var d=this.options.source;this.source=function(c,e){e(a.ui.autocomplete.filter(d,c.term))}}else if("string"===typeof this.options.source){var g=this.options.source;this.source=function(c,e){b.xhr&&b.xhr.abort();b.xhr=a.ajax({url:g,data:c,dataType:"json",
success:function(h){e(h)},error:function(){e([])}})}}else this.source=this.options.source},_searchTimeout:function(b){clearTimeout(this.searching);this.searching=this._delay(function(){var d=this.term===this._value(),g=this.menu.element.is(":visible"),c=b.altKey||b.ctrlKey||b.metaKey||b.shiftKey;if(!d||d&&!g&&!c)this.selectedItem=null,this.search(null,b)},this.options.delay)},search:function(b,d){b=null!=b?b:this._value();this.term=this._value();if(b.length<this.options.minLength)return this.close(d);
if(!1!==this._trigger("search",d))return this._search(b)},_search:function(b){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:b},this._response())},_response:function(){var b=++this.requestIndex;return function(d){b===this.requestIndex&&this.__response(d);this.pending--;this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(b){b&&=this._normalize(b);this._trigger("response",null,{content:b});!this.options.disabled&&
b&&b.length&&!this.cancelSearch?(this._suggest(b),this._trigger("open")):this._close()},close:function(b){this.cancelSearch=!0;this._close(b)},_close:function(b){this._off(this.document,"mousedown");this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",b))},_change:function(b){this.previous!==this._value()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(d){return"string"===
typeof d?{label:d,value:d}:a.extend({},d,{label:d.label||d.value,value:d.value||d.label})})},_suggest:function(b){var d=this.menu.element.empty();this._renderMenu(d,b);this.isNewMenu=!0;this.menu.refresh();d.show();this._resizeMenu();d.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next();this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},
_renderMenu:function(b,d){var g=this;a.each(d,function(c,e){g._renderItemData(b,e)})},_renderItemData:function(b,d){return this._renderItem(b,d).data("ui-autocomplete-item",d)},_renderItem:function(b,d){return a("<li>").append(a("<div>").text(d.label)).appendTo(b)},_move:function(b,d){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(b)||this.menu.isLastItem()&&/^next/.test(b))this.isMultiLine||this._value(this.term),this.menu.blur();else this.menu[b](d);else this.search(null,
d)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(b,d){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(b,d),d.preventDefault()},_isContentEditable:function(b){if(!b.length)return!1;var d=b.prop("contentEditable");return"inherit"===d?this._isContentEditable(b.parent()):"true"===d}});a.extend(a.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,
d){var g=new RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(b,function(c){return g.test(c.label||c.value||c)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(b){return b+(1<b?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){this._superApply(arguments);if(!this.options.disabled&&!this.cancelSearch){var d=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults;
clearTimeout(this.liveRegionTimer);this.liveRegionTimer=this._delay(function(){this.liveRegion.html(a("<div>").text(d))},100)}}});return a.ui.autocomplete});
(function(a){"function"===typeof define&&define.amd?define("jquery ./menu ../form-reset-mixin ../keycode ../labels ../position ../unique-id ../version ../widget".split(" "),a):a(jQuery)})(function(a){return a.widget("ui.selectmenu",[a.ui.formResetMixin,{version:"1.13.2",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",
collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=!1;this.menuItems=a()},_drawButton:function(){var b=this,d=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,
{click:function(c){this.button.trigger("focus");c.preventDefault()}});this.element.hide();this.button=a("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");var g=a("<span>").appendTo(this.button);this._addClass(g,
"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(d).appendTo(this.button);!1!==this.options.width&&this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){b._rendered||b._refreshMenu()})},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=a("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");
this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(d,g){d.preventDefault();b._setSelection();b._select(g.item.data("ui-selectmenu-item"),d)},focus:function(d,g){g=g.item.data("ui-selectmenu-item");null!=b.focusIndex&&g.index!==b.focusIndex&&(b._trigger("focus",d,{item:g}),b.isOpen||b._select(g,d));b.focusIndex=g.index;b.button.attr("aria-activedescendant",b.menuItems.eq(g.index).attr("id"))}}).menu("instance");
this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var b=this.element.find("option");this.menu.empty();this._parseOptions(b);this._renderMenu(this.menu,this.items);
this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=!0;b.length&&(b=this._getSelectedItem(),this.menuInstance.focus(null,b),this._setAria(b.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(b){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):
this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",b)))},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(b){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",b))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(b){var d=
a("<span>");this._setText(d,b.label);this._addClass(d,"ui-selectmenu-text");return d},_renderMenu:function(b,d){var g=this,c="";a.each(d,function(e,h){h.optgroup!==c&&(e=a("<li>",{text:h.optgroup}),g._addClass(e,"ui-selectmenu-optgroup","ui-menu-divider"+(h.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),e.appendTo(b),c=h.optgroup);g._renderItemData(b,h)})},_renderItemData:function(b,d){return this._renderItem(b,d).data("ui-selectmenu-item",d)},_renderItem:function(b,d){var g=
a("<li>"),c=a("<div>",{title:d.element.attr("title")});d.disabled&&this._addClass(g,null,"ui-state-disabled");this._setText(c,d.label);return g.append(c).appendTo(b)},_setText:function(b,d){d?b.text(d):b.html("&#160;")},_move:function(b,d){var g=".ui-menu-item";if(this.isOpen)var c=this.menuItems.eq(this.focusIndex).parent("li");else c=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),g+=":not(.ui-state-disabled)";b="first"===b||"last"===b?c["first"===b?"prevAll":"nextAll"](g).eq(-1):
c[b+"All"](g).eq(0);b.length&&this.menuInstance.focus(d,b)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(b){this[this.isOpen?"close":"open"](b)},_setSelection:function(){if(this.range){if(window.getSelection){var b=window.getSelection();b.removeAllRanges();b.addRange(this.range)}else this.range.select();this.button.trigger("focus")}},_documentClick:{mousedown:function(b){this.isOpen&&(a(b.target).closest(".ui-selectmenu-menu, #"+
a.escapeSelector(this.ids.button)).length||this.close(b))}},_buttonEvents:{mousedown:function(){if(window.getSelection){var b=window.getSelection();b.rangeCount&&(this.range=b.getRangeAt(0))}else this.range=document.selection.createRange()},click:function(b){this._setSelection();this._toggle(b)},keydown:function(b){var d=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b);d=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?
this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),d=!1}d&&b.preventDefault()}},
_selectFocusedItem:function(b){var d=this.menuItems.eq(this.focusIndex).parent("li");d.hasClass("ui-state-disabled")||this._select(d.data("ui-selectmenu-item"),b)},_select:function(b,d){var g=this.element[0].selectedIndex;this.element[0].selectedIndex=b.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(b));this._setAria(b);this._trigger("select",d,{item:b});b.index!==g&&this._trigger("change",d,{item:b});this.close(d)},_setAria:function(b){b=this.menuItems.eq(b.index).attr("id");
this.button.attr({"aria-labelledby":b,"aria-activedescendant":b});this.menu.attr("aria-activedescendant",b)},_setOption:function(b,d){if("icons"===b){var g=this.button.find("span.ui-icon");this._removeClass(g,null,this.options.icons.button)._addClass(g,null,d.button)}this._super(b,d);"appendTo"===b&&this.menuWrap.appendTo(this._appendTo());"width"===b&&this._resizeButton()},_setOptionDisabled:function(b){this._super(b);this.menuInstance.option("disabled",b);this.button.attr("aria-disabled",b);this._toggleClass(this.button,
null,"ui-state-disabled",b);this.element.prop("disabled",b);b?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var b=this.options.appendTo;b&&=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0);b&&b[0]||(b=this.element.closest(".ui-front, dialog"));b.length||(b=this.document[0].body);return b},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,
"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var b=this.options.width;!1===b?this.button.css("width",""):(null===b&&(b=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(b))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var b=this._super();
b.disabled=this.element.prop("disabled");return b},_parseOptions:function(b){var d=this,g=[];b.each(function(c,e){e.hidden||g.push(d._parseOption(a(e),c))});this.items=g},_parseOption:function(b,d){var g=b.parent("optgroup");return{element:b,index:d,value:b.val(),label:b.text(),optgroup:g.attr("label")||"",disabled:g.prop("disabled")||b.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();
this.labels.attr("for",this.ids.element)}}])});
(function(a){"function"===typeof define&&define.amd?define(["jquery","./mouse","../keycode","../version","../widget"],a):a(jQuery)})(function(a){return a.widget("ui.slider",a.ui.mouse,{version:"1.13.2",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},
numPages:5,_create:function(){this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var b=this.options;var d=this.element.find(".ui-slider-handle"),g=[];
var c=b.values&&b.values.length||1;d.length>c&&(d.slice(c).remove(),d=d.slice(0,c));for(b=d.length;b<c;b++)g.push("<span tabindex='0'></span>");this.handles=d.add(a(g.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(e){a(this).data("ui-slider-handle-index",e).attr("tabIndex",0)})},_createRange:function(){var b=this.options;b.range?(!0===b.range&&(b.values?b.values.length&&2!==b.values.length?
b.values=[b.values[0],b.values[0]]:Array.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=a("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==b.range&&"max"!==b.range||this._addClass(this.range,"ui-slider-range-"+b.range)):(this.range&&this.range.remove(),this.range=null)},
_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this._mouseDestroy()},_mouseCapture:function(b){var d,g,c=this,e=this.options;if(e.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var h=this._normValueFromMouse({x:b.pageX,y:b.pageY});
var f=this._valueMax()-this._valueMin()+1;this.handles.each(function(q){var l=Math.abs(h-c.values(q));if(f>l||f===l&&(q===c._lastChangedValue||c.values(q)===e.min))f=l,d=a(this),g=q});if(!1===this._start(b,g))return!1;this._mouseSliding=!0;this._handleIndex=g;this._addClass(d,null,"ui-state-active");d.trigger("focus");var k=d.offset();this._clickOffset=a(b.target).parents().addBack().is(".ui-slider-handle")?{left:b.pageX-k.left-d.width()/2,top:b.pageY-k.top-d.height()/2-(parseInt(d.css("borderTopWidth"),
10)||0)-(parseInt(d.css("borderBottomWidth"),10)||0)+(parseInt(d.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(b,g,h);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(b){var d=this._normValueFromMouse({x:b.pageX,y:b.pageY});this._slide(b,this._handleIndex,d);return!1},_mouseStop:function(b){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=!1;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);
this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){if("horizontal"===this.orientation){var d=this.elementSize.width;b=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else d=this.elementSize.height,b=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);d=b/d;1<d&&(d=1);0>d&&(d=0);"vertical"===this.orientation&&
(d=1-d);b=this._valueMax()-this._valueMin();d=this._valueMin()+d*b;return this._trimAlignValue(d)},_uiHash:function(b,d,g){var c={handle:this.handles[b],handleIndex:b,value:void 0!==d?d:this.value()};this._hasMultipleValues()&&(c.value=void 0!==d?d:this.values(b),c.values=g||this.values());return c},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(b,d){return this._trigger("start",b,this._uiHash(d))},_slide:function(b,d,g){var c=this.value(),e=
this.values();if(this._hasMultipleValues()){var h=this.values(d?0:1);c=this.values(d);2===this.options.values.length&&!0===this.options.range&&(g=0===d?Math.min(h,g):Math.max(h,g));e[d]=g}g!==c&&!1!==this._trigger("slide",b,this._uiHash(d,g,e))&&(this._hasMultipleValues()?this.values(d,g):this.value(g))},_stop:function(b,d){this._trigger("stop",b,this._uiHash(d))},_change:function(b,d){this._keySliding||this._mouseSliding||(this._lastChangedValue=d,this._trigger("change",b,this._uiHash(d)))},value:function(b){if(arguments.length)this.options.value=
this._trimAlignValue(b),this._refreshValue(),this._change(null,0);else return this._value()},values:function(b,d){var g;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(d),this._refreshValue(),this._change(null,b);else if(arguments.length)if(Array.isArray(arguments[0])){var c=this.options.values;var e=arguments[0];for(g=0;g<c.length;g+=1)c[g]=this._trimAlignValue(e[g]),this._change(null,g);this._refreshValue()}else return this._hasMultipleValues()?this._values(b):this.value();else return this._values()},
_setOption:function(b,d){var g=0;"range"===b&&!0===this.options.range&&("min"===d?(this.options.value=this._values(0),this.options.values=null):"max"===d&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null));Array.isArray(this.options.values)&&(g=this.options.values.length);this._super(b,d);switch(b){case "orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();
this.options.range&&this._refreshRange(d);this.handles.css("horizontal"===d?"bottom":"left","");break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(b=g-1;0<=b;b--)this._change(null,b);this._animateOff=!1;break;case "step":case "min":case "max":this._animateOff=!0;this._calculateNewMax();this._refreshValue();this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=
!1}},_setOptionDisabled:function(b){this._super(b);this._toggleClass(null,"ui-state-disabled",!!b)},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},_values:function(b){var d;if(arguments.length){var g=this.options.values[b];return g=this._trimAlignValue(g)}if(this._hasMultipleValues()){g=this.options.values.slice();for(d=0;d<g.length;d+=1)g[d]=this._trimAlignValue(g[d]);return g}return[]},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=
this._valueMax())return this._valueMax();var d=0<this.options.step?this.options.step:1,g=(b-this._valueMin())%d;b-=g;2*Math.abs(g)>=d&&(b+=0<g?d:-d);return parseFloat(b.toFixed(5))},_calculateNewMax:function(){var b=this.options.max,d=this._valueMin(),g=this.options.step;b=Math.round((b-d)/g)*g+d;b>this.options.max&&(b-=g);this.max=parseFloat(b.toFixed(this._precision()))},_precision:function(){var b=this._precisionOf(this.options.step);null!==this.options.min&&(b=Math.max(b,this._precisionOf(this.options.min)));
return b},_precisionOf:function(b){b=b.toString();var d=b.indexOf(".");return-1===d?0:b.length-d-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(b){"vertical"===b&&this.range.css({width:"",left:""});"horizontal"===b&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var b,d=this.options.range,g=this.options,c=this,e=this._animateOff?!1:g.animate,h={};if(this._hasMultipleValues())this.handles.each(function(n){l=(c.values(n)-
c._valueMin())/(c._valueMax()-c._valueMin())*100;h["horizontal"===c.orientation?"left":"bottom"]=l+"%";a(this).stop(1,1)[e?"animate":"css"](h,g.animate);if(!0===c.options.range)if("horizontal"===c.orientation){if(0===n)c.range.stop(1,1)[e?"animate":"css"]({left:l+"%"},g.animate);if(1===n)c.range[e?"animate":"css"]({width:l-b+"%"},{queue:!1,duration:g.animate})}else{if(0===n)c.range.stop(1,1)[e?"animate":"css"]({bottom:l+"%"},g.animate);if(1===n)c.range[e?"animate":"css"]({height:l-b+"%"},{queue:!1,
duration:g.animate})}b=l});else{var f=this.value();var k=this._valueMin();var q=this._valueMax();var l=q!==k?(f-k)/(q-k)*100:0;h["horizontal"===this.orientation?"left":"bottom"]=l+"%";this.handle.stop(1,1)[e?"animate":"css"](h,g.animate);if("min"===d&&"horizontal"===this.orientation)this.range.stop(1,1)[e?"animate":"css"]({width:l+"%"},g.animate);if("max"===d&&"horizontal"===this.orientation)this.range.stop(1,1)[e?"animate":"css"]({width:100-l+"%"},g.animate);if("min"===d&&"vertical"===this.orientation)this.range.stop(1,
1)[e?"animate":"css"]({height:l+"%"},g.animate);if("max"===d&&"vertical"===this.orientation)this.range.stop(1,1)[e?"animate":"css"]({height:100-l+"%"},g.animate)}},_handleEvents:{keydown:function(b){var d,g=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding){this._keySliding=
!0;this._addClass(a(b.target),null,"ui-state-active");var c=this._start(b,g);if(!1===c)return}}var e=this.options.step;c=this._hasMultipleValues()?d=this.values(g):d=this.value();switch(b.keyCode){case a.ui.keyCode.HOME:d=this._valueMin();break;case a.ui.keyCode.END:d=this._valueMax();break;case a.ui.keyCode.PAGE_UP:d=this._trimAlignValue(c+(this._valueMax()-this._valueMin())/this.numPages);break;case a.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(c-(this._valueMax()-this._valueMin())/this.numPages);
break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(c===this._valueMax())return;d=this._trimAlignValue(c+e);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c===this._valueMin())return;d=this._trimAlignValue(c-e)}this._slide(b,g,d)},keyup:function(b){var d=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,d),this._change(b,d),this._removeClass(a(b.target),null,"ui-state-active"))}}})});
(function(a){function b(){this.debug=!0;this._curInst=null;this._disabledInputs=[];this._inDialog=this._timepickerShowing=!1;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"],closeButtonText:"Done",nowButtonText:"Now",deselectButtonText:"Deselect"};
this._defaults={showOn:"focus",button:null,showAnim:"fadeIn",showOptions:{},appendText:"",beforeShow:null,onSelect:null,onClose:null,timeSeparator:":",periodSeparator:" ",showPeriod:!1,showPeriodLabels:!0,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:"now",myPosition:"left top",atPosition:"left bottom",onHourShow:null,onMinuteShow:null,hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5,manual:[]},rows:4,showHours:!0,showMinutes:!0,optionalMinutes:!1,showCloseButton:!1,
showNowButton:!1,showDeselectButton:!1,maxTime:{hour:null,minute:null},minTime:{hour:null,minute:null}};a.extend(this._defaults,this.regional[""]);this.tpDiv=a('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function d(c,e){a.extend(c,e);for(var h in e)if(null==e[h]||void 0==e[h])c[h]=e[h];return c}a.extend(a.ui,{fgtimepicker:{version:"0.3.3"}});var g=(new Date).getTime();a.extend(b.prototype,{markerClassName:"hasTimepicker",
log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(c){d(this._defaults,c||{});return this},_attachTimepicker:function(c,e){var h=null;for(k in this._defaults){var f=c.getAttribute("time:"+k);if(f){h=h||{};try{h[k]=eval(f)}catch(l){h[k]=f}}}var k=c.nodeName.toLowerCase();f="div"==k||"span"==k;c.id||(this.uuid+=1,c.id="tp"+this.uuid);var q=this._newInst(a(c),f);q.settings=a.extend({},e||{},h||{});"input"==k?(this._connectTimepicker(c,
q),this._setTimeFromField(q)):f&&this._inlineTimepicker(c,q)},_newInst:function(c,e){return{id:c[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:c,inline:e,tpDiv:e?a('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>'):this.tpDiv}},_connectTimepicker:function(c,e){var h=a(c);e.append=a([]);e.trigger=a([]);h.hasClass(this.markerClassName)||(this._attachments(h,e),h.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.fgtimepicker",
function(f,k,q){e.settings[k]=q}).bind("getData.fgtimepicker",function(f,k){return this._get(e,k)}),a.data(c,"fgtimepicker",e))},_doKeyDown:function(c){var e=a.fgtimepicker._getInst(c.target),h=!0;e._keyEvent=!0;if(a.fgtimepicker._timepickerShowing)switch(c.keyCode){case 9:a.fgtimepicker._hideTimepicker();h=!1;break;case 13:return a.fgtimepicker._updateSelectedValue(e),a.fgtimepicker._hideTimepicker(),!1;case 27:a.fgtimepicker._hideTimepicker();break;default:h=!1}else 36==c.keyCode&&c.ctrlKey?a.fgtimepicker._showTimepicker(this):
h=!1;h&&(c.preventDefault(),c.stopPropagation())},_doKeyUp:function(c){c=a.fgtimepicker._getInst(c.target);a.fgtimepicker._setTimeFromField(c);a.fgtimepicker._updateTimepicker(c)},_attachments:function(c,e){var h=this._get(e,"appendText"),f=this._get(e,"isRTL");e.append&&e.append.remove();h&&(e.append=a('<span class="'+this._appendClass+'">'+h+"</span>"),c[f?"before":"after"](e.append));c.unbind("focus.fgtimepicker",this._showTimepicker);c.unbind("click.fgtimepicker",this._adjustZIndex);e.trigger&&
e.trigger.remove();h=this._get(e,"showOn");if("focus"==h||"both"==h)c.bind("focus.fgtimepicker",this._showTimepicker),c.bind("click.fgtimepicker",this._adjustZIndex);if("button"==h||"both"==h)h=this._get(e,"button"),null==h&&(h=a('<button class="ui-timepicker-trigger" type="button">...</button>'),c.after(h)),a(h).bind("click.fgtimepicker",function(){a.fgtimepicker._timepickerShowing&&a.fgtimepicker._lastInput==c[0]?a.fgtimepicker._hideTimepicker():e.input.is(":disabled")||a.fgtimepicker._showTimepicker(c[0]);
return!1})},_inlineTimepicker:function(c,e){var h=a(c);h.hasClass(this.markerClassName)||(h.addClass(this.markerClassName).append(e.tpDiv).bind("setData.fgtimepicker",function(f,k,q){e.settings[k]=q}).bind("getData.fgtimepicker",function(f,k){return this._get(e,k)}),a.data(c,"fgtimepicker",e),this._setTimeFromField(e),this._updateTimepicker(e),e.tpDiv.show())},_adjustZIndex:function(c){c=c.target||c;a.fgtimepicker._getInst(c).tpDiv.css("zIndex",a.fgtimepicker._getZIndex(c)+1)},_showTimepicker:function(c){c=
c.target||c;"input"!=c.nodeName.toLowerCase()&&(c=a("input",c.parentNode)[0]);if(!a.fgtimepicker._isDisabledTimepicker(c)&&a.fgtimepicker._lastInput!=c){a.fgtimepicker._hideTimepicker();var e=a.fgtimepicker._getInst(c);a.fgtimepicker._curInst&&a.fgtimepicker._curInst!=e&&a.fgtimepicker._curInst.tpDiv.stop(!0,!0);var h=a.fgtimepicker._get(e,"beforeShow");d(e.settings,h?h.apply(c,[c,e]):{});e.lastVal=null;a.fgtimepicker._lastInput=c;a.fgtimepicker._setTimeFromField(e);a.fgtimepicker._inDialog&&(c.value=
"");a.fgtimepicker._pos||(a.fgtimepicker._pos=a.fgtimepicker._findPos(c),a.fgtimepicker._pos[1]+=c.offsetHeight);var f=!1;a(c).parents().each(function(){f|="fixed"==a(this).css("position");return!f});h={left:a.fgtimepicker._pos[0],top:a.fgtimepicker._pos[1]};a.fgtimepicker._pos=null;e.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.fgtimepicker._updateTimepicker(e);e.inline||"object"!=typeof a.ui.position||(e.tpDiv.position({of:e.input,my:a.fgtimepicker._get(e,"myPosition"),at:a.fgtimepicker._get(e,
"atPosition"),collision:"flip"}),h=e.tpDiv.offset(),a.fgtimepicker._pos=[h.top,h.left]);e._hoursClicked=!1;e._minutesClicked=!1;h=a.fgtimepicker._checkOffset(e,h,f);e.tpDiv.css({position:a.fgtimepicker._inDialog&&a.blockUI?"static":f?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"});if(!e.inline){h=a.fgtimepicker._get(e,"showAnim");var k=a.fgtimepicker._get(e,"duration"),q=function(){a.fgtimepicker._timepickerShowing=!0;var l=a.fgtimepicker._getBorders(e.tpDiv);e.tpDiv.find("iframe.ui-timepicker-cover").css({left:-l[0],
top:-l[1],width:e.tpDiv.outerWidth(),height:e.tpDiv.outerHeight()})};a.fgtimepicker._adjustZIndex(c);a.effects&&a.effects[h]?e.tpDiv.show(h,a.fgtimepicker._get(e,"showOptions"),k,q):e.tpDiv.show(h?k:null,q);h&&k||q();e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus();a.fgtimepicker._curInst=e}}},_getZIndex:function(c){c=a(c);for(var e=0,h;c.length&&c[0]!==document;){h=c.css("position");if("absolute"===h||"relative"===h||"fixed"===h)h=parseInt(c.css("zIndex"),10),isNaN(h)||0===h||h>
e&&(e=h);c=c.parent()}return e},_refreshTimepicker:function(c){(c=this._getInst(c))&&this._updateTimepicker(c)},_updateTimepicker:function(c){c.tpDiv.empty().append(this._generateHTML(c));this._rebindDialogEvents(c)},_rebindDialogEvents:function(c){var e=a.fgtimepicker._getBorders(c.tpDiv),h=this;c.tpDiv.find("iframe.ui-timepicker-cover").css({left:-e[0],top:-e[1],width:c.tpDiv.outerWidth(),height:c.tpDiv.outerHeight()}).end().find(".ui-timepicker-minute-cell").unbind().bind("click",{fromDoubleClick:!1},
a.proxy(a.fgtimepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:!0},a.proxy(a.fgtimepicker.selectMinutes,this)).end().find(".ui-timepicker-hour-cell").unbind().bind("click",{fromDoubleClick:!1},a.proxy(a.fgtimepicker.selectHours,this)).bind("dblclick",{fromDoubleClick:!0},a.proxy(a.fgtimepicker.selectHours,this)).end().find(".ui-timepicker td a").unbind().bind("mouseout",function(){a(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-timepicker-prev")&&a(this).removeClass("ui-timepicker-prev-hover");
-1!=this.className.indexOf("ui-timepicker-next")&&a(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){h._isDisabledTimepicker(c.inline?c.tpDiv.parent()[0]:c.input[0])||(a(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-timepicker-prev")&&a(this).addClass("ui-timepicker-prev-hover"),-1!=this.className.indexOf("ui-timepicker-next")&&a(this).addClass("ui-timepicker-next-hover"))}).end().find("."+
this._dayOverClass+" a").trigger("mouseover").end().find(".ui-timepicker-now").bind("click",function(f){a.fgtimepicker.selectNow(f)}).end().find(".ui-timepicker-deselect").bind("click",function(f){a.fgtimepicker.deselectTime(f)}).end().find(".ui-timepicker-close").bind("click",function(f){a.fgtimepicker._hideTimepicker()}).end()},_generateHTML:function(c){var e,h,f=1==this._get(c,"showPeriod"),k=1==this._get(c,"showPeriodLabels"),q=1==this._get(c,"showLeadingZero");var l=1==this._get(c,"showHours");
var n=1==this._get(c,"showMinutes"),m=this._get(c,"amPmText"),p=this._get(c,"rows"),r=0,v=0,y=h=0,B=0,t=0,u=[],x=this._get(c,"hours"),w=0;var C=this._get(c,"hourText");var A=this._get(c,"showCloseButton"),z=this._get(c,"closeButtonText"),D=this._get(c,"showNowButton"),F=this._get(c,"nowButtonText"),E=this._get(c,"showDeselectButton"),G=this._get(c,"deselectButtonText"),I=A||D||E;for(e=x.starts;e<=x.ends;e++)u.push(e);e=Math.ceil(u.length/p);if(k){for(w=0;w<u.length;w++)12>u[w]?h++:y++;w=0;r=Math.floor(h/
u.length*p);v=Math.floor(y/u.length*p);p!=r+v&&(h&&(!y||!r||v&&h/r>=y/v)?r++:v++);B=Math.min(r,1);t=r+1;e=0==r?Math.ceil(y/v):0==v?Math.ceil(h/r):Math.ceil(Math.max(h/r,y/v))}h='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr>';if(l){h+='<td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+C+'</div><table class="ui-timepicker">';for(l=1;l<=p;l++){h+="<tr>";l==B&&k&&(h+='<th rowspan="'+r.toString()+'" class="periods" scope="row">'+
m[0]+"</th>");l==t&&k&&(h+='<th rowspan="'+v.toString()+'" class="periods" scope="row">'+m[1]+"</th>");for(C=1;C<=e;C++)k&&l<t&&12<=u[w]?h+=this._generateHTMLHourCell(c,void 0,f,q):(h+=this._generateHTMLHourCell(c,u[w],f,q),w++);h+="</tr>"}h+="</table></td>"}n&&(h=h+'<td class="ui-timepicker-minutes">'+this._generateHTMLMinutes(c),h+="</td>");h+="</tr>";I&&(f='<tr><td colspan="3"><div class="ui-timepicker-buttonpane ui-widget-content">',D&&(f+='<button type="button" class="ui-timepicker-now ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+
c.id.replace(/\\\\/g,"\\")+'" >'+F+"</button>"),E&&(f+='<button type="button" class="ui-timepicker-deselect ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+c.id.replace(/\\\\/g,"\\")+'" >'+G+"</button>"),A&&(f+='<button type="button" class="ui-timepicker-close ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+c.id.replace(/\\\\/g,"\\")+'" >'+z+"</button>"),h+=f+"</div></td></tr>");return h+"</table>"},_updateMinuteDisplay:function(c){var e=this._generateHTMLMinutes(c);
c.tpDiv.find("td.ui-timepicker-minutes").html(e);this._rebindDialogEvents(c)},_generateHTMLMinutes:function(c){var e,h="",f=this._get(c,"rows"),k=[];var q=this._get(c,"minutes");var l=null,n=0,m=1==this._get(c,"showMinutesLeadingZero"),p=this._get(c,"onMinuteShow"),r=this._get(c,"minuteText");q.starts||(q.starts=0);q.ends||(q.ends=59);q.manual||(q.manual=[]);for(e=q.starts;e<=q.ends;e+=q.interval)k.push(e);for(i=0;i<q.manual.length;i++)e=q.manual[i],"number"!=typeof e||0>e||59<e||0<=a.inArray(e,k)||
k.push(e);k.sort(function(v,y){return v-y});l=Math.round(k.length/f+.49);if(p&&0==p.apply(c.input?c.input[0]:null,[c.hours,c.minutes]))for(n=0;n<k.length;n+=1)if(e=k[n],p.apply(c.input?c.input[0]:null,[c.hours,e])){c.minutes=e;break}h+='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+r+'</div><table class="ui-timepicker">';n=0;for(q=1;q<=f;q++){for(h+="<tr>";n<q*l;)e=k[n],p="",void 0!==e&&(p=10>e&&m?"0"+e.toString():e.toString()),h+=this._generateHTMLMinuteCell(c,
e,p),n++;h+="</tr>"}return h+"</table>"},_generateHTMLHourCell:function(c,e,h,f){var k=e;12<e&&h&&(k=e-12);0==k&&h&&(k=12);10>k&&f&&(k="0"+k);h=!0;f=this._get(c,"onHourShow");var q=this._get(c,"maxTime"),l=this._get(c,"minTime");if(void 0==e)return'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>';f&&(h=f.apply(c.input?c.input[0]:null,[e]));h&&(!isNaN(parseInt(q.hour))&&e>q.hour&&(h=!1),!isNaN(parseInt(l.hour))&&e<l.hour&&(h=!1));return h?'<td class="ui-timepicker-hour-cell" data-timepicker-instance-id="#'+
c.id.replace(/\\\\/g,"\\")+'" data-hour="'+e.toString()+'"><a class="ui-state-default '+(e==c.hours?"ui-state-active":"")+'">'+k.toString()+"</a></td>":'<td><span class="ui-state-default ui-state-disabled '+(e==c.hours?" ui-state-active ":" ")+'">'+k.toString()+"</span></td>"},_generateHTMLMinuteCell:function(c,e,h){var f=!0,k=c.hours,q=this._get(c,"onMinuteShow"),l=this._get(c,"maxTime"),n=this._get(c,"minTime");q&&(f=q.apply(c.input?c.input[0]:null,[c.hours,e]));if(void 0==e)return'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>';
f&&null!==k&&(!isNaN(parseInt(l.hour))&&!isNaN(parseInt(l.minute))&&k>=l.hour&&e>l.minute&&(f=!1),!isNaN(parseInt(n.hour))&&!isNaN(parseInt(n.minute))&&k<=n.hour&&e<n.minute&&(f=!1));return f?'<td class="ui-timepicker-minute-cell" data-timepicker-instance-id="#'+c.id.replace(/\\\\/g,"\\")+'" data-minute="'+e.toString()+'" ><a class="ui-state-default '+(e==c.minutes?"ui-state-active":"")+'" >'+h+"</a></td>":'<td><span class="ui-state-default ui-state-disabled" >'+h+"</span></td>"},_destroyTimepicker:function(c){var e=
a(c),h=a.data(c,"fgtimepicker");if(e.hasClass(this.markerClassName)){var f=c.nodeName.toLowerCase();a.removeData(c,"fgtimepicker");"input"==f?(h.append.remove(),h.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus.fgtimepicker",this._showTimepicker).unbind("click.fgtimepicker",this._adjustZIndex)):"div"!=f&&"span"!=f||e.removeClass(this.markerClassName).empty()}},_enableTimepicker:function(c){var e=a(c),h=e.attr("id"),f=a.data(c,"fgtimepicker");if(e.hasClass(this.markerClassName)){var k=
c.nodeName.toLowerCase();if("input"==k)c.disabled=!1,c=this._get(f,"button"),a(c).removeClass("ui-state-disabled").disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end();else if("div"==k||"span"==k)f=e.children("."+this._inlineClass),f.children().removeClass("ui-state-disabled"),f.find("button").each(function(){this.disabled=!1});this._disabledInputs=a.map(this._disabledInputs,function(q){return q==h?null:q})}},_disableTimepicker:function(c){var e=a(c),h=a.data(c,"fgtimepicker");
if(e.hasClass(this.markerClassName)){var f=c.nodeName.toLowerCase();if("input"==f)f=this._get(h,"button"),a(f).addClass("ui-state-disabled").disabled=!0,c.disabled=!0,h.trigger.filter("button").each(function(){this.disabled=!0}).end();else if("div"==f||"span"==f)h=e.children("."+this._inlineClass),h.children().addClass("ui-state-disabled"),h.find("button").each(function(){this.disabled=!0});this._disabledInputs=a.map(this._disabledInputs,function(k){return k==c?null:k});this._disabledInputs[this._disabledInputs.length]=
e.attr("id")}},_isDisabledTimepicker:function(c){if(!c)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]==c)return!0;return!1},_checkOffset:function(c,e,h){var f=c.tpDiv.outerWidth(),k=c.tpDiv.outerHeight(),q=c.input?c.input.outerWidth():0,l=c.input?c.input.outerHeight():0,n=document.documentElement.clientWidth+a(document).scrollLeft(),m=document.documentElement.clientHeight+a(document).scrollTop();e.left-=this._get(c,"isRTL")?f-q:0;e.left-=h&&e.left==c.input.offset().left?
a(document).scrollLeft():0;e.top-=h&&e.top==c.input.offset().top+l?a(document).scrollTop():0;e.left-=Math.min(e.left,e.left+f>n&&n>f?Math.abs(e.left+f-n):0);e.top-=Math.min(e.top,e.top+k>m&&m>k?Math.abs(k+l):0);return e},_findPos:function(c){var e=this._getInst(c);for(e=this._get(e,"isRTL");c&&("hidden"==c.type||1!=c.nodeType);)c=c[e?"previousSibling":"nextSibling"];c=a(c).offset();return[c.left,c.top]},_getBorders:function(c){var e=function(h){return{thin:1,medium:2,thick:3}[h]||h};return[parseFloat(e(c.css("border-left-width"))),
parseFloat(e(c.css("border-top-width")))]},_checkExternalClick:function(c){a.fgtimepicker._curInst&&(c=a(c.target),c[0].id==a.fgtimepicker._mainDivId||0!=c.parents("#"+a.fgtimepicker._mainDivId).length||c.hasClass(a.fgtimepicker.markerClassName)||c.hasClass(a.fgtimepicker._triggerClass)||!a.fgtimepicker._timepickerShowing||a.fgtimepicker._inDialog&&a.blockUI||a.fgtimepicker._hideTimepicker())},_hideTimepicker:function(c){var e=this._curInst;if(e&&(!c||e==a.data(c,"fgtimepicker"))&&this._timepickerShowing){c=
this._get(e,"showAnim");var h=this._get(e,"duration"),f=function(){a.fgtimepicker._tidyDialog(e);this._curInst=null};if(a.effects&&a.effects[c])e.tpDiv.hide(c,a.fgtimepicker._get(e,"showOptions"),h,f);else e.tpDiv["slideDown"==c?"slideUp":"fadeIn"==c?"fadeOut":"hide"](c?h:null,f);c||f();this._timepickerShowing=!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.tpDiv)));this._inDialog=!1;(c=this._get(e,
"onClose"))&&c.apply(e.input?e.input[0]:null,[e.input?e.input.val():"",e])}},_tidyDialog:function(c){c.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(c){try{return a.data(c,"fgtimepicker")}catch(e){throw"Missing instance data for this timepicker";}},_get:function(c,e){return void 0!==c.settings[e]?c.settings[e]:this._defaults[e]},_setTimeFromField:function(c){if(c.input.val()!=c.lastVal){var e=this._get(c,"defaultTime");e="now"==e?this._getCurrentTimeRounded(c):e;
0==c.inline&&""!=c.input.val()&&(e=c.input.val());if(e instanceof Date)c.hours=e.getHours(),c.minutes=e.getMinutes();else{var h=c.lastVal=e;""==e?(c.hours=-1,c.minutes=-1):(e=this.parseTime(c,h),c.hours=e.hours,c.minutes=e.minutes)}a.fgtimepicker._updateTimepicker(c)}},_optionTimepicker:function(c,e,h){var f=this._getInst(c);if(2==arguments.length&&"string"==typeof e)return"defaults"==e?a.extend({},a.fgtimepicker._defaults):f?"all"==e?a.extend({},f.settings):this._get(f,e):null;var k=e||{};"string"==
typeof e&&(k={},k[e]=h);f&&(d(f.settings,k),this._curInst==f&&(this._hideTimepicker(),this._updateTimepicker(f)),f.inline&&this._updateTimepicker(f))},_setTimeTimepicker:function(c,e){if(c=this._getInst(c))this._setTime(c,e),this._updateTimepicker(c),this._updateAlternate(c,e)},_setTime:function(c,e,h){var f=c.hours,k=c.minutes;e instanceof Date?(c.hours=e.getHours(),c.minutes=e.getMinutes()):(e=this.parseTime(c,e),c.hours=e.hours,c.minutes=e.minutes);f==c.hours&&k==c.minutes||h||c.input.trigger("change");
this._updateTimepicker(c);this._updateSelectedValue(c)},_getCurrentTimeRounded:function(c){var e=new Date,h=e.getMinutes();c=this._get(c,"minutes");e.setMinutes(Math.round(h/c.interval)*c.interval);return e},parseTime:function(c,e){var h={hours:-1,minutes:-1};if(!e)return"";var f=this._get(c,"timeSeparator"),k=this._get(c,"amPmText"),q=this._get(c,"showHours"),l=this._get(c,"showMinutes"),n=this._get(c,"optionalMinutes");c=1==this._get(c,"showPeriod");f=e.indexOf(f);-1!=f?(h.hours=parseInt(e.substr(0,
f),10),h.minutes=parseInt(e.substr(f+1),10)):!q||l&&!n?!q&&l&&(h.minutes=parseInt(e,10)):h.hours=parseInt(e,10);q&&(e=e.toUpperCase(),12>h.hours&&c&&-1!=e.indexOf(k[1].toUpperCase())&&(h.hours+=12),12==h.hours&&c&&-1!=e.indexOf(k[0].toUpperCase())&&(h.hours=0));return h},selectNow:function(c){c=a(c.target).attr("data-timepicker-instance-id");c=a(c);c=this._getInst(c[0]);var e=new Date;c.hours=e.getHours();c.minutes=e.getMinutes();this._updateSelectedValue(c);this._updateTimepicker(c);this._hideTimepicker()},
deselectTime:function(c){c=a(c.target).attr("data-timepicker-instance-id");c=a(c);c=this._getInst(c[0]);c.hours=-1;c.minutes=-1;this._updateSelectedValue(c);this._hideTimepicker()},selectHours:function(c){var e=a(c.currentTarget),h=e.attr("data-timepicker-instance-id"),f=parseInt(e.attr("data-hour"));c=c.data.fromDoubleClick;var k=a(h);h=this._getInst(k[0]);var q=1==this._get(h,"showMinutes");if(a.fgtimepicker._isDisabledTimepicker(k.attr("id")))return!1;e.parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");
e.children("a").addClass("ui-state-active");h.hours=f;e=this._get(h,"onMinuteShow");f=this._get(h,"maxTime");k=this._get(h,"minTime");(e||f.minute||k.minute)&&this._updateMinuteDisplay(h);this._updateSelectedValue(h);h._hoursClicked=!0;(h._minutesClicked||c||0==q)&&a.fgtimepicker._hideTimepicker();return!1},selectMinutes:function(c){var e=a(c.currentTarget),h=e.attr("data-timepicker-instance-id"),f=parseInt(e.attr("data-minute"));c=c.data.fromDoubleClick;h=a(h);var k=this._getInst(h[0]),q=1==this._get(k,
"showHours");if(a.fgtimepicker._isDisabledTimepicker(h.attr("id")))return!1;e.parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");e.children("a").addClass("ui-state-active");k.minutes=f;this._updateSelectedValue(k);k._minutesClicked=!0;(k._hoursClicked||c||0==q)&&a.fgtimepicker._hideTimepicker();return!1},_updateSelectedValue:function(c){var e=this._getParsedTime(c);c.input&&(c.input.val(e),c.input.trigger("change"));var h=this._get(c,"onSelect");h&&h.apply(c.input?c.input[0]:
null,[e,c]);this._updateAlternate(c,e);return e},_getParsedTime:function(c){if(-1==c.hours&&-1==c.minutes)return"";if(c.hours<c.hours.starts||c.hours>c.hours.ends)c.hours=0;if(c.minutes<c.minutes.starts||c.minutes>c.minutes.ends)c.minutes=0;var e="",h=1==this._get(c,"showPeriod"),f=1==this._get(c,"showLeadingZero"),k=1==this._get(c,"showHours"),q=1==this._get(c,"showMinutes"),l=1==this._get(c,"optionalMinutes"),n=this._get(c,"amPmText"),m=c.hours?c.hours:0,p=c.minutes?c.minutes:0,r=m?m:0;m="";-1==
r&&(r=0);-1==p&&(p=0);h&&(0==c.hours&&(r=12),12>c.hours?e=n[0]:(e=n[1],12<r&&(r-=12)));h=r.toString();f&&10>r&&(h="0"+h);f=p.toString();10>p&&(f="0"+f);k&&(m+=h);!k||!q||l&&0==f||(m+=this._get(c,"timeSeparator"));!q||l&&0==f||(m+=f);k&&0<e.length&&(m+=this._get(c,"periodSeparator")+e);return m},_updateAlternate:function(c,e){(c=this._get(c,"altField"))&&a(c).each(function(h,f){a(f).val(e)})},_getTimeAsDateTimepicker:function(c){c=this._getInst(c);if(-1==c.hours&&-1==c.minutes)return"";if(c.hours<
c.hours.starts||c.hours>c.hours.ends)c.hours=0;if(c.minutes<c.minutes.starts||c.minutes>c.minutes.ends)c.minutes=0;return new Date(0,0,0,c.hours,c.minutes,0)},_getTimeTimepicker:function(c){c=this._getInst(c);return this._getParsedTime(c)},_getHourTimepicker:function(c){c=this._getInst(c);return void 0==c?-1:c.hours},_getMinuteTimepicker:function(c){c=this._getInst(c);return void 0==c?-1:c.minutes}});a.fn.fgtimepicker=function(c){a.fgtimepicker.initialized||(a(document).mousedown(a.fgtimepicker._checkExternalClick),
a.fgtimepicker.initialized=!0);0===a("#"+a.fgtimepicker._mainDivId).length&&a("body").append(a.fgtimepicker.tpDiv);var e=Array.prototype.slice.call(arguments,1);return"string"==typeof c&&("getTime"==c||"getTimeAsDate"==c||"getHour"==c||"getMinute"==c)||"option"==c&&2==arguments.length&&"string"==typeof arguments[1]?a.fgtimepicker["_"+c+"Timepicker"].apply(a.fgtimepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof c?a.fgtimepicker["_"+c+"Timepicker"].apply(a.fgtimepicker,[this].concat(e)):
a.fgtimepicker._attachTimepicker(this,c)})};a.fgtimepicker=new b;a.fgtimepicker.initialized=!1;a.fgtimepicker.uuid=(new Date).getTime();a.fgtimepicker.version="0.3.3";window["TP_jQuery_"+g]=a})(jQuery);
(function(a){"function"===typeof define&&define.amd?define(["jquery","jquery-ui"],a):a(jQuery)})(function(a){a.ui.timepicker=a.ui.timepicker||{};if(!a.ui.timepicker.version){a.extend(a.ui,{timepicker:{version:"1.6.3"}});var b=function(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",
microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1};this._defaults={showButtonPanel:!0,timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,
maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",oneLine:!1,defaultValue:null,parse:"strict",afterInject:null};a.extend(this._defaults,this.regional[""])};a.extend(b.prototype,
{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",
formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(l){g(this._defaults,l||{});return this},_newInst:function(l,n){var m=new b,p={},r={};for(y in this._defaults)if(this._defaults.hasOwnProperty(y)){var v=l.attr("time:"+y);if(v)try{p[y]=eval(v)}catch(t){p[y]=v}}var y={beforeShow:function(t,u){if(a.isFunction(m._defaults.evnts.beforeShow))return m._defaults.evnts.beforeShow.call(l[0],t,u,m)},onChangeMonthYear:function(t,
u,x){a.isFunction(m._defaults.evnts.onChangeMonthYear)&&m._defaults.evnts.onChangeMonthYear.call(l[0],t,u,x,m)},onClose:function(t,u){!0===m.timeDefined&&""!==l.val()&&m._updateDateTime(u);a.isFunction(m._defaults.evnts.onClose)&&m._defaults.evnts.onClose.call(l[0],t,u,m)}};for(B in y)y.hasOwnProperty(B)&&(r[B]=n[B]||this._defaults[B]||null);m._defaults=a.extend({},this._defaults,p,n,y,{evnts:r,timepicker:m});m.amNames=a.map(m._defaults.amNames,function(t){return t.toUpperCase()});m.pmNames=a.map(m._defaults.pmNames,
function(t){return t.toUpperCase()});m.support=c(m._defaults.timeFormat+(m._defaults.pickerTimeFormat?m._defaults.pickerTimeFormat:"")+(m._defaults.altTimeFormat?m._defaults.altTimeFormat:""));"string"===typeof m._defaults.controlType?("slider"===m._defaults.controlType&&"undefined"===typeof a.ui.slider&&(m._defaults.controlType="select"),m.control=m._controls[m._defaults.controlType]):m.control=m._defaults.controlType;n=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,
60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==m._defaults.timezoneList&&(n=m._defaults.timezoneList);p=n.length;r=0;var B=null;if(0<p&&"object"!==typeof n[0])for(;r<p;r++)B=n[r],n[r]={value:B,label:a.timepicker.timezoneOffsetString(B,m.support.iso8601)};m._defaults.timezoneList=n;m.timezone=null!==m._defaults.timezone?a.timepicker.timezoneOffsetNumber(m._defaults.timezone):-1*(new Date).getTimezoneOffset();m.hour=m._defaults.hour<m._defaults.hourMin?
m._defaults.hourMin:m._defaults.hour>m._defaults.hourMax?m._defaults.hourMax:m._defaults.hour;m.minute=m._defaults.minute<m._defaults.minuteMin?m._defaults.minuteMin:m._defaults.minute>m._defaults.minuteMax?m._defaults.minuteMax:m._defaults.minute;m.second=m._defaults.second<m._defaults.secondMin?m._defaults.secondMin:m._defaults.second>m._defaults.secondMax?m._defaults.secondMax:m._defaults.second;m.millisec=m._defaults.millisec<m._defaults.millisecMin?m._defaults.millisecMin:m._defaults.millisec>
m._defaults.millisecMax?m._defaults.millisecMax:m._defaults.millisec;m.microsec=m._defaults.microsec<m._defaults.microsecMin?m._defaults.microsecMin:m._defaults.microsec>m._defaults.microsecMax?m._defaults.microsecMax:m._defaults.microsec;m.ampm="";m.$input=l;m._defaults.altField&&(m.$altInput=a(m._defaults.altField),!0===m._defaults.altRedirectFocus&&m.$altInput.css({cursor:"pointer"}).focus(function(){l.trigger("focus")}));if(0===m._defaults.minDate||0===m._defaults.minDateTime)m._defaults.minDate=
new Date;if(0===m._defaults.maxDate||0===m._defaults.maxDateTime)m._defaults.maxDate=new Date;void 0!==m._defaults.minDate&&m._defaults.minDate instanceof Date&&(m._defaults.minDateTime=new Date(m._defaults.minDate.getTime()));void 0!==m._defaults.minDateTime&&m._defaults.minDateTime instanceof Date&&(m._defaults.minDate=new Date(m._defaults.minDateTime.getTime()));void 0!==m._defaults.maxDate&&m._defaults.maxDate instanceof Date&&(m._defaults.maxDateTime=new Date(m._defaults.maxDate.getTime()));
void 0!==m._defaults.maxDateTime&&m._defaults.maxDateTime instanceof Date&&(m._defaults.maxDate=new Date(m._defaults.maxDateTime.getTime()));m.$input.bind("focus",function(){m._onFocus()});return m},_addTimePicker:function(l){var n=a.trim(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val());this.timeDefined=this._parseTime(n);this._limitMinMaxDateTime(l,!1);this._injectTimePicker();this._afterInject()},_parseTime:function(l,n){this.inst||(this.inst=
a.datepicker._getInst(this.$input[0]));if(n||!this._defaults.timeOnly){n=a.datepicker._get(this.inst,"dateFormat");try{var m=k(n,this._defaults.timeFormat,l,a.datepicker._getFormatConfig(this.inst),this._defaults);if(!m.timeObj)return!1;a.extend(this,m.timeObj)}catch(p){return a.timepicker.log("Error parsing the date/time string: "+p+"\ndate/time string = "+l+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+n),!1}}else{l=a.datepicker.parseTime(this._defaults.timeFormat,l,this._defaults);
if(!l)return!1;a.extend(this,l)}return!0},_afterInject:function(){var l=this.inst.settings;a.isFunction(l.afterInject)&&l.afterInject.call(this)},_injectTimePicker:function(){var l=this.inst.dpDiv,n=this.inst.settings,m=this,p="",r="",v=null,y={},B={},t=null,u=0,x=0;if(0===l.find("div.ui-timepicker-div").length&&n.showTimepicker){t='<div class="ui-timepicker-div'+(n.isRTL?" ui-timepicker-rtl":"")+(n.oneLine&&"select"===n.controlType?" ui-timepicker-oneLine":"")+'"><dl><dt class="ui_tpicker_time_label'+
(n.showTime?"":" ui_tpicker_unit_hide")+'">'+n.timeText+'</dt><dd class="ui_tpicker_time '+(n.showTime?"":" ui_tpicker_unit_hide")+'"><input class="ui_tpicker_time_input" '+(n.timeInput?"":"disabled")+"/></dd>";u=0;for(x=this.units.length;u<x;u++){p=this.units[u];r=p.substr(0,1).toUpperCase()+p.substr(1);v=null!==n["show"+r]?n["show"+r]:this.support[p];y[p]=parseInt(n[p+"Max"]-(n[p+"Max"]-n[p+"Min"])%n["step"+r],10);B[p]=0;t+='<dt class="ui_tpicker_'+p+"_label"+(v?"":" ui_tpicker_unit_hide")+'">'+
n[p+"Text"]+'</dt><dd class="ui_tpicker_'+p+(v?"":" ui_tpicker_unit_hide")+'"><div class="ui_tpicker_'+p+"_slider"+(v?"":" ui_tpicker_unit_hide")+'"></div>';if(v&&0<n[p+"Grid"]){t+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if("hour"===p)for(r=n[p+"Min"];r<=y[p];r+=parseInt(n[p+"Grid"],10))B[p]++,v=a.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:r},n),t+='<td data-for="'+p+'">'+v+"</td>";else for(r=n[p+"Min"];r<=y[p];r+=parseInt(n[p+"Grid"],10))B[p]++,t+=
'<td data-for="'+p+'">'+(10>r?"0":"")+r+"</td>";t+="</tr></table></div>"}t+="</dd>"}u=null!==n.showTimezone?n.showTimezone:this.support.timezone;t+='<dt class="ui_tpicker_timezone_label'+(u?"":" ui_tpicker_unit_hide")+'">'+n.timezoneText+"</dt>";var w=a(t+('<dd class="ui_tpicker_timezone'+(u?"":" ui_tpicker_unit_hide")+'"></dd></dl></div>'));!0===n.timeOnly&&(w.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+n.timeOnlyTitle+"</div></div>"),
l.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());u=0;for(x=m.units.length;u<x;u++)p=m.units[u],r=p.substr(0,1).toUpperCase()+p.substr(1),v=null!==n["show"+r]?n["show"+r]:this.support[p],m[p+"_slider"]=m.control.create(m,w.find(".ui_tpicker_"+p+"_slider"),p,m[p],n[p+"Min"],y[p],n["step"+r]),v&&0<n[p+"Grid"]&&(t=100*B[p]*n[p+"Grid"]/(y[p]-n[p+"Min"]),w.find(".ui_tpicker_"+p+" table").css({width:t+"%",marginLeft:n.isRTL?"0":t/(-2*B[p])+"%",marginRight:n.isRTL?t/(-2*B[p])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(z){var D=
a(this),F=D.html();z=parseInt(F.replace(/[^0-9]/g),10);F=F.replace(/[^apm]/ig);D=D.data("for");"hour"===D&&(-1!==F.indexOf("p")&&12>z?z+=12:-1!==F.indexOf("a")&&12===z&&(z=0));m.control.value(m,m[D+"_slider"],p,z);m._onTimeChange();m._onSelectHandler()}).css({cursor:"pointer",width:100/B[p]+"%",textAlign:"center",overflow:"hidden"}));this.timezone_select=w.find(".ui_tpicker_timezone").append("<select></select>").find("select");a.fn.append.apply(this.timezone_select,a.map(n.timezoneList,function(z,
D){return a("<option />").val("object"===typeof z?z.value:z).text("object"===typeof z?z.label:z)}));"undefined"!==typeof this.timezone&&null!==this.timezone&&""!==this.timezone?-1*(new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12)).getTimezoneOffset()===this.timezone?q(m):this.timezone_select.val(this.timezone):"undefined"!==typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(n.timezone):q(m);this.timezone_select.change(function(){m._onTimeChange();
m._onSelectHandler();m._afterInject()});n=l.find(".ui-datepicker-buttonpane");n.length?n.before(w):l.append(w);this.$timeObj=w.find(".ui_tpicker_time_input");this.$timeObj.change(function(){var z=a.datepicker.parseTime(m.inst.settings.timeFormat,this.value),D=new Date;z?(D.setHours(z.hour),D.setMinutes(z.minute),D.setSeconds(z.second),a.datepicker._setTime(m.inst,D)):(this.value=m.formattedTime,this.blur())});null!==this.inst&&(l=this.timeDefined,this._onTimeChange(),this.timeDefined=l);if(this._defaults.addSliderAccess){var C=
this._defaults.sliderAccessArgs,A=this._defaults.isRTL;C.isRTL=A;setTimeout(function(){if(0===w.find(".ui-slider-access").length){w.find(".ui-slider:visible").sliderAccess(C);var z=w.find(".ui-slider-access:eq(0)").outerWidth(!0);z&&w.find("table:visible").each(function(){var D=a(this),F=D.outerWidth(),E=D.css(A?"marginRight":"marginLeft").toString().replace("%",""),G=F-z,I={width:G,marginRight:0,marginLeft:0};I[A?"marginRight":"marginLeft"]=E*G/F+"%";D.css(I)})}},10)}m._limitMinMaxDateTime(this.inst,
!0)}},_limitMinMaxDateTime:function(l,n){var m=this._defaults,p=new Date(l.selectedYear,l.selectedMonth,l.selectedDay);if(this._defaults.showTimepicker){if(null!==a.datepicker._get(l,"minDateTime")&&void 0!==a.datepicker._get(l,"minDateTime")&&p){var r=a.datepicker._get(l,"minDateTime"),v=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);if(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal||null===this.microsecMinOriginal)this.hourMinOriginal=
m.hourMin,this.minuteMinOriginal=m.minuteMin,this.secondMinOriginal=m.secondMin,this.millisecMinOriginal=m.millisecMin,this.microsecMinOriginal=m.microsecMin;l.settings.timeOnly||v.getTime()===p.getTime()?(this._defaults.hourMin=r.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=r.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=r.getSeconds(),this.second<=this._defaults.secondMin?
(this.second=this._defaults.secondMin,this._defaults.millisecMin=r.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=r.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,
this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,
this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==a.datepicker._get(l,"maxDateTime")&&void 0!==a.datepicker._get(l,"maxDateTime")&&p){r=a.datepicker._get(l,"maxDateTime");v=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);if(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal||null===this.millisecMaxOriginal)this.hourMaxOriginal=m.hourMax,this.minuteMaxOriginal=m.minuteMax,this.secondMaxOriginal=m.secondMax,this.millisecMaxOriginal=m.millisecMax,
this.microsecMaxOriginal=m.microsecMax;l.settings.timeOnly||v.getTime()===p.getTime()?(this._defaults.hourMax=r.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=r.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=r.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=r.getMilliseconds(),this.millisec>=this._defaults.millisecMax?
(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=r.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=
this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}null!==l.settings.minTime&&(m=new Date("01/01/1970 "+l.settings.minTime),this.hour<
m.getHours()?(this.hour=this._defaults.hourMin=m.getHours(),this.minute=this._defaults.minuteMin=m.getMinutes()):this.hour===m.getHours()&&this.minute<m.getMinutes()?this.minute=this._defaults.minuteMin=m.getMinutes():this._defaults.hourMin<m.getHours()?(this._defaults.hourMin=m.getHours(),this._defaults.minuteMin=m.getMinutes()):this._defaults.hourMin===m.getHours()===this.hour&&this._defaults.minuteMin<m.getMinutes()?this._defaults.minuteMin=m.getMinutes():this._defaults.minuteMin=0);null!==l.settings.maxTime&&
(l=new Date("01/01/1970 "+l.settings.maxTime),this.hour>l.getHours()?(this.hour=this._defaults.hourMax=l.getHours(),this.minute=this._defaults.minuteMax=l.getMinutes()):this.hour===l.getHours()&&this.minute>l.getMinutes()?this.minute=this._defaults.minuteMax=l.getMinutes():this._defaults.hourMax>l.getHours()?(this._defaults.hourMax=l.getHours(),this._defaults.minuteMax=l.getMinutes()):this._defaults.hourMax===l.getHours()===this.hour&&this._defaults.minuteMax>l.getMinutes()?this._defaults.minuteMax=
l.getMinutes():this._defaults.minuteMax=59);void 0!==n&&!0===n&&(n=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),l=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),m=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),p=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%
this._defaults.stepMillisec,10),r=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10),this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:n,step:this._defaults.stepHour}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:l,step:this._defaults.stepMinute}),
this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:m,step:this._defaults.stepSecond}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:p,step:this._defaults.stepMillisec}),
this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:r,step:this._defaults.stepMicrosec}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec)))}},_onTimeChange:function(){if(this._defaults.showTimepicker){var l=this.hour_slider?this.control.value(this,this.hour_slider,
"hour"):!1,n=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,m=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,p=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):!1,r=this.microsec_slider?this.control.value(this,this.microsec_slider,"microsec"):!1,v=this.timezone_select?this.timezone_select.val():!1,y=this._defaults,B=y.pickerTimeFormat||y.timeFormat,t=y.pickerTimeSuffix||y.timeSuffix;"object"===typeof l&&(l=!1);"object"===
typeof n&&(n=!1);"object"===typeof m&&(m=!1);"object"===typeof p&&(p=!1);"object"===typeof r&&(r=!1);"object"===typeof v&&(v=!1);!1!==l&&(l=parseInt(l,10));!1!==n&&(n=parseInt(n,10));!1!==m&&(m=parseInt(m,10));!1!==p&&(p=parseInt(p,10));!1!==r&&(r=parseInt(r,10));!1!==v&&(v=v.toString());var u=y[12>l?"amNames":"pmNames"][0],x=l!==parseInt(this.hour,10)||n!==parseInt(this.minute,10)||m!==parseInt(this.second,10)||p!==parseInt(this.millisec,10)||r!==parseInt(this.microsec,10)||0<this.ampm.length&&12>
l!==(-1!==a.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&v!==this.timezone.toString();x&&(!1!==l&&(this.hour=l),!1!==n&&(this.minute=n),!1!==m&&(this.second=m),!1!==p&&(this.millisec=p),!1!==r&&(this.microsec=r),!1!==v&&(this.timezone=v),this.inst||(this.inst=a.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0));this.support.ampm&&(this.ampm=u);this.formattedTime=a.datepicker.formatTime(y.timeFormat,this,y);this.$timeObj&&(B===y.timeFormat?this.$timeObj.val(this.formattedTime+
t):this.$timeObj.val(a.datepicker.formatTime(B,this,y)+t),this.$timeObj[0].setSelectionRange&&this.$timeObj[0].setSelectionRange(this.$timeObj[0].selectionStart,this.$timeObj[0].selectionEnd));this.timeDefined=!0;x&&this._updateDateTime()}},_onSelectHandler:function(){var l=this._defaults.onSelect||this.inst.settings.onSelect,n=this.$input?this.$input[0]:null;l&&n&&l.apply(n,[this.formattedDateTime,this])},_updateDateTime:function(l){l=this.inst||l;var n=a.datepicker._daylightSavingAdjust(0<l.currentYear?
new Date(l.currentYear,l.currentMonth,l.currentDay):new Date(l.selectedYear,l.selectedMonth,l.selectedDay)),m=a.datepicker._get(l,"dateFormat"),p=a.datepicker._getFormatConfig(l),r=null!==n&&this.timeDefined;m=this.formattedDate=a.datepicker.formatDate(m,null===n?new Date:n,p);""===l.lastVal&&(l.currentYear=l.selectedYear,l.currentMonth=l.selectedMonth,l.currentDay=l.selectedDay);if(!0===this._defaults.timeOnly&&!1===this._defaults.timeOnlyShowDate)m=this.formattedTime;else if(!0!==this._defaults.timeOnly&&
(this._defaults.alwaysSetTime||r)||!0===this._defaults.timeOnly&&!0===this._defaults.timeOnlyShowDate)m+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix;this.formattedDateTime=m;this._defaults.showTimepicker?this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly?(this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate)):this.$altInput?(this.$input.val(m),l="",r=null!==this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,
m=null!==this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix,this._defaults.timeOnly||(l=this._defaults.altFormat?a.datepicker.formatDate(this._defaults.altFormat,null===n?new Date:n,p):this.formattedDate)&&(l+=r),l=null!==this._defaults.altTimeFormat?l+(a.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+m):l+(this.formattedTime+m),this.$altInput.val(l)):this.$input.val(m):this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&
this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var l=a.datepicker._getInst(this.$input.get(0)),n=a.datepicker._get(l,"timepicker");if(n&&n._defaults.timeOnly&&l.input.val()!==l.lastVal)try{a.datepicker._updateDatepicker(l)}catch(m){a.timepicker.log(m)}}},_controls:{slider:{create:function(l,n,m,p,r,v,y){var B=l._defaults.isRTL;return n.prop("slide",null).slider({orientation:"horizontal",value:B?-1*p:p,min:B?-1*v:r,max:B?-1*r:v,step:y,slide:function(t,u){l.control.value(l,
a(this),m,B?-1*u.value:u.value);l._onTimeChange()},stop:function(t,u){l._onSelectHandler()}})},options:function(l,n,m,p,r){if(l._defaults.isRTL){if("string"===typeof p)return"min"===p||"max"===p?void 0!==r?n.slider(p,-1*r):Math.abs(n.slider(p)):n.slider(p);l=p.min;m=p.max;p.min=p.max=null;void 0!==l&&(p.max=-1*l);void 0!==m&&(p.min=-1*m);return n.slider(p)}return"string"===typeof p&&void 0!==r?n.slider(p,r):n.slider(p)},value:function(l,n,m,p){return l._defaults.isRTL?void 0!==p?n.slider("value",
-1*p):Math.abs(n.slider("value")):void 0!==p?n.slider("value",p):n.slider("value")}},select:{create:function(l,n,m,p,r,v,y){for(var B='<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="'+m+'" data-min="'+r+'" data-max="'+v+'" data-step="'+y+'">',t=l._defaults.pickerTimeFormat||l._defaults.timeFormat;r<=v;r+=y)B+='<option value="'+r+'"'+(r===p?" selected":"")+">",B="hour"===m?B+a.datepicker.formatTime(a.trim(t.replace(/[^ht ]/ig,"")),{hour:r},l._defaults):"millisec"===
m||"microsec"===m||10<=r?B+r:B+("0"+r.toString()),B+="</option>";B+="</select>";n.children("select").remove();a(B).appendTo(n).change(function(u){l._onTimeChange();l._onSelectHandler();l._afterInject()});return n},options:function(l,n,m,p,r){m={};var v=n.children("select");if("string"===typeof p){if(void 0===r)return v.data(p);m[p]=r}else m=p;return l.control.create(l,n,v.data("unit"),v.val(),0<=m.min?m.min:v.data("min"),m.max||v.data("max"),m.step||v.data("step"))},value:function(l,n,m,p){l=n.children("select");
return void 0!==p?l.val(p):l.val()}}}});a.fn.extend({timepicker:function(l){l=l||{};var n=Array.prototype.slice.call(arguments);"object"===typeof l&&(n[0]=a.extend(l,{timeOnly:!0}));return a(this).each(function(){a.fn.datetimepicker.apply(a(this),n)})},datetimepicker:function(l){l=l||{};var n=arguments;return"string"===typeof l?"getDate"===l||"option"===l&&2===n.length&&"string"===typeof n[1]?a.fn.datepicker.apply(a(this[0]),n):this.each(function(){var m=a(this);m.datepicker.apply(m,n)}):this.each(function(){var m=
a(this);m.datepicker(a.timepicker._newInst(m,l)._defaults)})}});a.datepicker.parseDateTime=function(l,n,m,p,r){l=k(l,n,m,p,r);l.timeObj&&(n=l.timeObj,l.date.setHours(n.hour,n.minute,n.second,n.millisec),l.date.setMicroseconds(n.microsec));return l.date};a.datepicker.parseTime=function(l,n,m){m=g(g({},a.timepicker._defaults),m||{});l.replace(/'.*?'/g,"").indexOf("Z");var p=function(v,y,B){var t=function(w,C){var A=[];w&&a.merge(A,w);C&&a.merge(A,C);A=a.map(A,function(z){return z.replace(/[.*+?|()\[\]{}\\]/g,
"\\$&")});return"("+A.join("|")+")?"},u="^"+v.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(w){var C=w.length;switch(w.charAt(0).toLowerCase()){case "h":return 1===C?"(\\d?\\d)":"(\\d{"+C+"})";case "m":return 1===C?"(\\d?\\d)":"(\\d{"+C+"})";case "s":return 1===C?"(\\d?\\d)":"(\\d{"+C+"})";case "l":return"(\\d?\\d?\\d)";case "c":return"(\\d?\\d?\\d)";case "z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case "t":return t(B.amNames,B.pmNames);default:return"("+w.replace(/'/g,
"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(A){return"\\"+A})+")?"}}).replace(/\s/g,"\\s?")+B.timeSuffix+"$";v=function(w){w=w.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g);var C={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(w)for(var A=0;A<w.length;A++)-1===C[w[A].toString().charAt(0)]&&(C[w[A].toString().charAt(0)]=A+1);return C}(v);var x="";y=y.match(new RegExp(u,"i"));u={hour:0,minute:0,second:0,millisec:0,microsec:0};return y?(-1!==v.t&&(void 0===y[v.t]||
0===y[v.t].length?(x="",u.ampm=""):(x=-1!==a.inArray(y[v.t].toUpperCase(),a.map(B.amNames,function(w,C){return w.toUpperCase()}))?"AM":"PM",u.ampm=B["AM"===x?"amNames":"pmNames"][0])),-1!==v.h&&(u.hour="AM"===x&&"12"===y[v.h]?0:"PM"===x&&"12"!==y[v.h]?parseInt(y[v.h],10)+12:Number(y[v.h])),-1!==v.m&&(u.minute=Number(y[v.m])),-1!==v.s&&(u.second=Number(y[v.s])),-1!==v.l&&(u.millisec=Number(y[v.l])),-1!==v.c&&(u.microsec=Number(y[v.c])),-1!==v.z&&void 0!==y[v.z]&&(u.timezone=a.timepicker.timezoneOffsetNumber(y[v.z])),
u):!1},r=function(v,y,B){try{var t=new Date("2012-01-01 "+y);if(isNaN(t.getTime())&&(t=new Date("2012-01-01T"+y),isNaN(t.getTime())&&(t=new Date("01/01/2012 "+y),isNaN(t.getTime()))))throw"Unable to parse time with native Date: "+y;return{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisec:t.getMilliseconds(),microsec:t.getMicroseconds(),timezone:-1*t.getTimezoneOffset()}}catch(u){try{return p(v,y,B)}catch(x){a.timepicker.log("Unable to parse \ntimeString: "+y+"\ntimeFormat: "+
v)}}return!1};return"function"===typeof m.parse?m.parse(l,n,m):"loose"===m.parse?r(l,n,m):p(l,n,m)};a.datepicker.formatTime=function(l,n,m){m=m||{};m=a.extend({},a.timepicker._defaults,m);n=a.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},n);var p=m.amNames[0],r=parseInt(n.hour,10);11<r&&(p=m.pmNames[0]);return l=l.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(v){switch(v){case "HH":return("0"+r).slice(-2);case "H":return r;case "hh":return("0"+e(r)).slice(-2);
case "h":return e(r);case "mm":return("0"+n.minute).slice(-2);case "m":return n.minute;case "ss":return("0"+n.second).slice(-2);case "s":return n.second;case "l":return("00"+n.millisec).slice(-3);case "c":return("00"+n.microsec).slice(-3);case "z":return a.timepicker.timezoneOffsetString(null===n.timezone?m.timezone:n.timezone,!1);case "Z":return a.timepicker.timezoneOffsetString(null===n.timezone?m.timezone:n.timezone,!0);case "T":return p.charAt(0).toUpperCase();case "TT":return p.toUpperCase();
case "t":return p.charAt(0).toLowerCase();case "tt":return p.toLowerCase();default:return v.replace(/'/g,"")}})};a.datepicker._base_selectDate=a.datepicker._selectDate;a.datepicker._selectDate=function(l,n){var m=this._getInst(a(l)[0]),p=this._get(m,"timepicker");p&&m.settings.showTimepicker?(p._limitMinMaxDateTime(m,!0),p=m.inline,m.inline=m.stay_open=!0,this._base_selectDate(l,n),m.inline=p,m.stay_open=!1,this._notifyChange(m),this._updateDatepicker(m)):this._base_selectDate(l,n)};a.datepicker._base_updateDatepicker=
a.datepicker._updateDatepicker;a.datepicker._updateDatepicker=function(l){var n=l.input[0];if(!a.datepicker._curInst||a.datepicker._curInst===l||!a.datepicker._datepickerShowing||a.datepicker._lastInput===n)if("boolean"!==typeof l.stay_open||!1===l.stay_open)this._base_updateDatepicker(l),(n=this._get(l,"timepicker"))&&n._addTimePicker(l)};a.datepicker._base_doKeyPress=a.datepicker._doKeyPress;a.datepicker._doKeyPress=function(l){var n=a.datepicker._getInst(l.target),m=a.datepicker._get(n,"timepicker");
if(m&&a.datepicker._get(n,"constrainInput")){var p=m.support.ampm,r=null!==m._defaults.showTimezone?m._defaults.showTimezone:m.support.timezone;n=a.datepicker._possibleChars(a.datepicker._get(n,"dateFormat"));m=m._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,p?"APM":"").replace(/Tt/g,p?"AaPpMm":"").replace(/tT/g,p?"AaPpMm":"").replace(/T/g,p?"AP":"").replace(/tt/g,p?"apm":"").replace(/t/g,p?"ap":"")+" "+m._defaults.separator+m._defaults.timeSuffix+(r?m._defaults.timezoneList.join(""):
"")+m._defaults.amNames.join("")+m._defaults.pmNames.join("")+n;p=String.fromCharCode(void 0===l.charCode?l.keyCode:l.charCode);return l.ctrlKey||" ">p||!n||-1<m.indexOf(p)}return a.datepicker._base_doKeyPress(l)};a.datepicker._base_updateAlternate=a.datepicker._updateAlternate;a.datepicker._updateAlternate=function(l){var n=this._get(l,"timepicker");if(n){var m=n._defaults.altField;if(m){var p=this._getDate(l),r=a.datepicker._getFormatConfig(l),v=n._defaults.altSeparator?n._defaults.altSeparator:
n._defaults.separator;var y=n._defaults.altTimeSuffix?n._defaults.altTimeSuffix:n._defaults.timeSuffix;y=""+(a.datepicker.formatTime(null!==n._defaults.altTimeFormat?n._defaults.altTimeFormat:n._defaults.timeFormat,n,n._defaults)+y);n._defaults.timeOnly||n._defaults.altFieldTimeOnly||null===p||(y=n._defaults.altFormat?a.datepicker.formatDate(n._defaults.altFormat,p,r)+v+y:n.formattedDate+v+y);a(m).val(l.input.val()?y:"")}}else a.datepicker._base_updateAlternate(l)};a.datepicker._base_doKeyUp=a.datepicker._doKeyUp;
a.datepicker._doKeyUp=function(l){var n=a.datepicker._getInst(l.target),m=a.datepicker._get(n,"timepicker");if(m&&m._defaults.timeOnly&&n.input.val()!==n.lastVal)try{a.datepicker._updateDatepicker(n)}catch(p){a.timepicker.log(p)}return a.datepicker._base_doKeyUp(l)};a.datepicker._base_gotoToday=a.datepicker._gotoToday;a.datepicker._gotoToday=function(l){var n=this._getInst(a(l)[0]);this._base_gotoToday(l);if(l=this._get(n,"timepicker")){var m=a.timepicker.timezoneOffsetNumber(l.timezone),p=new Date;
p.setMinutes(p.getMinutes()+p.getTimezoneOffset()+parseInt(m,10));this._setTime(n,p);this._setDate(n,p);l._onSelectHandler()}};a.datepicker._disableTimepickerDatepicker=function(l){var n=this._getInst(l);if(n){var m=this._get(n,"timepicker");a(l).datepicker("getDate");m&&(n.settings.showTimepicker=!1,m._defaults.showTimepicker=!1,m._updateDateTime(n))}};a.datepicker._enableTimepickerDatepicker=function(l){var n=this._getInst(l);if(n){var m=this._get(n,"timepicker");a(l).datepicker("getDate");m&&(n.settings.showTimepicker=
!0,m._defaults.showTimepicker=!0,m._addTimePicker(n),m._updateDateTime(n))}};a.datepicker._setTime=function(l,n){var m=this._get(l,"timepicker");if(m){var p=m._defaults;m.hour=n?n.getHours():p.hour;m.minute=n?n.getMinutes():p.minute;m.second=n?n.getSeconds():p.second;m.millisec=n?n.getMilliseconds():p.millisec;m.microsec=n?n.getMicroseconds():p.microsec;m._limitMinMaxDateTime(l,!0);m._onTimeChange();m._updateDateTime(l)}};a.datepicker._setTimeDatepicker=function(l,n,m){if(l=this._getInst(l)){var p=
this._get(l,"timepicker");p&&(this._setDateFromField(l),n&&("string"===typeof n?(p._parseTime(n,m),m=new Date,m.setHours(p.hour,p.minute,p.second,p.millisec),m.setMicroseconds(p.microsec)):(m=new Date(n.getTime()),m.setMicroseconds(n.getMicroseconds())),"Invalid Date"===m.toString()&&(m=void 0),this._setTime(l,m)))}};a.datepicker._base_setDateDatepicker=a.datepicker._setDateDatepicker;a.datepicker._setDateDatepicker=function(l,n){var m=this._getInst(l),p=n;if(m){"string"===typeof n&&(p=new Date(n),
p.getTime()||(this._base_setDateDatepicker.apply(this,arguments),p=a(l).datepicker("getDate")));var r=this._get(m,"timepicker");if(p instanceof Date){var v=new Date(p.getTime());v.setMicroseconds(p.getMicroseconds())}else v=p;r&&v&&(r.support.timezone||null!==r._defaults.timezone||(r.timezone=-1*v.getTimezoneOffset()),a.timepicker.timezoneAdjust(p,a.timepicker.timezoneOffsetString(-p.getTimezoneOffset()),r.timezone),v=a.timepicker.timezoneAdjust(v,a.timepicker.timezoneOffsetString(-v.getTimezoneOffset()),
r.timezone));this._updateDatepicker(m);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(l,v,!0)}};a.datepicker._base_getDateDatepicker=a.datepicker._getDateDatepicker;a.datepicker._getDateDatepicker=function(l,n){var m=this._getInst(l);if(m){var p=this._get(m,"timepicker");return p?(void 0===m.lastVal&&this._setDateFromField(m,n),l=this._getDate(m),n=p.$altInput&&p._defaults.altFieldTimeOnly?p.$input.val()+" "+p.$altInput.val():"INPUT"!==p.$input.get(0).tagName&&p.$altInput?
p.$altInput.val():p.$input.val(),l&&p._parseTime(n,!m.settings.timeOnly)&&(l.setHours(p.hour,p.minute,p.second,p.millisec),l.setMicroseconds(p.microsec),null!=p.timezone&&(p.support.timezone||null!==p._defaults.timezone||(p.timezone=-1*l.getTimezoneOffset()),l=a.timepicker.timezoneAdjust(l,p.timezone,a.timepicker.timezoneOffsetString(-l.getTimezoneOffset())))),l):this._base_getDateDatepicker(l,n)}};a.datepicker._base_parseDate=a.datepicker.parseDate;a.datepicker.parseDate=function(l,n,m){try{var p=
this._base_parseDate(l,n,m)}catch(r){if(0<=r.indexOf(":"))p=this._base_parseDate(l,n.substring(0,n.length-(r.length-r.indexOf(":")-2)),m),a.timepicker.log("Error parsing the date string: "+r+"\ndate string = "+n+"\ndate format = "+l);else throw r;}return p};a.datepicker._base_formatDate=a.datepicker._formatDate;a.datepicker._formatDate=function(l,n,m,p){return(n=this._get(l,"timepicker"))?(n._updateDateTime(l),n.$input.val()):this._base_formatDate(l)};a.datepicker._base_optionDatepicker=a.datepicker._optionDatepicker;
a.datepicker._optionDatepicker=function(l,n,m){var p=this._getInst(l);if(!p)return null;if(p=this._get(p,"timepicker")){var r=null,v=null,y=null,B=p._defaults.evnts,t={};if("string"===typeof n)if("minDate"===n||"minDateTime"===n)r=m;else if("maxDate"===n||"maxDateTime"===n)v=m;else if("onSelect"===n)y=m;else{if(B.hasOwnProperty(n)){if("undefined"===typeof m)return B[n];t[n]=m;var u={}}}else if("object"===typeof n)for(x in n.minDate?r=n.minDate:n.minDateTime?r=n.minDateTime:n.maxDate?v=n.maxDate:n.maxDateTime&&
(v=n.maxDateTime),B)B.hasOwnProperty(x)&&n[x]&&(t[x]=n[x]);for(x in t)t.hasOwnProperty(x)&&(B[x]=t[x],u||=a.extend({},n),delete u[x]);if(u&&d(u))return;r?(r=0===r?new Date:new Date(r),p._defaults.minDate=r,p._defaults.minDateTime=r):v?(v=0===v?new Date:new Date(v),p._defaults.maxDate=v,p._defaults.maxDateTime=v):y&&(p._defaults.onSelect=y);if(r||v){p=a(l);var x=p.datetimepicker("getDate");l=this._base_optionDatepicker.call(a.datepicker,l,u||n,m);p.datetimepicker("setDate",x);return l}}return void 0===
m?this._base_optionDatepicker.call(a.datepicker,l,n):this._base_optionDatepicker.call(a.datepicker,l,u||n,m)};var d=function(l){for(var n in l)if(l.hasOwnProperty(n))return!1;return!0},g=function(l,n){a.extend(l,n);for(var m in n)if(null===n[m]||void 0===n[m])l[m]=n[m];return l},c=function(l){var n=l.replace(/'.*?'/g,"").toLowerCase(),m=function(p,r){return-1!==p.indexOf(r)?!0:!1};return{hour:m(n,"h"),minute:m(n,"m"),second:m(n,"s"),millisec:m(n,"l"),microsec:m(n,"c"),timezone:m(n,"z"),ampm:m(n,"t")&&
m(l,"h"),iso8601:m(l,"Z")}},e=function(l){l%=12;0===l&&(l=12);return String(l)},h=function(l,n){return l&&l[n]?l[n]:a.timepicker._defaults[n]},f=function(l,n){var m=h(n,"separator");n=h(n,"timeFormat").split(m).length;var p=l.split(m),r=p.length;return 1<r?{dateString:p.splice(0,r-n).join(m),timeString:p.splice(0,n).join(m)}:{dateString:l,timeString:""}},k=function(l,n,m,p,r){m=f(m,r);l=a.datepicker._base_parseDate(l,m.dateString,p);if(""===m.timeString)return{date:l};n=a.datepicker.parseTime(n,m.timeString,
r);if(!n)throw"Wrong time format";return{date:l,timeObj:n}},q=function(l,n){l&&l.timezone_select&&l.timezone_select.val(-(n||new Date).getTimezoneOffset())};a.timepicker=new b;a.timepicker.timezoneOffsetString=function(l,n){if(isNaN(l)||840<l||-720>l)return l;var m=l%60;n=n?":":"";l=(0<=l?"+":"-")+("0"+Math.abs((l-m)/60)).slice(-2)+n+("0"+Math.abs(m)).slice(-2);return"+00:00"===l?"Z":l};a.timepicker.timezoneOffsetNumber=function(l){var n=l.toString().replace(":","");return"Z"===n.toUpperCase()?0:
/^(\-|\+)\d{4}$/.test(n)?("-"===n.substr(0,1)?-1:1)*(60*parseInt(n.substr(1,2),10)+parseInt(n.substr(3,2),10)):parseInt(l,10)};a.timepicker.timezoneAdjust=function(l,n,m){n=a.timepicker.timezoneOffsetNumber(n);m=a.timepicker.timezoneOffsetNumber(m);isNaN(m)||l.setMinutes(l.getMinutes()+-n- -m);return l};a.timepicker.timeRange=function(l,n,m){return a.timepicker.handleRange("timepicker",l,n,m)};a.timepicker.datetimeRange=function(l,n,m){a.timepicker.handleRange("datetimepicker",l,n,m)};a.timepicker.dateRange=
function(l,n,m){a.timepicker.handleRange("datepicker",l,n,m)};a.timepicker.handleRange=function(l,n,m,p){function r(B,t){var u=n[l]("getDate"),x=m[l]("getDate");B=B[l]("getDate");if(null!==u){var w=new Date(u.getTime()),C=new Date(u.getTime());w.setMilliseconds(w.getMilliseconds()+p.minInterval);C.setMilliseconds(C.getMilliseconds()+p.maxInterval);if(0<p.minInterval&&w>x)m[l]("setDate",w);else if(0<p.maxInterval&&C<x)m[l]("setDate",C);else if(u>x)t[l]("setDate",B)}}function v(B,t,u){B.val()&&(B=B[l].call(B,
"getDate"),null!==B&&0<p.minInterval&&("minDate"===u&&B.setMilliseconds(B.getMilliseconds()+p.minInterval),"maxDate"===u&&B.setMilliseconds(B.getMilliseconds()-p.minInterval)),B.getTime&&t[l].call(t,"option",u,B))}p=a.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},p);var y=!1;"timepicker"===l&&(y=!0,l="datetimepicker");a.fn[l].call(n,a.extend({timeOnly:y,onClose:function(B,t){r(a(this),m)},onSelect:function(B){v(a(this),m,"minDate")}},p,p.start));a.fn[l].call(m,a.extend({timeOnly:y,onClose:function(B,
t){r(a(this),n)},onSelect:function(B){v(a(this),n,"maxDate")}},p,p.end));r(n,m);v(n,m,"minDate");v(m,n,"maxDate");return a([n.get(0),m.get(0)])};a.timepicker.log=function(){window.console&&window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))};a.timepicker._util={_extendRemove:g,_isEmptyObject:d,_convert24to12:e,_detectSupport:c,_selectLocalTimezone:q,_computeEffectiveSetting:h,_splitDateTime:f,_parseDateTimeInternal:k};Date.prototype.getMicroseconds||
(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(l){this.setMilliseconds(this.getMilliseconds()+Math.floor(l/1E3));this.microseconds=l%1E3;return this});a.timepicker.version="1.6.3"}});
(function(a,b){function d(e,h,f){if("string"!==typeof e)return{px:e,minimax:0};var k=e.match(/([<>])?=?\s*([.\d]+)\s*([eimnptx%]*)s?/i);e=k[1];var q=parseFloat(k[2]);k=k[3].toLowerCase();var l=-1;switch(k){case "pt":case "in":case "cm":case "mm":l={pt:4/3,"in":96,cm:96/2.54,mm:96/25.4}[k]*q;break;case "em":h=parseFloat;f=window.getComputedStyle?getComputedStyle(document.body).fontSize:"16px";l=h(f)*q;break;case "%":h&&("string"!==typeof h&&h.jquery||(h=a(h)),l=(f?h.parent().height():h.parent().width())*
(q/100));break;default:l=q}return{px:l,minimax:">"==e?-1:"<"==e?1:0}}var g=0,c={open:{"class":"ui-multiselect-open",icon:'<span class="ui-icon ui-icon-triangle-1-s"></span',title:"Open"},close:{"class":"ui-multiselect-close",icon:'<span class="ui-icon ui-icon-circle-close"></span>',title:"Close"},checkAll:{"class":"ui-multiselect-all",icon:'<span class="ui-icon ui-icon-check"></span>',text:"Check all",title:"Check all"},uncheckAll:{"class":"ui-multiselect-none",icon:'<span class="ui-icon ui-icon-closethick"></span>',
text:"Uncheck all",title:"Uncheck all"},flipAll:{"class":"ui-multiselect-flip",icon:'<span class="ui-icon ui-icon-arrowrefresh-1-w"></span>',text:"Flip all",title:"Flip all"},collapse:{icon:'<span class="ui-icon ui-icon-minusthick"></span>',title:"Collapse"},expand:{icon:'<span class="ui-icon ui-icon-plusthick"></span>',title:"Expand"},collapseAll:{"class":"ui-multiselect-collapseall",icon:'<span class="ui-icon ui-icon-minus"></span>',text:"Collapse all",title:"Collapse all"},expandAll:{"class":"ui-multiselect-expandall",
icon:'<span class="ui-icon ui-icon-plus"></span>',text:"Expand all",title:"Expand all"}};a.widget("ech.multiselect",{options:{buttonWidth:225,menuWidth:null,menuHeight:200,resizableMenu:!1,appendTo:null,position:{},zIndex:null,classes:"",header:["checkAll","uncheckAll"],linkInfo:null,noneSelectedText:"Select options",selectedText:"# of # selected",selectedList:0,selectedListSeparator:", ",maxSelected:null,openEffect:null,closeEffect:null,autoOpen:!1,htmlText:[],wrapText:["button","header","options"],
listbox:!1,addInputNames:!0,disableInputsOnToggle:!0,groupsSelectable:!0,groupsCollapsable:!1,groupColumns:!1,groupColumnsWidth:!1},_getAppendEl:function(){var e=this.options.appendTo;e&&(e=e.jquery?e:e.nodeType?a(e):a(e).eq(0));e&&e[0]||(e=this.element.closest(".ui-front, dialog"));e.length||(e=a(document.body));return e},_buildButton:function(){var e=this.options.wrapText||[];e=(this.$button=a(document.createElement("button"))).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all"+
(-1<e.indexOf("button")?"":" ui-multiselect-nowrap")+(this.options.classes?" "+this.options.classes:"")).attr({type:"button",title:this.element[0].title,tabIndex:this.element[0].tabIndex,id:this.element[0].id?this.element[0].id+"_ms":null}).prop("aria-haspopup",!0).html(this._linkHTML('<span class="{{class}}" title="{{title}}">{{icon}}</span>',"open"));this.$buttonlabel=a(document.createElement("span")).html(this.options.noneSelectedText||this.element[0].placeholder).appendTo(e);return e},_buildHeaderHtml:function(){if(!this.options.header)return"";
if("string"===typeof this.options.header)return"<li>"+this.options.header+"</li>";var e="";if(this.options.header.constructor==Array)for(var h=0;h<this.options.header.length;h++){var f=this.options.header[h];f&&f in this.linkInfo&&(!this.options.maxSelected||"checkAll"!==f)&&-1===["open","close","collapse","expand"].indexOf(f)&&(e+=this._linkHTML('<li><a class="{{class}}" title="{{title}}">{{icon}}<span>{{text}}</span></a></li>',f))}if(this.options.header.constructor==Object){var k=Object.keys(this.options.header);
for(h=0;h<k.length;h++){var q=k[h];(f=this.options.header[q])&&f in this.linkInfo&&(!this.options.maxSelected||"checkAll"!==f)&&-1===["open","close","collapse","expand"].indexOf(f)&&(e+=this._linkHTML('<li><a class="{{class}}" title="{{title}}">{{icon}}<span>'+q+"</span></a></li>",f))}}return e},_create:function(){var e=this.element,h=this.options;this.linkInfo=a.extend(!0,{},c,h.linkInfo||{});this._selectWidth=e.outerWidth();e.hide();h.htmlText=h.htmlText||[];var f=h.wrapText=h.wrapText||[];this.speed=
a.fx.speeds._default;this._isOpen=!1;this._namespaceID=this.eventNamespace;this.multiselectID=g++;this.$headerLinkContainer=a(document.createElement("ul")).addClass("ui-helper-reset").html(this._buildHeaderHtml()+(h.listbox?"":this._linkHTML('<li class="{{class}}"><a class="{{class}}" title="{{title}}">{{icon}}</a></li>',"close")));var k=(this.$header=a(document.createElement("div"))).addClass("ui-multiselect-header ui-widget-header ui-corner-all ui-helper-clearfix").append(this.$headerLinkContainer);
f=(this.$checkboxes=a(document.createElement("ul"))).addClass("ui-multiselect-checkboxes ui-helper-reset"+(-1<f.indexOf("options")?"":" ui-multiselect-nowrap"));k=(this.$menu=a(document.createElement("div"))).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all"+(e[0].multiple?"":" ui-multiselect-single")+(h.listbox?" ui-multiselect-listbox":"")+(this.options.classes?" "+this.options.classes:"")).append(k,f);if(h.listbox)k.insertAfter(e);else{f=this._buildButton();f.insertAfter(e);
e=this._getAppendEl();e.append(k);if(!h.zIndex&&!e.hasClass("ui-front")){var q=this.element.closest(".ui-front, dialog");h.zIndex=Math.max(q&&parseInt(q.css("z-index"),10)+1||0,e&&parseInt(e.css("z-index"),10)+1||0)}h.zIndex&&k.css("z-index",h.zIndex);h.position=a.extend({my:"left top",at:"left bottom",of:f},h.position||{})}this._bindEvents();this.refresh(!0)},_linkHTML:function(e,h){var f=this;return e.replace(/{{(.*?)}}/ig,function(k,q){return f.linkInfo[h][q]}).replace("<span></span>","")},_init:function(){var e=
this.element[0];!1!==this.options.header?this.$headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none, .ui-multiselect-flip").toggle(!!e.multiple):this.$header.hide();this.options.autoOpen&&!this.options.listbox&&this.open();e.disabled&&this.disable()},_makeOption:function(e){var h=this.element.get(0),f=h.id||this.multiselectID,k="ui-multiselect-"+this.multiselectID+"-"+(e.id||f+"-option-"+this.inputIdCounter++),q=h.multiple;h=e.disabled;var l=e.selected,n=document.createElement("input");
f={type:q?"checkbox":"radio",id:k,title:e.title||null,value:e.value,name:this.options.addInputNames?"multiselect_"+f:null,checked:l?"checked":null,"aria-selected":l?"true":null,disabled:h?"disabled":null,"aria-disabled":h?"true":null};for(var m in f)null!==f[m]&&n.setAttribute(m,f[m]);m=e.attributes;f=m.length;for(var p=0;p<f;p++){var r=m[p];/^data\-.+/.test(r.name)&&n.setAttribute(r.name,r.value)}m=document.createElement("span");this.htmlAllowedFor("options")?m.innerHTML=e.innerHTML:m.textContent=
e.textContent;if(f=e.getAttribute("data-image-src"))p=document.createElement("img"),p.setAttribute("src",f),m.insertBefore(p,m.firstChild);f=document.createElement("label");f.setAttribute("for",k);e.title&&f.setAttribute("title",e.title);f.className+=(h?" ui-state-disabled":"")+(l&&!q?" ui-state-active":"")+" ui-corner-all";f.appendChild(n);f.appendChild(m);k=document.createElement("li");k.className=(h?"ui-multiselect-disabled ":"")+(this.options.groupColumns?" ui-multiselect-columns":"")+(e.className||
"");this.options.groupColumnsWidth&&(k.style.width=this.options.groupColumnsWidth+"px");k.appendChild(f);return k},_buildOptionList:function(){var e=this,h=[];this.inputIdCounter=0;this.element.children().each(function(){if("OPTGROUP"===this.tagName.toUpperCase()){var f=[];a(this).children().each(function(){f.push(e._makeOption(this))});var k=e.options.groupsCollapsable?a(document.createElement("button")).attr({title:e.linkInfo.collapse.title,type:"button"}).addClass("ui-state-default ui-corner-all ui-multiselect-collapser").html(e.linkInfo.collapse.icon):
null,q=a(document.createElement("a")).addClass("ui-multiselect-grouplabel"+(e.options.groupsSelectable?" ui-multiselect-selectable":"")).html(this.getAttribute("label")),l=a(document.createElement("ul")).append(f);k=a(document.createElement("li")).addClass("ui-multiselect-optgroup"+(e.options.groupColumns?" ui-multiselect-columns":"")+(this.className?" "+this.className:"")).append(k,q,l);e.options.groupColumnsWidth&&k.css("width",e.options.groupColumnsWidth+"px");h.push(k)}else h.push(e._makeOption(this))});
this.$checkboxes.empty().append(h)},refresh:function(e){var h=this.element;!1!==this.options.header&&this.$headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none, .ui-multiselect-flip").toggle(!!h[0].multiple);this._buildOptionList();this._updateCache();this.options.listbox?(this._isOpen||(this.$menu.show(),this._isOpen=!0),this._setMenuWidth(),this._setMenuHeight()):(this._setButtonWidth(),this.update(!0));e||this._trigger("refresh")},_updateCache:function(){this._savedMenuHeight=this._savedMenuWidth=
this._savedButtonWidth=0;this.$header=this.$menu.children(".ui-multiselect-header");this.$checkboxes=this.$menu.children(".ui-multiselect-checkboxes");this.$labels=this.$menu.find("label:not(.ui-multiselect-filter-label)");this.$inputs=this.$labels.children("input");this.element.is(':data("ech-multiselectfilter")')&&this.element.data("ech-multiselectfilter").updateCache(!0)},resync:function(e){var h=this.$inputs,f=this.element.find("option");if(h.length===f.length){var k={};h.not(e?":disabled":"").each(function(){k[this.value]=
this});f.not(e?":disabled":"").each(function(){this.value in k&&(k[this.value].checked=this.selected)});this._trigger("resync");this.update()}else this.refresh()},update:function(e){if(!this.options.listbox){var h=this.options,f=h.selectedList,k=h.selectedText,q=this.$inputs,l=q.length;q=q.filter(":checked");var n=q.length;f=n?"function"===typeof k?k.call(this,n,l,q.get()):/\d/.test(f)&&0<f&&n<=f?q.map(function(){return a(this).next().text().replace(/\n$/,"")}).get().join(h.selectedListSeparator):
k.replace("#",n).replace("#",l):h.noneSelectedText;this._setButtonValue(f,e);-1===h.wrapText.indexOf("button")&&this._setButtonWidth(!0);this._isOpen&&this._savedButtonHeight!=this.$button.outerHeight(!1)&&this.position()}},_setButtonValue:function(e,h){this.$buttonlabel[this.htmlAllowedFor("button")?"html":"text"](e);h&&(this.$button[0].defaultValue=e)},_bindButtonEvents:function(){function e(){h[h._isOpen?"close":"open"]();return!1}var h=this;this.$button.on({click:e,keydown:a.proxy(h._handleButtonKeyboardNav,
h),mouseenter:function(){this.classList.contains("ui-state-disabled")||this.classList.add("ui-state-hover")},mouseleave:function(){this.classList.remove("ui-state-hover")},focus:function(){this.classList.contains("ui-state-disabled")||this.classList.add("ui-state-focus")},blur:function(){this.classList.remove("ui-state-focus")}}).find("span").on("click.multiselect,click",e)},_handleButtonKeyboardNav:function(e){if(this._isOpen||this.element[0].multiple||38!==e.which&&40!==e.which)switch(e.which){case 27:case 37:case 38:this.close();
break;case 40:case 39:this.open()}else{var h=this.$inputs,f=h.index(h.filter(":checked"));38===e.which&&f?h.eq(f-1).trigger("click"):40===e.which&&f<h.length-1&&h.eq(f+1).trigger("click")}},_bindCheckboxEvents:function(){var e=this;e.$checkboxes.on("click.multiselect",".ui-multiselect-grouplabel",function(h){h.preventDefault();if(!e.options.groupsSelectable)return!1;var f=a(this).next("ul").children(":not(.ui-multiselect-excluded)").find("input").not(":disabled"),k=f.get(),q=this.textContent;if(!1!==
e._trigger("beforeoptgrouptoggle",h,{inputs:k,label:q})){var l=e.options.maxSelected;l&&e.$inputs.filter(":checked").length+f.length>l||(e._toggleChecked(f.filter(":checked").length!==f.length,f),e._trigger("optgrouptoggle",h,{inputs:k,label:q,checked:k.length?k[0].checked:null}))}}).on("click.multiselect",".ui-multiselect-collapser",function(h){var f=a(this),k=f.parent(),q=k.find(".ui-multiselect-grouplabel").first().html(),l=e.linkInfo,n=k.hasClass("ui-multiselect-collapsed");!1!==e._trigger("beforecollapsetoggle",
h,{label:q,collapsed:n})&&(k.toggleClass("ui-multiselect-collapsed"),f.attr("title",n?l.collapse.title:l.expand.title).html(n?l.collapse.icon:l.expand.icon),e.options.listbox||e._setMenuHeight(!0),e._trigger("collapsetoggle",h,{label:q,collapsed:!n}))}).on("mouseenter.multiselect",".ui-multiselect-collapser",function(h){this.classList.add("ui-state-hover")}).on("mouseleave.multiselect",".ui-multiselect-collapser",function(h){this.classList.remove("ui-state-hover")}).on("mouseenter.multiselect","label",
function(h,f){if(!this.classList.contains("ui-state-disabled")){h=e.$checkboxes[0];var k=h.scrollLeft,q=h.scrollTop,l=window.pageXOffset,n=window.pageYOffset;e.$labels.removeClass("ui-state-hover");a(this).addClass("ui-state-hover").find("input").trigger("focus");f&&f.allowScroll||(h.scrollLeft=k,h.scrollTop=q,window.scrollTo(l,n))}}).on("keydown.multiselect","label",function(h){if(82!==h.which&&!(111<h.which&&124>h.which))switch(h.preventDefault(),h.which){case 9:h.shiftKey?(e.$menu.find(".ui-state-hover").removeClass("ui-state-hover"),
e.$header.find("li").last().find("a").trigger("focus")):e.close();break;case 27:e.close();break;case 38:case 40:case 37:case 39:e._traverse(h.which,this);break;case 13:case 32:a(this).find("input")[0].click();break;case 65:h.altKey&&e.checkAll();break;case 70:h.altKey&&e.flipAll();break;case 85:h.altKey&&e.uncheckAll()}}).on("click.multiselect","input",function(h){var f=a(this),k=this.value,q=this.checked,l=e.element,n=l.find("option"),m=l[0].multiple,p=e.$inputs,r=p.filter(":checked").length,v=e.options,
y=e.htmlAllowedFor("options")?"html":"text";y=f.parent().find("span")[y]();v=v.maxSelected;if(this.disabled||!1===e._trigger("click",h,{value:k,text:y,checked:q}))h.preventDefault();else{if(v&&q&&r>v)return!1!==e._trigger("maxselected",h,{labels:e.$labels,inputs:p})&&e.buttonMessage("<center><b>LIMIT OF "+(r-1)+" REACHED!</b></center>"),this.checked=!1,h.preventDefault(),!1;this.focus();f.prop("aria-selected",q);n.each(function(){this.selected=this.value===k?q:m&&this.selected});m||(e.$labels.removeClass("ui-state-active"),
f.closest("label").toggleClass("ui-state-active",q),e.close());l.trigger("change");setTimeout(a.proxy(e.update,e),10)}})},_bindHeaderEvents:function(){var e=this;e.$header.on("click.multiselect","a",function(h){var f={"ui-multiselect-close":"close","ui-multiselect-all":"checkAll","ui-multiselect-none":"uncheckAll","ui-multiselect-flip":"flipAll","ui-multiselect-collapseall":"collapseAll","ui-multiselect-expandall":"expandAll"};for(hdgClass in f)if(this.classList.contains(hdgClass))return e[f[hdgClass]](),
h.preventDefault(),!1}).on("keydown.multiselect","a",function(h){switch(h.which){case 27:e.close();break;case 9:var f=a(h.target);if(h.shiftKey&&!f.parent().prev().length&&!e.$header.find(".ui-multiselect-filter").length||!f.parent().next().length&&!e.$labels.length&&!h.shiftKey)e.close(),h.preventDefault()}})},_setResizable:function(){this.options.resizableMenu&&"resizable"in a.ui&&(this.$menu.show(),this.$menu.resizable({containment:"parent",handles:"s",helper:"ui-multiselect-resize",stop:function(e,
h){h.size.width=h.originalSize.width;a(this).outerWidth(h.originalSize.width);!1!==this._trigger("resize",e,h)&&(this.options.menuHeight=h.size.height);this._setMenuHeight(!0)}}),this.$menu.hide())},_bindEvents:function(){this.options.listbox||this._bindButtonEvents();this._bindHeaderEvents();this._bindCheckboxEvents();this._setResizable();this.document.on("mousedown"+this._namespaceID+" wheel"+this._namespaceID+" mousewheel"+this._namespaceID,function(e){e=e.target;this._isOpen&&(this.$button?e!==
this.$button[0]&&!a.contains(this.$button[0],e):1)&&e!==this.$menu[0]&&!a.contains(this.$menu[0],e)&&this.close()}.bind(this));a(this.element[0].form).on("reset"+this._namespaceID,function(){setTimeout(this.refresh.bind(this),10)}.bind(this))},_setButtonWidth:function(e){if(!this._savedButtonWidth||e){e=this._selectWidth||this._getBCRWidth(this.element);var h=this.options.buttonWidth||"";if(/\d/.test(h)){var f=d(h,this.element),k=f.px;f=f.minimax;e=0>f?Math.max(e,k):0<f?Math.min(e,k):k}else h=h.toLowerCase();
"auto"!==h&&this.$button.outerWidth(e);this._savedButtonWidth=e}},_setMenuWidth:function(e){if(!this._savedMenuWidth||e){e=this.options.listbox?this._selectWidth:this._savedButtonWidth||this._getBCRWidth(this.$button);var h=this.options.menuWidth||"";if(/\d/.test(h)){var f=d(h,this.element),k=f.px;f=f.minimax;e=0>f?Math.max(e,k):0<f?Math.min(e,k):k}else h=h.toLowerCase();"auto"!==h?(this.$menu.outerWidth(e),this._savedMenuWidth=e):(this.$menu.addClass("ui-multiselect-measure"),e=this.$header.outerWidth(!0)+
this._jqWidthFix(this.$header),h=this.$checkboxes.outerWidth(!0)+this._jqWidthFix(this.$checkboxes),this.$menu.removeClass("ui-multiselect-measure"),e=Math.max(-1<this.options.wrapText.indexOf("header")?0:e,h),this.$menu.width(e),this._savedMenuWidth=this.$menu.outerWidth(!1))}},_setMenuHeight:function(e){if(!this._savedMenuHeight||e){var h=a(window).height();e=this.options.menuHeight||"";var f=!1,k=4;if(/\d/.test(e)){var q=this.$header.filter(":visible").outerHeight(!0),l=this.$menu.outerHeight(!1)-
this.$menu.height(),n=this.$checkboxes.outerHeight(!1)-this.$checkboxes.height();e=d(e,this.element,!0).px;h=Math.min(e,h)-q-l-n}else"size"===e.toLowerCase()&&(f=!0,k=this.element[0].size||k);var m="hidden",p=0,r=4,v=-1;this.$checkboxes.find("li:not(.ui-multiselect-optgroup),a").filter(":visible").each(function(){0>v&&(v=this.offsetTop);r=this.offsetTop+this.offsetHeight-v+4;if(f&&++p>=k||r>h)return m="auto",f||(r=h),!1});this.$checkboxes.css("overflow",m).height(r);this._savedMenuHeight=this.$menu.outerHeight(!1)}},
_getBCRWidth:function(e){if(!e||e.jquery&&!e[0])return null;e=e.jquery?e[0].getBoundingClientRect():e.getBoundingClientRect();return e.right-e.left},_jqWidthFix:function(e){return!e||e.jquery&&!e[0]?null:e.jquery?this._getBCRWidth(e[0])-e.outerWidth(!1):this._getBCRWidth(e)-a(e).outerWidth(!1)},_traverse:function(e,h){h=a(h);e=38===e||37===e;var f=h.parent()[e?"prevAll":"nextAll"]("li:not(:disabled, .ui-multiselect-optgroup):visible").first();f.length||(f=h.parents(".ui-multiselect-optgroup")[e?"prev":
"next"]());f.length?f.find("label").filter(":visible")[e?"last":"first"]().trigger("mouseover",{allowScroll:!0}):(h=this.$checkboxes,h.find("label").filter(":visible")[e?"last":"first"]().trigger("mouseover",{allowScroll:!0}),h.scrollTop(e?h.height():0))},_toggleState:function(e,h){return function(){var f="!"===h?!this[e]:h;this.disabled||(this[e]=f);f?this.setAttribute("aria-"+e,!0):this.removeAttribute("aria-"+e)}},_toggleChecked:function(e,h,f){var k=this,q=k.element;h=h&&h.length?h:k.$inputs;
f&&(h=k._isOpen?h.closest("li").not(".ui-multiselect-excluded").find("input").not(":disabled"):h.not(":disabled"));h.each(k._toggleState("checked",e));h.eq(0).trigger("focus");k.update();var l={};h.each(function(){l[this.value]=!0});q.find("option").each(function(){!this.disabled&&l[this.value]&&k._toggleState("selected",e).call(this)});h.length&&q.trigger("change")},_toggleDisabled:function(e,h){if(this.$button)this.$button.prop({disabled:e,"aria-disabled":e})[e?"addClass":"removeClass"]("ui-state-disabled");
if(this.options.disableInputsOnToggle){var f="undefined"===typeof h?this.$inputs:this._multiselectOptgroupFilter(h).find("input");if(e){f=f.filter(":enabled").get();for(var k=0,q=f.length;k<q;k++)f[k].setAttribute("disabled","disabled"),f[k].setAttribute("aria-disabled","disabled"),f[k].classList.add("ui-multiselect-disabled"),f[k].parentNode.classList.add("ui-state-disabled")}else for(f=f.filter(".ui-multiselect-disabled:disabled").get(),k=0,q=f.length;k<q;k++)f[k].removeAttribute("disabled"),f[k].removeAttribute("aria-disabled"),
f[k].classList.remove("ui-multiselect-disabled"),f[k].parentNode.classList.remove("ui-state-disabled")}("undefined"===typeof h?this.element:this._nativeOptgroupFilter(h).find("option")).prop({disabled:e,"aria-disabled":e})},open:function(){var e=this.$button;if(!(!1===this._trigger("beforeopen")||e.hasClass("ui-state-disabled")||this._isOpen||this.options.listbox)){var h=this.$menu,f=this.$header,k=this.$labels,q=this.$inputs.filter(":checked:not(.ui-state-disabled)"),l=this.options.openEffect,n=
window.pageXOffset,m=window.pageYOffset;this.$checkboxes.scrollTop(0);h.css("display","block");this._setMenuWidth();this._setMenuHeight();this.position();l&&(h.css("display","none"),"string"==typeof l?h.show(l,this.speed):"object"==typeof l&&l.constructor==Array?h.show(l[0],l[1]||this.speed):"object"==typeof l&&l.constructor==Object&&h.show(l));h=f.find(".ui-multiselect-filter");h.length?h.first().find("input").trigger("focus"):q.length?q.eq(0).trigger("focus").parent("label").eq(0).trigger("mouseover").trigger("mouseenter"):
k.length?k.filter(":not(.ui-state-disabled)").eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus"):f.find("a").first().trigger("focus");window.scrollTo(n,m);e.addClass("ui-state-active");this._isOpen=!0;this._trigger("open")}},close:function(){if(!1!==this._trigger("beforeclose")&&!this.options.listbox){var e=this.$menu,h=this.options.closeEffect,f=this.$button;h?"string"==typeof h?e.hide(h,this.speed):"object"==typeof h&&h.constructor==Array?e.hide(h[0],h[1]||this.speed):
"object"==typeof h&&h.constructor==Object&&e.hide(h):e.css("display","none");f.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this.element.trigger("blur");this._isOpen=!1;this._trigger("close");f.trigger("focus")}},position:function(){var e=this.$button;this._savedButtonHeight=e.outerHeight(!1);if(a.ui&&a.ui.position)this.$menu.position(this.options.position);else{var h={};h.top=e.offset().top+this._savedButtonHeight;h.left=e.offset().left;this.$menu.offset(h)}},enable:function(e){this._toggleDisabled(!1,
e)},disable:function(e){this._toggleDisabled(!0,e)},checkAll:function(e){this._trigger("beforeCheckAll");this.options.maxSelected||("undefined"===typeof e?this._toggleChecked(!0):this._toggleChecked(!0,this._multiselectOptgroupFilter(e).find("input")),this._trigger("checkAll"))},uncheckAll:function(e){this._trigger("beforeUncheckAll");"undefined"===typeof e?this._toggleChecked(!1):this._toggleChecked(!1,this._multiselectOptgroupFilter(e).find("input"));this.element[0].multiple||this.$inputs.filter(":checked").length||
(this.element[0].selectedIndex=-1);this._trigger("uncheckAll")},flipAll:function(e){this._trigger("beforeFlipAll");var h="undefined"!==typeof e,f=this.options.maxSelected,k=this.$inputs.length,q=this.$inputs.filter(":checked").length;e=h?this._multiselectOptgroupFilter(e).find("input"):null;var l=h?e.length:0,n=h?e.filter(":checked").length:0;!f||f>=(h?q-n+l-n:k-q)?(h?this._toggleChecked("!",e):this._toggleChecked("!"),this._trigger("flipAll")):this.buttonMessage("<center><b>Flip All Not Permitted.</b></center>")},
collapseAll:function(e){this._trigger("beforeCollapseAll");("undefined"===typeof e?this.$checkboxes.find(".ui-multiselect-optgroup"):this._multiselectOptgroupFilter(e)).addClass("ui-multiselect-collapsed").children(".ui-multiselect-collapser").attr("title",this.linkInfo.expand.title).html(this.linkInfo.expand.icon);this._trigger("collapseAll")},expandAll:function(e){this._trigger("beforeExpandAll");("undefined"===typeof e?this.$checkboxes.find(".ui-multiselect-optgroup"):this._multiselectOptgroupFilter(e)).removeClass("ui-multiselect-collapsed").children(".ui-multiselect-collapser").attr("title",
this.linkInfo.collapse.title).html(this.linkInfo.collapse.icon);this._trigger("expandAll")},buttonMessage:function(e){var h=this;h.$buttonlabel.html(e);setTimeout(function(){h.update()},1E3)},getChecked:function(){return this.$inputs.filter(":checked")},getUnchecked:function(){return this.$inputs.filter(":not(:checked)")},destroy:function(){a.Widget.prototype.destroy.call(this);this.document.off(this._namespaceID);a(this.element[0].form).off(this._namespaceID);this.options.listbox||this.$button.remove();
this.$menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.$menu},getNamespaceID:function(){return this._namespaceID},getButton:function(){return this.$button},getMenu:function(){return this.$menu},getLabels:function(){return this.$labels},getCollapsed:function(){return this.$checkboxes.find(".ui-multiselect-collapsed")},value:function(e){return"undefined"!==typeof e?(this.element.val(e),this.resync(),this.element):this.element.val()},
htmlAllowedFor:function(e){return-1<this.options.htmlText.indexOf(e)},addOption:function(e,h,f){var k=this.htmlAllowedFor("options")?"html":"text";e=a(document.createElement("option")).attr(e)[k](h);h=e.get(0);"undefined"===typeof f?(this.element.append(e),this.$checkboxes.append(this._makeOption(h))):(this._nativeOptgroupFilter(f).append(e),this._multiselectOptgroupFilter(f).append(this._makeOption(h)));this._updateCache()},_nativeOptgroupFilter:function(e){return this.element.children("OPTGROUP").filter(function(h){return"number"===
typeof e?h===e:this.getAttribute("label")===e})},_multiselectOptgroupFilter:function(e){return this.$menu.find(".ui-multiselect-optgroup").filter(function(h){return"number"===typeof e?h===e:this.getElementsByClassName("ui-multiselect-grouplabel")[0].textContent===e})},removeOption:function(e){e&&(this.element.find("option[value="+e+"]").remove(),this.$labels.find("input[value="+e+"]").parents("li").remove(),this._updateCache())},_setOption:function(e,h){var f=this.$header,k=this.$menu;switch(e){case "header":"boolean"===
typeof h?f.toggle(h):"string"===typeof h&&(this.$headerLinkContainer.children("li:not(:last-child)").remove(),this.$headerLinkContainer.prepend("<li>"+h+"</li>"));break;case "checkAllText":case "uncheckAllText":case "flipAllText":case "collapseAllText":case "expandAllText":"checkAllText"===e&&this.options.maxSelected||f.find("a."+this.linkInfo[e.replace("Text","")]["class"]+" span").eq(-1).html(h);break;case "checkAllIcon":case "uncheckAllIcon":case "flipAllIcon":case "collapseAllIcon":case "expandAllIcon":"checkAllIcon"===
e&&this.options.maxSelected||f.find("a."+this.linkInfo[e.replace("Icon","")]["class"]+" span").eq(0).replaceWith(h);break;case "openIcon":k.find("span.ui-multiselect-open").html(h);break;case "closeIcon":k.find("a.ui-multiselect-close").html(h);break;case "buttonWidth":case "menuWidth":this.options[e]=h;this._setButtonWidth(!0);this._setMenuWidth(!0);break;case "menuHeight":this.options[e]=h;this._setMenuHeight(!0);break;case "selectedText":case "selectedList":case "maxSelected":case "noneSelectedText":case "selectedListSeparator":this.options[e]=
h;this.update(!0);break;case "classes":k.add(this.$button).removeClass(this.options.classes).addClass(h);break;case "multiple":f=this.element;!!f[0].multiple!==h&&(k.toggleClass("ui-multiselect-multiple",h).toggleClass("ui-multiselect-single",!h),f[0].multiple=h,this.uncheckAll(),this.refresh());break;case "position":null===h||a.isEmptyObject(h)||(this.options.position=h);this.position();break;case "zIndex":this.options.zIndex=h;this.$menu.css("z-index",h);break;default:this.options[e]=h}a.Widget.prototype._setOption.apply(this,
arguments)},_parse2px:d});a.ui&&"dialog"in a.ui&&a.widget("ui.dialog",a.ui.dialog,{_allowInteraction:function(e){if(this._super(e)||a(e.target).closest(".ui-multiselect-menu").length)return!0}})})(jQuery);
(function(a){function b(c,e,h){var f;return function(){var k=this,q=arguments,l=h&&!f;clearTimeout(f);f=setTimeout(function(){f=null;h||c.apply(k,q)},e);l&&c.apply(k,q)}}var d=/[\-\[\]{}()*+?.,\\\^$|#\s]/g,g={contains:"{{term}}",beginsWith:"^{{term}}",endsWith:"{{term}}$",exactMatch:"^{{term}}$",containsNumber:"d",isNumeric:"^d+$",isNonNumeric:"^D+$"};a.widget("ech.multiselectfilter",{options:{label:"Filter:",placeholder:"Enter keywords",filterRule:"contains",searchGroups:!1,autoReset:!1,width:null,
debounceMS:250},_create:function(){var c=this.options,e=this.element;this.instance=e.data("ech-multiselect");this.$header=this.instance.$menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");this.$input=a(document.createElement("input")).attr({placeholder:c.placeholder,type:"search"}).css({width:"string"===typeof c.width?this.instance._parse2px(c.width,this.$header).px+"px":/\d/.test(c.width)?c.width+"px":null});this._bindInputEvents();if(this.options.autoReset)e.on("multiselectbeforeclose",
a.proxy(this._reset,this));c=a(document.createElement("label")).text(c.label).append(this.$input).addClass("ui-multiselect-filter-label");this.$wrapper=a(document.createElement("div")).addClass("ui-multiselect-filter").append(c).prependTo(this.$header);this.instance._isOpen&&this.instance._setMenuHeight(!0);this.updateCache();var h=this.instance,f=this.$input[0];h._oldToggleChecked=h._toggleChecked;h._toggleChecked=function(k,q){h._oldToggleChecked(k,q,!!f.value)}},_bindInputEvents:function(){this.$input.on({keydown:function(c){if(13===
c.which)c.preventDefault();else if(27===c.which)$element.multiselect("close"),c.preventDefault();else if(9===c.which&&c.shiftKey)$element.multiselect("close"),c.preventDefault();else if(c.altKey)switch(c.which){case 82:c.preventDefault();a(this).val("").trigger("input","");break;case 65:$element.multiselect("checkAll");break;case 85:$element.multiselect("uncheckAll");break;case 70:$element.multiselect("flipAll");break;case 76:$element.multiselect("instance").$labels.first().trigger("mouseenter")}},
input:a.proxy(b(this._handler,this.options.debounceMS),this),search:a.proxy(this._handler,this)})},_handler:function(c){var e=this.$input[0].value.toLowerCase().replace(/^\s+|\s+$/g,""),h=this.options.filterRule||"contains",f=new RegExp((g[h]||h).replace("{{term}}",e.replace(d,"\\$&")),"i"),k=!!this.options.searchGroups;h=this.instance.$checkboxes;var q=this.cache;this.$rows.toggleClass("ui-multiselect-excluded",!!e);h=h.children().map(function(l){var n=this,m=a(n),p=!1;return n.classList.contains("ui-multiselect-optgroup")&&
(m=m.find("li"),k&&f.test(q[l]))?(n.classList.remove("ui-multiselect-excluded"),m.removeClass("ui-multiselect-excluded"),m.find("input").get()):m.map(function(r){return f.test(q[l+"."+r])?(p||(n.classList.remove("ui-multiselect-excluded"),p=!0),this.classList.remove("ui-multiselect-excluded"),this.getElementsByTagName("input")[0]):null})});e&&this._trigger("filter",c,h);!this.instance.options.listbox&&this.instance._isOpen&&(this.instance._setMenuHeight(!0),this.instance.position())},_reset:function(){this.$input.val("");
var c=document.createEvent("Event");c.initEvent("reset",!0,!0);this.$input.get(0).dispatchEvent(c);this._handler(c)},updateCache:function(c){var e={};this.instance.$checkboxes.children().each(function(h){var f=a(this);this.classList.contains("ui-multiselect-optgroup")&&(e[h]=this.getElementsByClassName("ui-multiselect-grouplabel")[0].textContent,f=f.find("li"));f.each(function(k){e[h+"."+k]=this.textContent})});this.cache=e;this.$rows=this.instance.$checkboxes.find("li");c&&this._handler()},widget:function(){return this.$wrapper},
destroy:function(){a.Widget.prototype.destroy.call(this);this.$input.val("").trigger("keyup").off("keydown input search");this.instance.$menu.find(".ui-multiselect-header").removeClass("ui-multiselect-hasfilter");this.$wrapper.remove()}})})(jQuery);"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return this.substring(0,a.length)===a});var S3={gis:{}};S3.gis.options={};S3.timeline={};S3.JSONRequest={};
S3.urlDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};
S3.queryString={parse:function(a){return"string"!==typeof a?{}:(a=a.trim().replace(/^(\?|#)/,""))?a.trim().split("&").reduce(function(b,d){var g=d.replace(/\+/g," ").split("=");d=g[0];g=g[1];d=S3.urlDecode(d);g=void 0===g?null:S3.urlDecode(g);b.hasOwnProperty(d)?Array.isArray(b[d])?b[d].push(g):b[d]=[b[d],g]:b[d]=g;return b},{}):{}},stringify:function(a){return a?Object.keys(a).map(function(b){var d=a[b];return Array.isArray(d)?d.map(function(g){return encodeURIComponent(b)+"="+encodeURIComponent(g)}).join("&"):
encodeURIComponent(b)+"="+encodeURIComponent(d)}).join("&"):""}};S3.uid=function(){return(+new Date/1E3*65536+65535*Math.random()>>0).toString(16)};
S3.addTooltips=function(){$.cluetip.defaults.cluezIndex=9999;$(".tooltip").cluetip({activation:"hover",sticky:!1,splitTitle:"|"});$('label[title][title!=""]').cluetip({splitTitle:"|",showTitle:!1});$(".tooltipbody").cluetip({activation:"hover",sticky:!1,splitTitle:"|",showTitle:!1});var a='<img src="'+S3.Ap.concat("/static/img/cross2.png")+'" alt="close"></img>';$(".stickytip").cluetip({activation:"hover",sticky:!0,closePosition:"title",closeText:a,splitTitle:"|"});$(".ajaxtip").cluetip({activation:"click",
sticky:!0,closePosition:"title",closeText:a,width:380});$(".htmltip").cluetip({activation:"hover",sticky:!1,local:!0,attribute:"show",width:380})};
S3.addModals=function(){$("a.s3_add_resource_link").attr("href",function(a,b){a=b;if(-1==b.indexOf("caller=")){var d=$(this).parents("tr").attr("id");d||=$(this).parent().parent().attr("id");d||=$(this).parents(".form-row").attr("id");d||=$(this).parents(".control-group").attr("id");d&&(d=d.replace(/__row_comment/,"").replace(/__row/,""),a=b+"&caller="+d)}return a});$(".s3_add_resource_link, .s3_modal").off(".S3Modal").on("click.S3Modal",function(){var a=this.title,b=this.href,d=b.indexOf("caller=");
if(-1!=d){var g=b.slice(d+7);d=g.indexOf("&");-1!=d&&(g=g.slice(0,d));d=$("#"+g);d.hasClass("multiselect-widget")&&d.multiselect("close")}var c=S3.uid(),e=$("<iframe>",{id:c,src:"","class":"loading",marginWidth:"0",marginHeight:"0",frameBorder:"0"}).appendTo("body");e.on("load",function(){$(this).attr("src")&&S3.popup_loaded(c)});var h=this;e.dialog({autoOpen:!1,title:a,minHeight:480,minWidth:320,modal:!0,closeText:"",open:function(){$(".ui-widget-overlay").on("click",function(){e.dialog("close")})},
close:function(){if(h.parent){var f=h.parent.$("iframe.ui-dialog-content"),k=f.width();f.width(0);window.setTimeout(function(){f.width(k)},300)}e.attr("src","").remove()}});e.attr("src",b).dialog("open");return!1})};S3.popup_loaded=function(a){if(window!=window.parent){var b=$(window.parent.document).find(".ui-dialog"),d=b.height();b.height(d+41);b=b.find("iframe");d=b.height();b.height(d+41)}b=$(".ui-dialog").width();$("#"+a).removeClass("loading").width(b).contents().find("#popup").show()};
S3.popup_remove=function(){$("iframe.ui-dialog-content").dialog("close")};S3.redraw_fns=["addModals","addTooltips"];S3.redraw=function(){for(var a=S3.redraw_fns,b=a.length,d=0;d<b;d++)S3[a[d]]()};$.widget("custom.iconselectmenu",$.ui.selectmenu,{_renderItem:function(a,b){var d=$("<li>",{text:b.label});b.disabled&&d.addClass("ui-state-disabled");var g=b.element;b=(b=b.element.attr("data-class"))?"ui-icon "+b:"ui-icon";$("<span>",{style:g.attr("data-style"),"class":b}).appendTo(d);return d.appendTo(a)}});
S3.getClientLocation=function(a){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){a.val(b.coords.latitude+"|"+b.coords.longitude+"|"+b.coords.accuracy)})};S3.confirmClick=function(a,b){if(S3.interactive)$(a).on("click",function(d){if(confirm(b))return!0;d.preventDefault();return!1})};
S3.showHidden=function(a,b,d){d=void 0===d?"":d+"_";a=$("#"+d+a);a.on("change",function(){var g;if(a.prop("checked"))for(g=0;g<b.length;g++){var c=b[g];c="#"+d+c;$(c+"__row, "+c+"__subheading, "+c+"__subheading1, "+c+"__subheading2").show()}else for(g=0;g<b.length;g++)c=b[g],c="#"+d+c,$(c+"__row, "+c+"__subheading, "+c+"__subheading1, "+c+"__subheading2").hide()});a.trigger("change")};
S3.trunk8=function(a,b,d){var g={fill:'&hellip; <a class="s3-truncate-more" href="#">'+d+"</a>"};b&&(g.lines=b);$(a).trunk8(g);$(".dl").on("listUpdate",function(){$(this).find(a).each(function(){void 0===this.trunk8&&$(this).trunk8(g)})});$(".dataTable").on("draw.dt",function(){$(this).find(a).each(function(){void 0===this.trunk8&&$(this).trunk8(g)})})};
S3.maxLength={init:function(a,b){var d=this.apply;if(b){var g=$("#"+a);g.next("div.maxLength_status").remove();g.after('<div class="maxLength_status"></div>');d(a,b);g.off("keyup.maxLength").on("keyup.maxLength",function(){d(a,b)})}else $("#"+a).removeClass("maxLength").off("keyup.maxLength").next("div.maxLength_status").remove()},apply:function(a,b){var d=i18n.characters_left||"characters left";a=$("#"+a);var g=a.val().length;g>=b?(a.addClass("maxLength"),a.val(a.val().substr(0,b))):a.removeClass("maxLength");
b-=g;0>b&&(b=0);a.next("div.maxLength_status").html(b+" "+d)}};
var S3SetNavigateAwayConfirm=function(a,b){"implicit"!==b&&(window.onbeforeunload=function(){return i18n.unsaved_changes})},S3ClearNavigateAwayConfirm=function(){window.onbeforeunload=function(){}},S3EnableNavigateAwayConfirm=function(){$(function(){0<$("[class=error]").length&&S3SetNavigateAwayConfirm();var a=$("form:not(.dt-wrapper,.filter-form,.pt-form)");$("input, textarea",a).on("keypress",S3SetNavigateAwayConfirm);$("select",a).change(S3SetNavigateAwayConfirm);a.on("submit",S3ClearNavigateAwayConfirm)})};
(function(a){function b(d){this.xhr=null;var g=a.extend({},a.ajaxS3Settings,d);this.options=g;this.successCallback=d.success;this.errorCallback=d.error;g.success=null;g.error=null;this.message=d.message;this.tryCount=0;this.retryLimit=g.retryLimit;this.alerts=[];this.ignoreStatus=g.ignoreStatus||[]}a.ajaxS3Settings={timeout:1E4,retryLimit:5,dataType:"json",async:!0,type:"GET"};b.prototype.onSuccess=function(d){var g=this.AjaxS3;g&&(g.tryCount=0,g.xhr=null,S3.hideAlerts(g.alerts),d&&d.message&&S3.showAlert(d.message,
"success"),(g=g.successCallback)&&g.apply(this,arguments))};b.prototype.onFailure=function(d,g){var c=this.AjaxS3;if(c){var e=d.status,h=d.readyState;h=!e&&0===h;if("abort"==g||h){if(c.tryCount=0,c.xhr=null,h)return}else if("timeout"==g){c.tryCount++;e=c.tryCount;h=c.message;if(e<=c.retryLimit){h=i18n.ajax_get+" "+(h?h:i18n.ajax_fmd)+"... "+i18n.ajax_rtr+" "+e;c.alerts.push(S3.showAlert(h,"warning"));c.send();return}c.xhr=null;h=i18n.ajax_wht+" "+e+" "+i18n.ajax_gvn;S3.showAlert(h,"error")}else 500==
e?S3.showAlert(i18n.ajax_500,"error"):-1==c.ignoreStatus.indexOf(e)&&(e=d.responseJSON,h=d.responseText,e&&e.message?S3.showAlert(e.message,"error"):h?S3.showAlert(h,"error"):S3.showAlert(i18n.ajax_dwn,"error"));(c=c.errorCallback)&&c.apply(this,arguments)}};b.prototype.start=function(){if(null===this.xhr){var d=this.message;d&&(d=i18n.ajax_get+" "+(d?d:i18n.ajax_fmd)+"...",this.alerts.push(S3.showAlert(d,"info")));this.send();return this}};b.prototype.send=function(){var d=this.options;d.AjaxS3=
this;this.xhr=a.ajax(d).done(function(){this.AjaxS3.onSuccess.apply(this,arguments)}).fail(function(){this.AjaxS3.onFailure.apply(this,arguments)})};b.prototype.abort=function(){this.xhr&&(this.xhr.abort(),this.xhr=null)};a.ajaxS3=function(d){return(new b(d)).start()};a.getS3=function(d,g,c,e,h,f){a.isFunction(g)&&(f=h,h=e,e=c,c=g,g=null);return a.ajaxS3({type:"GET",url:d,async:!f,data:g,dataType:e,message:h,success:c})};a.getJSONS3=function(d,g,c,e,h){a.isFunction(g)&&(h=e,e=c,c=g,g=null);h||=!1;
return a.getS3(d,g,c,"json",e,h)}})($);S3.showAlert=function(a,b,d){b||="success";var g=$("#alert-space");a=$('<div class="alert alert-'+b+'">'+a+"</div>");g.append(a).off(".s3").on("click.s3",".alert",function(){$(this).fadeOut(300).remove();d&&d();return!1});return a};S3.hideAlerts=function(a){"string"==typeof a?$(".alert-"+a).remove():a?a.forEach(function(b){b.remove()}):$("#alert-space").empty()};S3.fieldError=function(a,b){$(a).after('<div class="error" style="display: block;">'+b+"</div>")};
S3.unmask=function(a,b){var d=a+"_"+b+"_unmask";a=a+"_"+b;b=$("#"+d).text();b==i18n.password_view?(b=i18n.password_mask,$("#"+a).attr("type","text")):(b=i18n.password_view,$("#"+a).attr("type","password"));$("#"+d).text(b)};
var s3_viewMap=function(a,b,d,g,c){var e=S3.Ap.concat("/gis/display_feature/")+a,h=$("#map"),f=$("#iframe-map"),k=document.location.pathname.split("/");void 0===g&&(g=k[2]);void 0===c&&(c=k[3]);e+="?c="+g+"&f="+c;6<k.length&&$.isNumeric(k[6])?e+="&r="+k[6]:4<k.length&&$.isNumeric(k[4])&&(e+="&r="+k[4]);0==h.length||"True"==d?S3.openPopup(e+"&popup=1",!0):(g=function(){var q=$("#close-iframe-map");f.is(":visible")?q.css({display:""}):q.css({display:"none"})},d=function(){$("#iframe-map").slideUp("medium");
$("#close-iframe-map").css({display:"none"})},0==f.length?(a=$("<iframe id='iframe-map' data-feature='"+a+"' style='border-style:none' width='100%' height='"+b+"' marginWidth='0' marginHeight='0' src='"+e+"' >"),b=$("<a class='action-btn' id='close-iframe-map'>"+i18n.close_map+"</a>"),b.on("click",d),h.slideDown("medium"),h.append(a),h.append($('<div style="margin-bottom:10px">').append(b))):f.attr("data-feature")==a?f.slideToggle("medium",g):(f.attr({src:e,"data-feature":a}),f.slideDown("medium",
g)))},s3_viewMapMulti=function(a,b,d,g){a=S3.Ap.concat("/gis/display_feature//?module=")+a+"&resource="+b+"&instance="+d+"&jresource="+g;var c=$("#map").html();a='<iframe width="640" height="480" src="'+a+'"></iframe>';b=$('<a href="#">'+i18n.close_map+"</a>");b.on("click",function(e){$("#map").html(c);e.preventDefault()});$("#map").html(a);$("#map").append($("<div style='margin-bottom:10px'>").append(b))};S3.popupWin=null;
S3.openPopup=function(a,b){if(!S3.popupWin||S3.popupWin.closed){var d="width=640, height=480";!0===b&&(d+=",left="+(screen.width-640)/2+",top="+(screen.height-480)/2);S3.popupWin=window.open(a,"popupWin",d)}else S3.popupWin.trigger("focus")};
(function(){var a=function(f){if("string"==typeof f)var k='[name="'+f+'"]';else{var q=f.prefix?f.prefix:"default";f.alias&&(q+=f.alias);var l=f.inlineType||"sub",n=f.inlineRows;void 0===n&&(n=!0);"sub"==l?(f=f.name,k=n?'[name^="'+q+'"][name*="_i_'+f+'_edit_"]':'[name="'+q+"-"+f+'"]'):"link"==l&&(k='[name="link_'+q+'"]')}return k},b=function(f,k){f.siblings("."+k+"-throbber").length||f.after('<div class="'+k+'-throbber throbber">')},d=function(f,k){f=f.siblings("."+k+"-throbber");f.length&&f.remove()},
g=function(f,k,q){$("a#"+f+"_add").each(function(){var l=this.search,n=[],m=!1;l&&l.substring(1).split("&").forEach(function(p){S3.urlDecode(p.split("=")[0])!=k&&n.push(p)});void 0!==q&&null!==q&&(m=encodeURIComponent(k)+"="+encodeURIComponent(q),n.push(m),m=!0);l=n.length?"?"+n.join("&"):"";l=this.protocol+"//"+this.host+this.pathname+l+this.hash;l=$(this).attr("href",l);m?l.parent().show():l.parent().hide()})},c=function(f,k){var q=[],l="";if(0===f.length)((f=k.showEmptyField)||void 0===f)&&q.push('<option value="">'+
(k.msgNoRecords||"-")+"</option>");else{var n=k.fncPrep,m=null;if(n)try{m=n(f)}catch(t){}n=k.lookupField||"id";for(var p=k.fncRepresent,r,v,y,B=0;B<f.length;B++)r=f[B],v=r[n],0!==B||k.multiple||(l=v),y=p?p(r,m):r.name,r=r._tooltip?' title="'+r._tooltip+'"':"",q.push("<option"+r+' value="'+v+'">'+y+"</option>");k.optional&&(l=0,q.unshift('<option value=""></option>'))}return{options:q.join(""),defaultValue:l}},e=function(f,k,q,l,n){var m=!1;if(1<f.length)if("checkbox"==f.first().attr("type")){if(f.first().closest(".checkboxes-widget-s3")){s3_debug("filterOptionsS3 error: checkboxes-widget-s3 not supported, skipping");
return}}else m=!0;if(!m&&!n){var p=f.val();void 0===f.data("selected")&&f.data("selected",p)}m&&l.getWidgetHTML&&(s3_debug("filterOptionsS3 warning: getWidgetHTML=true not suitable for multiple target widgets (e.g. inline rows)"),f=f.first(),m=!1);m=m?f.first():f;if(p=m.data("update-request"))try{p.abort()}catch(t){}var r=l.lookupResource;if(""===q||null===q||void 0===q)f.val("").prop("disabled",!0),f.multiselect("instance")&&f.multiselect("refresh").multiselect("disable"),f.trigger("change"),g(r,
k);else{if(l.lookupURL)p=l.lookupURL,q&&(p=p.concat(q));else if(p=S3.Ap.concat("/",l.lookupPrefix,"/",r,".json"),q){var v=r+"."+k+"="+q;p=-1!=p.indexOf("?")?p.concat("&"+v):p.concat("?"+v)}if(v=l.tooltip)v="tooltip="+v,p=-1!=p.indexOf("?")?p.concat("&"+v):p.concat("?"+v);if((v=l.represent)||"undefined"==typeof v)p=-1!=p.indexOf("?")?p.concat("&represent=1"):p.concat("?represent=1");v=null;if(l.getWidgetHTML){v=l.targetWidget||f.attr("name");var y=$('[name = "'+v+'"]');v=!0;var B=!1;if(v=y.hasClass("groupedopts-widget")?
y.groupedopts("visible"):y.data("visible")||y.is(":visible"))B=!0,y.data("visible",!0),y.hasClass("groupedopts-widget")?y.groupedopts("hide"):y.hide(),b(y,r);v=$.ajaxS3({url:p,dataType:"html",success:function(t){var u=y;if(""!==t){var x=!1,w=!1;u.hasClass("groupedopts-widget")?x=!0:u.hasClass("multiselect-widget")&&(w=!0);var C;(x||w)&&"select"==u.prop("tagName").toLowerCase()&&(C=u.val());u.html(t).trigger("change").prop("disabled",!1);if(x||w){if(C){t=[];w=0;for(var A=C.length,z;w<A;w++)z=C[w],
u.find("option[value="+z+"]").length&&t.push(z);u.val(t).trigger("change")}x?u.groupedopts("refresh"):u.multiselect("refresh")}}else u.prop("disabled",!0);y=u;B&&(y.hasClass("groupedopts-widget")?y.find("option").length&&y.groupedopts("show"):y.show());d(y,r);g(r,k,q);n||S3ClearNavigateAwayConfirm()}})}else f.each(function(){var t=$(this);(t.hasClass("groupedopts-widget")?t.groupedopts("instance")&&t.groupedopts("visible"):t.hasClass("multiselect-widget")?t.multiselect("instance")&&t.multiselect("visible"):
t.data("visible")||t.is(":visible"))?(t.data("visible",!0),t.hasClass("groupedopts-widget")?t.groupedopts("hide"):t.hasClass("groupedopts-widget")?t.multiselect("hide"):t.hide(),b(t,r)):t.data("visible",!1)}),v=$.ajaxS3({url:p,dataType:"json",success:function(t){var u=c(t,l),x=0===t.length?!0:!1;f.each(function(){var w=$(this);a:if(w.hasClass("checkboxes-widget-s3"))s3_debug("filterOptionsS3 error: checkboxes-widget-s3 not supported, updateOptions aborted"),w=void 0;else{var C=u.options,A=u.defaultValue,
z=[];if(!x){var D;if(w.hasClass("checkboxes-widget-s3")){w=void 0;break a}else{(D=w.val())||(D=w.prop("value"));D||=w.data("selected");Array.isArray(D)||(D=D?[D]:[]);for(var F=0,E=D.length,G;F<E;F++)(G=D[F])&&$(C).filter("option[value="+G+"]").length&&z.push(G)}z.length&&(A=z)}"INPUT"==w.prop("tagName")&&(z=$("<select>").addClass(w.attr("class")).attr("id",w.attr("id")).attr("name",w.attr("name")).data("visible",w.data("visible")).hide(),w.replaceWith(z),w=z);z=""===C;w.html(C).val(A).trigger("change").prop("disabled",
z);w.hasClass("groupedopts-widget")?w.groupedopts("refresh"):w.hasClass("multiselect-widget")&&(w.multiselect("refresh"),z?w.multiselect("disable"):w.multiselect("enable"))}w.data("visible")&&(w.hasClass("groupedopts-widget")?x||w.groupedopts("show"):w.show());d(w,r)});g(r,k,q);n||S3ClearNavigateAwayConfirm()}});m.data("update-request",v)}},h=function(f){var k="";if("checkbox"==f.attr("type")){var q=f.closest(".checkboxes-widget-s3");q&&(f=q)}if(f.hasClass("checkboxes-widget-s3"))k=[],f.find("input:checked").each(function(){k.push($(this).val())});
else if(f.hasClass("s3-hierarchy-input")){if(k="",q=f.val())q=JSON.parse(q),q.constructor===Array?q.length&&(k=q[0]):q&&(k=q)}else 1==f.length&&(k=f.val());return[f,k]};$.filterOptionsS3=function(f){var k=f.trigger;k=f.event?f.event:"string"==typeof k?k:k.name;var q=f.lookupKey||k,l=a(f.trigger),n=a(f.target);if(n){var m=$(n);if(m.length){void 0!==m.attr("multiple")&&(f.multiple=!0);var p=m.closest("form");if(l&&(m=p.find(l),m.length)){$(l).each(function(){var v=$(this);var y=v.closest(".inline-form");
if(!y.length||!y.hasClass("empty-row")&&"none"!=y.css("display"))y="row"==f.scope?v.closest(".edit-row.inline-form,.add-row.inline-form"):p,v=h(v),y=y.find(n),e(y,q,v[1],f,!1)});var r="triggerUpdate."+k;p.off("change.s3options",l).on("change.s3options",l,function(){var v=h($(this));p.trigger(r,v)});p.on(r,function(v,y,B){v=("row"==f.scope?y.closest(".edit-row.inline-form,.add-row.inline-form"):p).find(n);e(v,q,B,f,!0)})}}}}})(jQuery);
(function(){$.cancelButtonS3=function(a){var b=$(".s3-cancel");if(b.length){var d=document.referrer;if(d&&d.split("?")[0].split("#")[0]!=document.URL.split("?")[0].split("#")[0]){var g=document.createElement("a");g.href=d;g.host==window.location.host&&0===g.pathname.lastIndexOf(S3.Ap,0)?b.attr("href",d):a?b.attr("href",a):b.hide()}else a?b.attr("href",a):b.hide()}}})(jQuery);
S3.slider=function(a,b,d,g,c){var e=$("#"+a),h="#"+a+"_slider";$(h).slider({min:b,max:d,step:g,value:c,slide:function(f,k){e.val(k.value)},change:function(){if(null==c){c=(b+d)/2;var f=c%g;0!=f&&(c=f<g/2?c-f:c+f);$(h).slider("option","value",c);$(h+" .ui-slider-handle").show();e.show().next().remove()}}});null==c&&($(h+" .ui-slider-handle").hide(),e.hide().after("<p>"+i18n.slider_help+"</p>"));e.closest("form").on("submit",function(){e.prop("disabled",!1);return!0})};
S3.range_slider=function(a,b,d,g,c,e,h){var f=$("#"+a),k=$("#"+b),q=$("#"+d);f.slider({range:!0,min:g,max:c,step:e,values:h,slide:function(l,n){k.val(n.values[0]);q.val(n.values[1]).closest("form").trigger("optionChanged")}});k.on("change.slider",function(){var l=k.val();""==l&&(l=g);f.slider("values",0,l)});q.on("change.slider",function(){var l=q.val();""==l&&(l=c);f.slider("values",1,l)})};
S3.reloadWithQueryStringVars=function(a){var b=location.search?location.search.substring(1).split("&"):[],d={},g=(location.search?location.href.replace(location.search,""):location.href)+"?";if(0<b.length)for(var c=0;c<b.length;c++){var e=b[c].split("=");d[e[0]]=e[1]}if(a)for(var h in a)d[h]=a[h];if(d){for(var f in d)g+=f+"="+d[f]+"&";g=g.substring(0,g.length-1);window.location.href=g}else window.location.href=location.href};
(function(){var a=function(){$(".mark-deduplicate").on("click",function(){var b=$("#markDuplicateURL").attr("href");b&&$.ajaxS3({type:"POST",url:b,data:{},dataType:"JSON",success:function(){$(".mark-deduplicate, .unmark-deduplicate, .deduplicate").toggleClass("hide")}})});$(".unmark-deduplicate").on("click",function(){var b=$("#markDuplicateURL").attr("href");b&&$.ajaxS3({type:"POST",url:b+"?remove=1",data:{},dataType:"JSON",success:function(){$(".mark-deduplicate, .unmark-deduplicate, .deduplicate").toggleClass("hide")}})});
$(".swap-button").on("click",function(){var b=this.id.slice(5),d=$("#original_"+b),g=d.attr("id"),c=d.attr("name"),e=d.parent().closest("td.mwidget");b=$("#duplicate_"+b);var h=b.attr("id"),f=b.attr("name"),k=b.parent().closest("td.mwidget");d.attr("id","swap_original_id");d.attr("name","swap_original_name");$("#dummy"+g).attr("id","dummy_swap_original_id");b.attr("id","swap_duplicate_id");b.attr("name","swap_duplicate_name");$("#dummy"+h).attr("id","dummy_swap_duplicate_id");e.before('<td id="swap_original_placeholder"></td>');
e=e.detach();k.before('<td id="swap_duplicate_placeholder"></td>');k=k.detach();$("#swap_original_placeholder").after(k);$("#swap_original_placeholder").remove();$("#swap_duplicate_placeholder").after(e);$("#swap_duplicate_placeholder").remove();d.attr("id",h);d.attr("name",f);$("#dummy_swap_original_id").attr("id","dummy"+h);b.attr("id",g);b.attr("name",c);$("#dummy_swap_duplicate").attr("id","dummy"+g)})};$(function(){$(".alert-error").hide().slideDown(300);$(".alert-error").on("click",function(){$(this).fadeOut("fast");
return!1});$(".alert-warning").hide().slideDown(300);$(".alert-warning").on("click",function(){$(this).fadeOut("fast");return!1});$(".alert-info").hide().slideDown(300);$(".alert-info").on("click",function(){$(this).fadeOut("fast");return!1});$(".alert-success").hide().slideDown(300);$(".alert-success").on("click",function(){$(this).fadeOut("fast");return!1});$("input[type='checkbox'].delete").on("click",function(){this.checked&&!confirm(i18n.delete_confirmation)&&(this.checked=!1)});var b=$("form .error[id]").eq(0).attr("id");
if(void 0!=b){b=b.replace("__error","");b=$("[name="+b+"]").attr("id");b=$("[for="+b+"]");try{window.scrollTo(0,b.offset().top),S3.FocusOnFirstField=!1}catch(g){}}S3.interactive&&($(document).on("click","a.delete-btn",function(g){if(confirm(i18n.delete_confirmation))return!0;g.preventDefault();return!1}),0!=S3.FocusOnFirstField&&$("select:visible,input:text:visible",'.form-container form:not(".auth_login")').first().not("select").trigger("focus"));$("input.int_amount").on("keyup",function(){this.value=
this.value.reverse().replace(/[^0-9\-,]|\-(?=.)/g,"").reverse()});$("input.float_amount").on("keyup",function(){this.value=this.value.reverse().replace(/[^0-9\-\.,]|[\-](?=.)|[\.](?=[0-9]*[\.])/g,"").reverse()});$('input[name="first_name"]').on("focusout",function(){this.value=this.value.charAt(0).toLocaleUpperCase()+this.value.substring(1)});S3.rtl&&($(".phone-widget").each(function(){var g=this.value;g&&"\u200e"!=g.charAt(0)&&(this.value="\u200e"+g)}),$(".phone-widget").on("focusout",function(){var g=
this.value;g&&("\u200e"!=g.charAt(0)?"+"==g.charAt(g.length-1)?this.value="\u200e+"+g.substr(0,g.length-2):this.value="\u200e"+g:"+"==g.charAt(g.length-1)&&(this.value="\u200e+"+g.substr(1,g.length-2)))}));$("#show-add-btn").on("click",function(){$("#show-add-btn").hide(10,function(){$("#list-add").slideDown("medium");$(".select-widget").selectmenu("refresh")})});S3.redraw();a();b=$("form");if(b.length){b.append("<input type='hidden' value='"+(new Date).getTimezoneOffset()+"' name='_utc_offset'>");
try{var d=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(g){}d&&b.append("<input type='hidden' value='"+d+"' name='_timezone'>")}$(".form-toggle").on("click",function(){var g=$(this),c=$(this).data("hidden");c=c&&"False"!=c;g.data("hidden",c?!1:!0).siblings().slideToggle("medium",function(){g.children("span").each(function(){$(this).text(c?$(this).data("off"):$(this).data("on")).siblings().toggle()})})});$("#menu-options-toggle,#list-filter-toggle").on("click",function(g){g.stopPropagation();
var c=$(this);g=c.data("status");var e="menu-options-toggle"==this.id?$("#menu-options"):$("#list-filter");"off"==g?e.hide().removeClass("hide-for-small-only").slideDown(200,function(){c.data("status","on").text(c.data("on"))}):e.slideUp(200,function(){e.addClass("hide-for-small-only").show();c.data("status","off").text(c.data("off"))})});$(".s3-download-button").on("click",function(g){g.preventDefault();g.stopPropagation();if(g=$(this).data("url")){var c=document.getElementById("s3-download");null==
c&&(c=document.createElement("iframe"),c.id="s3-download",c.style.visibility="hidden",document.body.appendChild(c));$("#s3-download").off("load").on("load",function(){var e=$(this);try{var h=JSON.parse(this.contentDocument.body.textContent).message}catch(f){e.dialog({title:"Download failed",width:500,height:300,close:function(){e.attr("src","").remove()}}).css({visibility:"visible",width:"100%"});return}alert(h)});c.src=g;return!1}})})})();
(function(a){a.fn.editableAriaShim=function(){this.attr({role:"button",tabindex:0});return this};a.fn.editable=function(d,g){if("disable"===d)a(this).data("disabled.editable",!0);else if("enable"===d)a(this).data("disabled.editable",!1);else if("destroy"===d)a(this).off(a(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");else{var c=a.extend({},a.fn.editable.defaults,{target:d},g),e=a.editable.types[c.type].plugin||function(){},h=a.editable.types[c.type].submit||
function(){},f=a.editable.types[c.type].buttons||a.editable.types.defaults.buttons,k=a.editable.types[c.type].content||a.editable.types.defaults.content,q=a.editable.types[c.type].element||a.editable.types.defaults.element,l=a.editable.types[c.type].reset||a.editable.types.defaults.reset,n=a.editable.types[c.type].destroy||a.editable.types.defaults.destroy,m=c.callback||function(){},p=c.intercept||function(t){return t},r=c.onedit||function(){},v=c.onsubmit||function(){},y=c.onreset||function(){},
B=c.onerror||l;c.tooltip&&a(this).attr("title",c.tooltip);return this.each(function(){var t=this;a(this).data("event.editable",c.event);a(this).html().trim()||a(this).html(c.placeholder);"destroy"===d?n.apply(a(this).find("form"),[c,t]):(a(this).on(c.event,function(u){if(!0!==a(this).data("disabled.editable")&&9!==u.which&&!t.editing&&!1!==r.apply(this,[c,t,u])){if(c.before&&"function"===typeof c.before)c.before(u);else if(c.before&&"function"!==typeof c.before)throw"The 'before' option needs to be provided as a function!";
u.preventDefault();u.stopPropagation();c.tooltip&&a(t).removeAttr("title");a(this).html().toLowerCase().replace(/(;|"|\/)/g,"")===c.placeholder.toLowerCase().replace(/(;|"|\/)/g,"")&&a(this).html("");t.editing=!0;t.revert=a(t).text();a(t).html("");var x=a("<form />");c.cssclass&&("inherit"===c.cssclass?x.attr("class",a(t).attr("class")):x.attr("class",c.cssclass));c.style&&("inherit"===c.style?(x.attr("style",a(t).attr("style")),x.css("display",a(t).css("display"))):x.attr("style",c.style));c.label&&
x.append("<label>"+c.label+"</label>");c.formid&&x.attr("id",c.formid);var w=q.apply(x,[c,t]);c.inputcssclass&&("inherit"===c.inputcssclass?w.attr("class",a(t).attr("class")):w.attr("class",c.inputcssclass));var C=!1;if(c.loadurl){var A=t.setTimeout(function(){w.disabled=!0},100);a(t).html(c.loadtext);u={};u[c.id]=t.id;"function"===typeof c.loaddata?a.extend(u,c.loaddata.apply(t,[t.revert,c])):a.extend(u,c.loaddata);a.ajax({type:c.loadtype,url:c.loadurl,data:u,async:!1,cache:!1,success:function(D){t.clearTimeout(A);
z=D;w.disabled=!1}})}else if(c.data){var z=c.data;"function"===typeof c.data&&(z=c.data.apply(t,[t.revert,c]))}else z=t.revert;k.apply(x,[z,c,t]);w.attr("name",c.name);"none"!==c.width&&(u=c.width-(w.outerWidth(!0)-c.width),w.width(u));f.apply(x,[c,t]);c.showfn&&"function"===typeof c.showfn&&x.hide();a(t).html("");a(t).append(x);c.showfn&&"function"===typeof c.showfn&&c.showfn(x);e.apply(x,[c,t]);x.find(":input:visible:enabled:first").trigger("focus");c.select&&w.trigger("select");a(this).on("keydown",
function(D){27===D.which?(D.preventDefault(),l.apply(x,[c,t])):13==D.which&&D.shiftKey&&(D.preventDefault(),x.trigger("submit"))});if("cancel"===c.onblur)w.on("blur",function(D){A=t.setTimeout(function(){l.apply(x,[c,t])},500)});else if("submit"===c.onblur)w.on("blur",function(D){A=t.setTimeout(function(){x.trigger("submit")},200)});else if("function"===typeof c.onblur)w.on("blur",function(D){!1===c.onblur.apply(t,[w.val(),c,x])&&l.apply(x,[c,t])});x.on("submit",function(D){D.preventDefault();D.stopPropagation();
if(C)return!1;C=!0;A&&t.clearTimeout(A);if(C=!1!==v.apply(x,[c,t]))if(C=!1!==h.apply(x,[c,t]))if("function"===typeof c.target){D=function(I,H){C=!1;!1!==H&&(a(t).html(I),t.editing=!1,m.apply(t,[t.innerText,c]),a(t).html().trim()||a(t).html(c.placeholder))};var F=c.target.apply(t,[w.val(),c,D]);!1!==F&&void 0!==F&&D(F,F)}else{var E={};E[c.name]=w.val();E[c.id]=t.id;"function"===typeof c.submitdata?a.extend(E,c.submitdata.apply(t,[t.revert,c,E])):a.extend(E,c.submitdata);"PUT"===c.method&&(E._method=
"put");a(t).html(c.indicator);var G={type:"POST",complete:function(I,H){C=!1},data:E,dataType:"html",url:c.target,success:function(I,H){I=p.apply(t,[I,H]);"html"===G.dataType&&a(t).html(I);t.editing=!1;m.apply(t,[I,c,E]);a(t).html().trim()||a(t).html(c.placeholder)},error:function(I,H,J){B.apply(x,[c,t,I])}};a.extend(G,c.ajaxoptions);a.ajax(G)}a(t).attr("title",c.tooltip);return!1})}}),t.reset=function(u){t.editing&&!1!==y.apply(u,[c,t])&&(a(t).text(t.revert),t.editing=!1,a(t).html().trim()||a(t).html(c.placeholder),
c.tooltip&&a(t).attr("title",c.tooltip))},t.destroy=function(u){a(t).off(a(t).data("event.editable")).removeData("disabled.editable").removeData("event.editable");t.clearTimeouts();t.editing&&l.apply(u,[c,t])},t.clearTimeout=function(u){var x=a(t).data("timeouts");clearTimeout(u);if(x){var w=x.indexOf(u);-1<w?(x.splice(w,1),0>=x.length&&a(t).removeData("timeouts")):console.warn("jeditable clearTimeout could not find timeout "+u)}},t.clearTimeouts=function(){var u=a(t).data("timeouts");if(u){for(var x=
0,w=u.length;x<w;++x)clearTimeout(u[x]);u.length=0;a(t).removeData("timeouts")}},t.setTimeout=function(u,x){var w=a(t).data("timeouts"),C=setTimeout(function(){u();t.clearTimeout(C)},x);w||(w=[],a(t).data("timeouts",w));w.push(C);return C})})}};var b=function(d){var g=document.createElement("input");g.setAttribute("type",d);return"text"!==g.type?d:"text"};a.editable={types:{defaults:{element:function(d,g){d=a('<input type="hidden"></input>');a(this).append(d);return d},content:function(d,g,c){a(this).find(":input:first").val(d)},
reset:function(d,g){g.reset(this)},destroy:function(d,g){g.destroy(this)},buttons:function(d,g){var c=this;if(d.submit){if(d.submit.match(/>$/))var e=a(d.submit).on("click",function(){"submit"!==e.attr("type")&&c.trigger("submit")});else e=a('<button type="submit" />'),e.html(d.submit),d.submitcssclass&&e.addClass(d.submitcssclass);a(this).append(e)}if(d.cancel){if(d.cancel.match(/>$/))var h=a(d.cancel);else h=a('<button type="cancel" />'),h.html(d.cancel),d.cancelcssclass&&h.addClass(d.cancelcssclass);
a(this).append(h);a(h).on("click",function(f){("function"===typeof a.editable.types[d.type].reset?a.editable.types[d.type].reset:a.editable.types.defaults.reset).apply(c,[d,g]);return!1})}}},text:{element:function(d,g){g=a("<input />").attr({autocomplete:"off",list:d.list,maxlength:d.maxlength,pattern:d.pattern,placeholder:d.placeholder,tooltip:d.tooltip,type:"text"});"none"!==d.width&&g.css("width",d.width);"none"!==d.height&&g.css("height",d.height);d.size&&g.attr("size",d.size);d.maxlength&&g.attr("maxlength",
d.maxlength);a(this).append(g);return g}},textarea:{element:function(d,g){g=a("<textarea></textarea>");d.rows?g.attr("rows",d.rows):"none"!==d.height&&g.height(d.height);d.cols?g.attr("cols",d.cols):"none"!==d.width&&g.width(d.width);d.maxlength&&g.attr("maxlength",d.maxlength);a(this).append(g);return g}},select:{element:function(d,g){g=a("<select />");d.multiple&&g.attr("multiple","multiple");a(this).append(g);return g},content:function(d,g,c){var e=String===d.constructor?JSON.parse(d):d;d=[];if(Array.isArray(e)&&
e.every(Array.isArray))d=e,e={},d.forEach(function(l){e[l[0]]=l[1]});else for(k in e)d.push([k,e[k]]);g.sortselectoptions&&d.sort(function(l,n){l=l[1];n=n[1];return l<n?-1:l>n?1:0});for(var h,f=0;f<d.length;f++){var k=d[f][0];h=d[f][1];e.hasOwnProperty(k)&&"selected"!==k&&(h=a("<option />").val(k).append(h),e.selected!==k&&k!==String.prototype.trim.call(null==c.revert?"":c.revert)||a(h).prop("selected","selected"),a(this).find("select").append(h))}if(!g.submit){var q=this;a(this).find("select").change(function(){q.trigger("submit")})}}},
number:{element:function(d,g){g=a("<input />").attr({maxlength:d.maxlength,placeholder:d.placeholder,min:d.min,max:d.max,step:d.step,tooltip:d.tooltip,type:b("number")});"none"!==d.width&&g.css("width",d.width);a(this).append(g);return g}},email:{element:function(d,g){g=a("<input />").attr({maxlength:d.maxlength,placeholder:d.placeholder,tooltip:d.tooltip,type:b("email")});"none"!==d.width&&g.css("width",d.width);a(this).append(g);return g}},url:{element:function(d,g){g=a("<input />").attr({maxlength:d.maxlength,
pattern:d.pattern,placeholder:d.placeholder,tooltip:d.tooltip,type:b("url")});"none"!==d.width&&g.css("width",d.width);a(this).append(g);return g}}},addInputType:function(d,g){a.editable.types[d]=g}};a.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable keydown.editable",onblur:"cancel",tooltip:"Click to edit",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",sortselectoptions:!1,loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);
(function(a){a.cluetip={version:"1.2.5",template:'<div><div class="cluetip-outer"><h3 class="cluetip-title ui-widget-header ui-cluetip-header"></h3><div class="cluetip-inner ui-widget-content ui-cluetip-content"></div></div><div class="cluetip-extra"></div><div class="cluetip-arrows ui-state-default"></div></div>',setup:{insertionType:"appendTo",insertionElement:"body"},defaults:{multiple:!1,width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:!1,localPrefix:null,
localIdSuffix:null,hideLocal:!0,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!0,tracking:!1,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(e){return!0},onShow:function(e,h){},onHide:function(e,
h){},ajaxCache:!0,ajaxProcess:function(e){return e=e.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1}};var b,d={},g=0,c=0;a.fn.attrProp=a.fn.prop||a.fn.attr;a.fn.cluetip=function(e,h){function f(C,A){var z=C||"";A=A||"";"object"==typeof A?a.each(A,function(D,F){z+="-"+D+"-"+F}):"string"==typeof A&&(z+=A);return z}function k(C,A,z){z="";A=A.dropShadow&&A.dropShadowSteps?+A.dropShadowSteps:0;if(a.support.boxShadow)return A&&
(z="1px 1px "+A+"px rgba(0,0,0,0.5)"),C.css(a.support.boxShadow,z),!1;z=C.find(".cluetip-drop-shadow");if(A==z.length)return z;z.remove();z=[];for(var D=0;D<A;)z[D++]='<div style="top:'+D+"px;left:"+D+'px;"></div>';return z=a(z.join("")).css({position:"absolute",backgroundColor:"#000",zIndex:B-1,opacity:.1}).addClass("cluetip-drop-shadow").prependTo(C)}var q,l;"object"==typeof e&&(h=e,e=null);if("destroy"==e){var n=this.data("cluetip");n&&(a(n.selector).remove(),a.removeData(this,"title"),a.removeData(this,
"cluetip"));a(document).unbind(".cluetip");return this.unbind(".cluetip")}h=a.extend(!0,{},a.cluetip.defaults,h||{});g++;n=a.cluetip.backCompat||!h.multiple?"cluetip":"cluetip-"+g;var m="#"+n,p=a.cluetip.backCompat?"#":".",r=a.cluetip.setup.insertionType,v=a.cluetip.setup.insertionElement||"body";r=/appendTo|prependTo|insertBefore|insertAfter/.test(r)?r:"appendTo";var y=a(m);if(!y.length){y=a(a.cluetip.template)[r](v).attr("id",n).css({position:"absolute",display:"none"});var B=+h.cluezIndex;var t=
y.find(p+"cluetip-outer").css({position:"relative",zIndex:B});var u=y.find(p+"cluetip-inner");var x=y.find(p+"cluetip-title")}b=a("#cluetip-waitimage");b.length||(b=a("<div></div>").attr("id","cluetip-waitimage").css({position:"absolute"}));b.insertBefore(y).hide();var w=(parseInt(y.css("paddingLeft"),10)||0)+(parseInt(y.css("paddingRight"),10)||0);this.each(function(C){function A(){return!1}function z(K,T){var V=K.status;T.beforeSend(K.xhr,T);if("error"==V)T[V](K.xhr,K.textStatus);else if("success"==
V)T[V](K.data,K.textStatus,K.xhr);T.complete(K.xhr,T.textStatus)}var D=this,F=a(this),E=a.extend(!0,{},h,a.metadata?F.metadata():a.meta?F.data():F.data("cluetip")||{}),G=!1,I=!1,H=0,J=E[E.attribute]||("href"==E.attribute?F.attr(E.attribute):F.attrProp(E.attribute)||F.attr(E.attribute)),M=E.cluetipClass;B=+E.cluezIndex;F.data("cluetip",{title:D.title,zIndex:B,selector:m});if(!J&&!E.splitTitle&&!e)return!0;E.local&&E.localPrefix&&(J=E.localPrefix+J);E.local&&E.hideLocal&&J&&a(J+":first").hide();var R=
parseInt(E.topOffset,10),S=parseInt(E.leftOffset,10),L,O,P=isNaN(parseInt(E.height,10))?"auto":/\D/g.test(E.height)?E.height:E.height+"px",Q,U,N,ca,da,ha=parseInt(E.width,10)||275,Z=ha+w+E.dropShadowSteps,ia=this.offsetWidth,ea,X,aa,ka,fa="title"!=E.attribute?F.attrProp(E.titleAttribute)||"":"";if(E.splitTitle){var la=fa.split(E.splitTitle);fa=E.showTitle||""===la[0]?la.shift():""}E.escapeTitle&&(fa=fa.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"));var qa=function(K){if(!1===E.onActivate.call(D,
K))return!1;I=!0;y=a(m).css({position:"absolute"});t=y.find(p+"cluetip-outer");u=y.find(p+"cluetip-inner");x=y.find(p+"cluetip-title");q=y.find(p+"cluetip-arrows");y.removeClass().css({width:ha});J==F.attr("href")&&F.css("cursor",E.cursor);E.hoverClass&&F.addClass(E.hoverClass);U=F.offset().top;ea=F.offset().left;ia=F.innerWidth();K.type==focus?(aa=ea+ia/2+S,y.css({left:X}),ca=U+R):(aa=K.pageX,ca=K.pageY);"area"!=D.tagName.toLowerCase()&&(Q=a(document).scrollTop(),ka=a(window).width());if("fixed"==
E.positionBy)X=ia+ea+S,y.css({left:X});else{X=ia>ea&&ea>Z||ea+ia+Z+S>ka?ea-Z-S:ia+ea+S;if("area"==D.tagName.toLowerCase()||"mouse"==E.positionBy||ia+Z>ka)aa+20+Z>ka?(y.addClass("cluetip-"+M),X=0<=aa-Z-S?aa-Z-S-parseInt(y.css("marginLeft"),10)+parseInt(u.css("marginRight"),10):aa-Z/2):X=aa+S;var T=0>X?K.pageY+R:K.pageY;if(0>X||"bottomTop"==E.positionBy)X=aa+Z/2>ka?ka/2-Z/2:Math.max(aa-Z/2,0)}q.css({zIndex:F.data("cluetip").zIndex+1});y.css({left:X,zIndex:F.data("cluetip").zIndex});O=a(window).height();
if(e)"function"==typeof e&&(e=e.call(D)),u.html(e),ma(T);else if(la){K=la.length;u.html(K?la[0]:"");if(1<K)for(var V=1;V<K;V++)u.append('<div class="split-body">'+la[V]+"</div>");ma(T)}else if(E.local||0===J.indexOf("#"))E.local&&(K=a(J+(/^#\S+$/.test(J)?"":":eq("+C+")")).clone(!0).show(),E.localIdSuffix&&K.attr("id",K[0].id+E.localIdSuffix),u.html(K),ma(T));else if(/\.(jpe?g|tiff?|gif|png)(?:\?.*)?$/i.test(J))u.html('<img src="'+J+'" alt="'+fa+'" />'),ma(T);else{var W=E.ajaxSettings.beforeSend,na=
E.ajaxSettings.error,sa=E.ajaxSettings.success,ta=E.ajaxSettings.complete;var oa=f(J,E.ajaxSettings.data);K=a.extend(!0,{},E.ajaxSettings,{cache:E.ajaxCache,url:J,beforeSend:function(Y,ba){W&&W.call(D,Y,y,u,ba);t.children().empty();E.waitImage&&b.css({top:ca+20,left:aa+20,zIndex:F.data("cluetip").zIndex-1}).show()},error:function(Y,ba){h.ajaxCache&&!d[oa]&&(d[oa]={status:"error",textStatus:ba,xhr:Y});I&&(na?na.call(D,Y,ba,y,u):u.html("<i>sorry, the contents could not be loaded</i>"))},success:function(Y,
ba,ja){h.ajaxCache&&!d[oa]&&(d[oa]={status:"success",data:Y,textStatus:ba,xhr:ja});G=E.ajaxProcess.call(D,Y);"object"==typeof G&&null!==G&&(fa=G.title,G=G.content);I&&(sa&&sa.call(D,Y,ba,y,u),u.html(G))},complete:function(Y,ba){ta&&ta.call(D,Y,ba,y,u);var ja=u[0].getElementsByTagName("img");c=ja.length;Y=0;for(ba=ja.length;Y<ba;Y++)ja[Y].complete&&c--;c&&!a.browser.opera?a(ja).bind("load.ct error.ct",function(){c--;0===c&&(b.hide(),a(ja).unbind(".ct"),I&&ma(T))}):(b.hide(),I&&ma(T))}});d[oa]?z(d[oa],
K):a.ajax(K)}},ma=function(K){var T=fa||E.showTitle&&"&nbsp;";var V="";var W="";y.addClass("cluetip-"+M);if(E.truncate){var na=u.text().slice(0,E.truncate)+"...";u.html(na)}T?x.show().html(T):x.hide();E.sticky&&(T=a('<div class="cluetip-close"><a href="#">'+E.closeText+"</a></div>"),"bottom"==E.closePosition?T.appendTo(u):"title"==E.closePosition?T.prependTo(x):T.prependTo(u),T.bind("click.cluetip",function(){pa();return!1}),E.mouseOutClose?y.bind("mouseleave.cluetip",function(){pa()}):y.unbind("mouseleave.cluetip"));
t.css({zIndex:F.data("cluetip").zIndex,overflow:"auto"==P?"visible":"auto",height:P});L="auto"==P?Math.max(y.outerHeight(),y.height()):parseInt(P,10);N=U;da=Q+O;"fixed"==E.positionBy?N=U-E.dropShadowSteps+R:X<aa&&Math.max(X,0)+Z>aa||"bottomTop"==E.positionBy?U+L+R>da&&ca-Q>L+R?(N=ca-L-R,W="top"):(N=ca+R,W="bottom"):N=U+L+R>da?L>=O?Q:da-L-R:"block"==F.css("display")||"area"==D.tagName.toLowerCase()||"mouse"==E.positionBy?K-R:U-E.dropShadowSteps;""===W&&(W=X<ea?"left":"right");T=" clue-"+W+"-"+M+" cluetip-"+
M;"rounded"==M&&(T+=" ui-corner-all");y.css({top:N+"px"}).attrProp({className:"cluetip ui-widget ui-widget-content ui-cluetip"+T});E.arrows?(/(left|right)/.test(W)&&(W=y.height()-q.height(),V=0<=X&&0<K?U-N-E.dropShadowSteps:0,V=(W>V?V:W)+"px"),q.css({top:V}).show()):q.hide();(l=k(y,E))&&l.length&&l.hide().css({height:L,width:ha,zIndex:F.data("cluetip").zIndex-1}).show();y.hide()[E.fx.open](E.fx.openSpeed||0);a.fn.bgiframe&&y.bgiframe();0<E.delayedClose&&(H=setTimeout(pa,E.delayedClose));E.onShow.call(D,
y,u)},ra=function(K){I=!1;b.hide();if(!E.sticky||/click|toggle/.test(E.activation))pa(),clearTimeout(H);E.hoverClass&&F.removeClass(E.hoverClass)},pa=function(K){K=K&&K.data("cluetip")?K:F;var T=K.data("cluetip")&&K.data("cluetip").selector,V=a(T||"div.cluetip"),W=V.find(p+"cluetip-inner"),na=V.find(p+"cluetip-arrows");V.hide().removeClass();E.onHide.call(K[0],V,W);T&&(K.removeClass("cluetip-clicked"),K.css("cursor",""));T&&fa&&K.attrProp(E.titleAttribute,fa);E.arrows&&na.css({top:""})};a(document).unbind("hideCluetip.cluetip").bind("hideCluetip.cluetip",
function(K){pa(a(K.target))});if(/click|toggle/.test(E.activation))F.bind("click.cluetip",function(K){y.is(":hidden")||!F.is(".cluetip-clicked")?(qa(K),a(".cluetip-clicked").removeClass("cluetip-clicked"),F.addClass("cluetip-clicked")):ra(K);return!1});else if("focus"==E.activation)F.bind("focus.cluetip",function(K){F.attrProp("title","");qa(K)}),F.bind("blur.cluetip",function(K){F.attrProp("title",F.data("cluetip").title);ra(K)});else{F[E.clickThrough?"unbind":"bind"]("click.cluetip",A);var ua=function(K){if(E.tracking){var T=
X-K.pageX,V=N?N-K.pageY:U-K.pageY;F.bind("mousemove.cluetip",function(W){y.css({left:W.pageX+T,top:W.pageY+V})})}};a.fn.hoverIntent&&E.hoverIntent?F.hoverIntent({sensitivity:E.hoverIntent.sensitivity,interval:E.hoverIntent.interval,over:function(K){qa(K);ua(K)},timeout:E.hoverIntent.timeout,out:function(K){ra(K);F.unbind("mousemove.cluetip")}}):F.bind("mouseenter.cluetip",function(K){qa(K);ua(K)}).bind("mouseleave.cluetip",function(K){ra(K);F.unbind("mousemove.cluetip")});F.bind("mouseover.cluetip",
function(K){F.attrProp("title","")}).bind("mouseleave.cluetip",function(K){F.attrProp("title",F.data("cluetip").title)})}});return this};(function(){a.support=a.support||{};for(var e=document.createElement("div").style,h=["boxShadow"],f=["moz","Moz","webkit","o"],k=0,q=h.length;k<q;k++){var l=h[k],n=l.charAt(0).toUpperCase()+l.slice(1);if("undefined"!==typeof e[l])a.support[l]=l;else for(var m=0,p=f.length;m<p;m++)if("undefined"!==typeof e[f[m]+n]){a.support[l]=f[m]+n;break}}})();a.fn.cluetip.defaults=
a.cluetip.defaults})(jQuery);jQuery.fn.labelOver=function(a){return $(this).each(function(){var b=jQuery(this),d=b.attr("for");if(d){var g=jQuery("#"+d);this.hide=function(){b.css({textIndent:-1E4})};this.show=function(){""==g.val()&&b.css({textIndent:0})};g.focus(this.hide);g.blur(this.show);b.addClass(a).click(function(){g.focus()});""!=g.val()&&this.hide()}})};
$.fn.collapsible=function(a){a=$.extend({defaulthide:!0,symbolhide:"-",symbolshow:"+",imagehide:null,imageshow:null,xoffset:"-15",yoffset:"0"},a);var b=$.meta?$.extend({},a,$$.data()):a;a=$(this);b.imageshow&&(b.symbolshow='<img src="'+b.imageshow+'" class="jc-show" border="0">');b.imagehide&&(b.symbolhide='<img src="'+b.imagehide+'" class="jc-hide" border="0">');var d=b.symbolshow;$("li",a).each(function(g){0<$(">ul, >ol",this).size()&&(b.defaulthide?$(">ul, >ol",this).hide():d=b.symbolhide,$(this).prepend('<a href="" class="jcollapsible" style="position:absolute;outline:0;left:'+
b.xoffset+"px;top:"+b.yoffset+'px;">'+d+"</a>").css("position","relative"))});$(".jcollapsible",a).click(function(){var g=$(this).parent();$(">ul, >ol",g).slideToggle("fast");$(this).html($(this).html()==b.symbolshow?b.symbolhide:b.symbolshow);return!1})};$(function(){$("input.date").datepicker({changeMonth:!0,changeYear:!0,showOn:"both",buttonText:"",dateFormat:"yy-mm-dd",isRTL:S3.rtl});$("input.time").fgtimepicker({hourText:i18n.hour,minuteText:i18n.minute,defaultTime:""})});
(function(a){a.widget("s3.end_date_interval",{options:{show_clear_button:!0},_create:function(){var b=this.options;this.namespace=".enddateinterval";this.start_element=a(b.start_date_selector);this.default_interval=b.interval;this.start_date_prev=this.start_element.datepicker("getDate")},_init:function(){var b,d,g,c;var e=this.options;var h=this;var f=this.start_element;var k=a(this.element);var q=this.interval;var l=this.default_interval;k.datepicker("option",{yearRange:"c-100:c+100",showButtonPanel:!0}).one("click",
function(){a(this).trigger("focus")});if(e.show_clear_button){var n=a('<button id="end_date_clear" class="btn date-clear-btn" type="button">'+i18n.btn_clear+"</button>").click(function(){k.val("")});k.next().after(n)}k.off(h.namespace).on("click"+h.namespace,function(){b=f.datepicker("getDate");null!=b&&h._inputclick()});var m=k.datepicker("getDate");null==m&&(e.default_explicit&&(h.interval=l,h._end_date_automate(h.interval)),f.on("change",function(){q=h.interval;m=k.datepicker("getDate");if(null!=
m){var p=h.start_date_prev;d=p.getMonth()+1;g=p.getFullYear();c=p.getDate();p=new Date(g,d,c);h._add_months(p,q-1);m=k.datepicker("getDate");h._equal_date(m,p)&&h._end_date_automate(q)}}))},_end_date_automate:function(b){var d=this.start_element;var g=a(this.element);var c=d.datepicker("getDate");var e=c.getMonth()+1;var h=c.getFullYear();c=c.getDate();c=new Date(h,e,c);this._add_months(c,b-1);g.datepicker("setDate",c);this.start_date_prev=d.datepicker("getDate")},_inputclick:function(){var b=this.namespace;
var d=a(this.element);var g=this.default_interval;var c=this;null==d.datepicker("getDate")&&(c.interval=g,c._end_date_automate(g));g=a(".ui-datepicker-buttonpane");a(".ui-datepicker-current").hide();a(".ui-datepicker-close").hide();a("<h5>"+i18n.interval+"</h5>").appendTo(g);d=a('<a class="ui-datepicker-current ui-state-default ui-priority-primary" type="button">'+i18n.btn_1_label+"</a>");d.off(b).on("click"+b,function(){c.interval=6;c._end_date_automate(c.interval)});d.appendTo(g);d=a('<a class="ui-datepicker-current ui-state-default ui-priority-primary" type="button">'+
i18n.btn_2_label+"</a>");d.off(b).on("click"+b,function(){c.interval=12;c._end_date_automate(c.interval)});d.appendTo(g);d=a('<a class="ui-datepicker-current ui-state-default ui-priority-primary" type="button">'+i18n.btn_3_label+"</a>");d.off(b).on("click"+b,function(){c.interval=24;c._end_date_automate(c.interval)});d.appendTo(g);d=a('<a class="ui-datepicker-current ui-state-default ui-priority-primary" type="button">'+i18n.btn_4_label+"</a>");d.off(b).on("click"+b,function(){c.interval=60;c._end_date_automate(c.interval)});
d.appendTo(g);a(".ui-datepicker-buttonpane a").css("margin",".3em");a(".ui-datepicker-buttonpane a").css("font-size","1rem");a(".ui-datepicker-buttonpane").css("text-align","center")},_equal_date:function(b,d){return b.getFullYear()===d.getFullYear()&&b.getMonth()===d.getMonth()&&b.getDate()===d.getDate()},_is_leap_year:function(b){return 0===b%4&&0!==b%100||0===b%400},_get_days_in_month:function(b,d){a(this.element);return[31,this._is_leap_year(b)?29:28,31,30,31,30,31,31,30,31,30,31][d]},_get_days_in_month_big:function(b){a(this.element);
return this._get_days_in_month(b.getFullYear(),b.getMonth())},_add_months:function(b,d){a(this.element);var g=b.getDate();b.setDate(1);b.setMonth(b.getMonth()+d);b.setDate(Math.min(g,this._get_days_in_month_big(b)));return b}})})(jQuery);S3.supply={};S3.supply.fncPrepItem=function(a){for(var b=0;b<a.length;b++)if(1==a[b].quantity)return a[b].name;return""};S3.supply.fncRepresentItem=function(a,b){return 1==a.quantity?a.name:a.name+" ("+a.quantity+" "+b+")"};
$(function(){var a=function(){var b=$("#inv_recv_type").val();void 0!=b&&(11==b?($('[id^="inv_recv_from_site_id__row"]').show(),$('[id^="inv_recv_organisation_id__row"]').hide()):32<=b?($('[id^="inv_recv_from_site_id__row"]').hide(),$('[id^="inv_recv_organisation_id__row"]').show()):($('[id^="inv_recv_from_site_id__row"]').hide(),$('[id^="inv_recv_organisation_id__row"]').hide()))};$("#inv_track_item_item_pack_id").change(function(){try{S3.JSONRequest[$(this).attr("id")].abort()}catch(d){}$("#TotalQuantity").remove();
if(0<$('[name="inv_item_id"]').length)id=$('[name="inv_item_id"]').val();else if(0<$('[name="send_inv_item_id"]').length)id=$('[name="send_inv_item_id"]').val();else return;var b=S3.Ap.concat("/inv/inv_item_quantity.json/"+id);0===$("#inv_quantity_throbber").length&&$('[name="quantity"]').after('<div id="inv_quantity_throbber" class="throbber">');S3.JSONRequest[$(this).attr("id")]=$.getJSON(b,function(d){var g=d.iquantity;d=d.pquantity;var c=$('[name="item_pack_id"] option:selected').text(),e=/\(([0-9]*)\sx/.exec(c);
TotalQuantity='<span id="TotalQuantity"> / '+(g*d/(null===e?1:e[1])).toFixed(2)+" "+c+" ("+i18n.in_stock+")</span>";$("#inv_quantity_throbber").remove();$('[name="quantity"]').after(TotalQuantity)})});a();$("#inv_recv_type").change(a);$(document).on("click",".quantity.ajax_more",function(b){b.preventDefault();b=$(this);if(b.hasClass("collapsed")){if(b.hasClass("fulfil")){var d="inv";var g="recv"}else b.hasClass("transit")?(g="send",d="inv"):b.hasClass("commit")&&(g="commit",d="req");b.after('<div class="ajax_throbber quantity_req_ajax_throbber">').removeClass("collapsed").addClass("expanded");
var c=$(".action-btn",b.parent().parent().parent()).attr("href");c=/req_item\/(\d*).*/i.exec(c)[1];c=S3.Ap.concat("/",d,"/",g,"_item_json.json/",c);$.ajax({url:c,dataType:"json",context:b}).done(function(e){RecvTable='<table class="recv_table">';for(i=0;i<e.length;i++)RecvTable+="<tr><td>",0===i?RecvTable+=e[0].id:(RecvURL=S3.Ap.concat("/",d,"/",g,"/",e[i].id,"/track_item"),RecvTable+="<a href='"+RecvURL+"'>",null!==e[i].date?(RecvTable+=e[i].date.substring(0,10)+" - ",RecvTable+=e[i].name+"</a>"):
RecvTable+=" - </a>"),RecvTable+="</td><td>"+e[i].quantity+"</td></tr>";RecvTable+="</table>";$(".quantity_req_ajax_throbber",this.parent()).remove();this.parent().after(RecvTable)})}else b.removeClass("expanded").addClass("collapsed"),$(".recv_table",b.parent().parent()).remove()})});
(function(a,b){var d=0;a.widget("s3.inlinecomponent",{options:{implicitCancelEdit:"ask",confirmCancelEdit:"Discard changes?"},_create:function(){this.id=d;d+=1;this.eventNamespace=".inlinecomponent"},_init:function(){var g=a(this.element);this.formname=g.attr("id").split("-").pop();this.input=a("#"+g.attr("field"));g=this._layout;a.inlineComponentLayout&&(g=a.inlineComponentLayout);this._renderReadRow=g.renderReadRow;this._appendReadRow=g.appendReadRow;this._appendError=g.appendError;this._updateColumn=
g.updateColumn;this.refresh()},_destroy:function(){a.Widget.prototype.destroy.call(this)},refresh:function(){this._unbindEvents();this._openSingleRowSubforms();this._enforceRequired();this.labelRow=a("#sub-"+this.formname+" .label-row:not(.static)");a(this.element).find(".inline-open-add").length||a("#add-row-"+this.formname+" .inline-dsc").hide();this._showHeaders();this._bindEvents()},_openSingleRowSubforms:function(){var g=a(this.element),c=this;g.find(".inline-form.read-row.single").each(function(){var e=
a(this).attr("id").split("-").pop();c._editRow(e)});g.find(".inline-form.add-row.single").each(function(){var e=a(this),h=!1;e.find('input[type!="hidden"], select, textarea').each(function(){var f=a(this);"none"!=f.css("display")&&f.val()&&"checkbox"!=f.attr("type")&&(h=!0)});h&&(c._markChanged(e),c._catchSubmit())})},_enforceRequired:function(){var g=this;a(this.element).find(".inline-form.add-row.required").each(function(){g._markChanged(this);g._catchSubmit()})},_layout:{renderReadRow:function(g,
c,e){for(var h="",f=0,k=e.length;f<k;f++)h+="<td>"+e[f]+"</td>";h=0!==a("#edt-"+g+"-none").length?h+('<td><div><div id="edt-'+g+"-"+c+'" class="inline-edt"></div></div></td>'):h+"<td></td>";h=0!==a("#rmv-"+g+"-none").length?h+('<td><div><div id="rmv-'+g+"-"+c+'" class="inline-rmv"></div></div></td>'):h+"<td></td>";g="read-row-"+g+"-"+c;c=a("#"+g);c.length||(c=a('<tr id="'+g+'" class="read-row">'));c.empty().html(h);return c},appendReadRow:function(g,c){a("#sub-"+g+" > table.embeddedComponent > tbody").append(c)},
appendError:function(g,c,e,h){var f=g+"_error";h='<div class="error">'+h+"</div>";var k=function(l){l=a(l+"> td");for(var n=0,m,p=l.len,r;m<p;m++)n=(r=l[m].attr("colspan"))?n+parseInt(r):n+1;return n},q=function(){return"none"==c?"#add-row-"+g:"#edit-row-"+g};null===e?(e=q(),h=a('<tr><td colspan="'+k(e)+'">'+h+"</td></tr>")):(e="#sub_"+g+"_"+g+"_i_"+e+"_edit_"+c,a(e).is('[type="hidden"]')&&(e=q(),h='<tr><td colspan="'+k(e)+'">'+h+"</td></tr>"),h=a(h));h.addClass(f).hide().insertAfter(e)},updateColumn:function(g,
c,e){a(g).find("td").eq(c).html(e)}},_markChanged:function(g){g=a(g).closest(".inline-form");g.addClass("changed");g.hasClass("add-row")&&g.find(".inline-dsc").show()},_deserialize:function(){var g=this.input,c=JSON.parse(g.val());g.data("data",c);return c},_serialize:function(){var g=this.input,c=JSON.stringify(g.data("data"));g.val(c);return c},_displayErrors:function(){a("."+this.formname+"_error").show()},_removeErrors:function(){a("."+this.formname+"_error").remove()},_disableAddRow:function(){var g=
a("#add-row-"+this.formname);g.find("input, select, textarea").prop("disabled",!0);g.find(".inline-add, .action-lnk").hide()},_enableAddRow:function(){var g=a("#add-row-"+this.formname);g.find("input, select, textarea").prop("disabled",!1);g.find(".inline-add, .action-lnk").removeClass("hide").show()},_showHeaders:function(){var g=this.labelRow;g&&g.length&&(a("#sub-"+this.formname+" .read-row:visible").length?g.show():g.hide())},_catchSubmit:function(){var g=a(this.element).closest("form"),c=this.eventNamespace+
this.id,e=this,h=g.data("pendingValidations");h||(h={},g.data("pendingValidations",h),g.off("submit"+c).on("submit"+c,function(f){f.preventDefault();e.submitInProgress||(g.find('input[type="submit"]').prop("disabled",!0),e.submitInProgress=!0,g.trigger("validateInline"),e._deferredSubmit(g))}));h[c]||(h[c]=a.Deferred(),g.off("validateInline"+c).on("validateInline"+c,function(){e._validateAll()}))},_deferredSubmit:function(g){var c=g.data("pendingValidations"),e=[],h;for(h in c)e.push(c[h]);var f=
this.eventNamespace+this.id,k=this;a.when.apply(a,e).then(function(){k.submitInProgress=!1;g.off(f).trigger("submit")},function(){for(var q in c)"rejected"==c[q].state()&&(c[q]=a.Deferred());k.submitInProgress=!1;g.find('input[type="submit"]').prop("disabled",!1)})},_collectData:function(g,c,e){var h=this.formname,f=g.data,k={},q=null;if("none"==c)var l=a("#add-row-"+h);else{l=a("#edit-row-"+h);var n=l.data("rowindex");"undefined"!=typeof n&&(q=f[n])}if(l.length&&(f=new a.Event("validate"),l.triggerHandler(f),
f.isDefaultPrevented()))return null;null!==q&&(l=q._id,"undefined"!=typeof l&&(k._id=l));f=g.fields;for(n=0;n<f.length;n++){var m=f[n].name;l="#sub_"+h+"_"+h+"_i_"+m+"_edit_"+c;var p=a(l);if(p.length)if(l=p.val(),"file"==p.attr("type")){l||!q||a("#"+h+"_i_"+m+"_edit_"+c+"__delete").prop("checked")||(l=q[m].value);p.clone().insertAfter(p);var r=a("#add-"+h+"-none").length||"none"!=c?e||c:"0";r="upload_"+h+"_"+m+"_"+r;a("#"+r).remove();var v=p.closest("form");p.css({display:"none"}).attr("id",r).attr("name",
r).appendTo(v);l.match(/fakepath/)&&(l=l.replace(/(c:\\)*fakepath\\/i,""))}else"checkbox"==p.attr("type")?l=p.prop("checked"):p.hasClass("s3-hierarchy-input")?l=l?JSON.parse(l):null:(p=p.attr("class"),"generic-widget"==p&&(p=parseInt(l,10),isNaN(p)||l!=""+p||(l=p)));else l=null!==q?q[m].value:g.defaults&&"undefined"!=typeof g.defaults[m]?g.defaults[m].value:"";k[m]=l}if(a("#read-row-"+h+"-"+c).hasClass("single")){c=!0;for(m in k)if("_id"!=m&&""!==k[m]){c=!1;break}c?a("#edit-row-"+h).hasClass("required")?
(this._appendError(h,"0",m,i18n.enter_value),k._error=!0):k._delete=!0:delete k._error}else{e=!1;if(a("#add-row-"+h).hasClass("required")||a("#edit-row-"+h).hasClass("required"))e=!0;if(e){delete k._error;e=!0;for(m in k)"_id"!=m&&""!==k[m]&&(e=!1);e&&(e="none","none"!=c&&(e="0"),a("#add-"+h+"-"+c).length?a("#read-row-"+h+"-0").length||(this._appendError(h,e,m,i18n.enter_value),k._error=!0):(this._appendError(h,e,m,i18n.enter_value),k._error=!0))}}g=g.defaults;for(m in g)k.hasOwnProperty(m)||(l=g[m].value,
k[m]=l);return k},_validate:function(g,c,e){var h=this.formname,f=a.Deferred();if(e._error)return this._displayErrors(),f.reject();var k=g.resource,q=g.component;g=S3.Ap.concat("/"+g.controller+"/"+g["function"]+"/validate.json");null!==k&&"undefined"!=typeof k?(g+="?resource="+k,k="&"):k="?";null!==q&&"undefined"!=typeof q&&(g+=k+"component="+q);e=JSON.stringify(e);var l=this;a.ajaxS3({type:"POST",url:g,data:e,dataType:"json",contentType:"application/json; charset=utf-8",success:function(n){var m=
!1;n?n.hasOwnProperty("_error")&&(m=!0,l._appendError(h,c,null,n._error)):(m=!0,l._appendError(h,c,null,"validation failed"));var p;for(p in n){var r=n[p];if(r.hasOwnProperty("_error")){var v=r._error;"invalid field"==v?r.text=r.value:(m=!0,l._appendError(h,c,p,v))}}m?(l._displayErrors(),f.reject()):f.resolve(n)}});return f.promise()},_updateUploadWidget:function(g,c){var e=g.val();g=g.closest(".s3-upload-widget");var h=g.data("base");var f=h?h.concat("/",c):S3.Ap.concat("/default/download",c);g.find(".s3-upload-link").each(function(){var q=
a(this),l=q.find("a");c&&!e?(l.attr("href",f),q.removeClass("hide").show()):(l.removeAttr("href"),q.hide())});var k=!1;c&&(h=c.substr(c.lastIndexOf(".")+1).toLowerCase(),-1!=["gif","png","jpg","jpeg","bmp"].indexOf(h)&&(k=!0));g.find(".s3-upload-preview").each(function(){var q=a(this),l=q.find("img");k&&!e?(l.attr("src",f),q.removeClass("hide").show()):(l.attr("src",""),q.hide())})},_ensureSelectable:function(g,c){(c?c.constructor===Array?c:[c]:[]).forEach(function(e){g.find('option[value="'+e+'"]').length||
g.append('<option value="'+e+'">-</option>')})},_editRow:function(g){var c=this.options,e=this.formname,h=e+"-"+g;this._removeErrors();var f=this._deserialize(),k=f.data[g];if(!k._readonly){var q=a("#edit-row-"+e),l=q.data("rowindex");if(l&&q.hasClass("changed")){var n=!1;switch(c.implicitCancelEdit){case "refuse":break;case "submit":var m=this;this._updateRow(l).then(function(){m._editRow(g)});break;case "cancel":n=!0;break;default:confirm(c.confirmCancelEdit)&&(n=!0)}if(!n)return}a("#sub-"+e+" .read-row").removeClass("hide").show();
"imageimage"!=e&&a("#read-row-"+h).hide();c=f.fields;for(f=0;f<c.length;f++){n=c[f].name;l=k[n].value;var p="#sub_"+e+"_"+e+"_i_"+n+"_edit_0";var r=a("select"+p);r.length&&this._ensureSelectable(r,l);p=a(p);if(p.length)if("file"==p.attr("type")){r=a("#upload_"+e+"_"+n+"_"+g);if(r.length){var v=p.attr("id"),y=p.attr("name");p.replaceWith(r);r.attr("id",v).attr("name",y).css({display:""});p=r}this._updateUploadWidget(p,l);a("#"+e+"_i_"+n+"_edit_0__delete").prop("checked",!1)}else"checkbox"==p.attr("type")?
p.prop("checked",l):(p.val(l),p.hasClass("multiselect-widget")&&p.multiselect("instance")?p.multiselect("refresh"):p.hasClass("groupedopts-widget")&&p.groupedopts("instance")?p.groupedopts("refresh"):p.hasClass("location-selector")&&p.selectLocation("instance")?p.selectLocation("refresh"):p.hasClass("s3-hierarchy-input")?(n=p.parent(),n.hierarchicalopts("instance")&&(l?(l=JSON.parse(l),l.constructor!==Array&&(l=[l]),n.hierarchicalopts("set",l)):n.hierarchicalopts("reset"))):S3.rtl&&p.hasClass("phone-widget")?
l&&"\u200e"!=l.charAt(0)&&p.val("\u200e"+l):(p="#dummy_sub_"+e+"_"+e+"_i_"+n+"_edit_0",l=k[n].text,a(p).val(l)));else this._updateColumn(a("#edit-row-"+e),f,k[n].text)}q.data("rowindex",g).insertAfter("#read-row-"+h).removeClass("hide").show();a('select:not(".lx-select")',q).trigger("change");this._disableAddRow();this._showHeaders()}},_cancelEdit:function(g){var c=this.formname;g=c+"-"+g;this._removeErrors();a("#edit-row-"+c).hide().data("rowindex",null).removeClass("changed");a("#read-row-"+g).removeClass("hide").show();
this._enableAddRow();this._showHeaders()},_resetAddRow:function(){var g=this,c=this._deserialize(),e=this.formname,h="sub_"+e+"_"+e+"_i_";this._removeErrors();c=c.fields;for(var f,k,q,l,n=function(){g._markChanged(this);g._catchSubmit()},m=c.length;m--;)f=c[m].name,f=h+f,k=a("#"+f+"_edit_default"),l=a("#"+f+"_edit_none"),"file"==l.attr("type")?(q=k.clone(),q.attr("id",l.attr("id")).attr("name",l.attr("name")).change(n),l.replaceWith(q)):(q=k.val(),l.val(q).trigger("change"),"checkbox"==l.attr("type")?
l.prop("checked",k.prop("checked")):l.hasClass("multiselect-widget")&&l.multiselect("instance")?l.multiselect("refresh"):l.hasClass("groupedopts-widget")&&l.groupedopts("instance")?l.groupedopts("refresh"):l.hasClass("location-selector")&&l.selectLocation("instance")?l.selectLocation("refresh"):l.hasClass("s3-hierarchy-input")&&(l=l.parent(),l.hierarchicalopts("instance")&&(q?(q=JSON.parse(q),q.constructor!==Array&&(q=[q]),l.hierarchicalopts("set",q)):l.hierarchicalopts("reset")))),q=a("#dummy_"+
f+"_edit_default").val(),a("#dummy_"+f+"_edit_none").val(q);e=a("#add-row-"+e);e.removeClass("changed");h=a(this.element).find(".inline-open-add");h.length?(e.hide(),h.show()):e.find(".inline-dsc").hide()},_addRow:function(){var g=this.formname,c=a("#add-"+g+"-none"),e;if(e=c.length?!0:!1){c.hide();var h=a("#throbber-"+g+"-none").removeClass("hide").show();this._removeErrors()}var f=this._deserialize(),k=this._collectData(f,"none");if(null===k)return e&&(h.hide(),c.removeClass("hide").show()),a.Deferred().reject();
var q;if(a("#add-row-"+g).hasClass("required")){var l=!0;for(q in k)"_id"!=q&&""!==k[q]&&(l=!1);if(l&&a("#add-"+g+"-none").length&&a("#read-row-"+g+"-0").length)return h.hide(),c.removeClass("hide").show(),a.Deferred().resolve()}var n=this._validate(f,"none",k),m=this;return n.then(function(p){if(null!==p){p._changed=!0;var r=f.data.push(p)-1;p._index=r;m._serialize();if(e){for(var v=[],y=f.fields,B,t,u,x=0,w=y.length;x<w;x++)B=y[x].name,t=a("#upload_"+g+"_"+B+"_none"),t.length&&(u="upload_"+g+"_"+
B+"_"+r,a("#"+u).remove(),t.attr({id:u,name:u})),v.push(p[B].text);m._resetAddRow();p=m._renderReadRow(g,r,v);m._appendReadRow(g,p);m._showHeaders()}}e&&(h.hide(),c.removeClass("hide").show())},function(){e&&(h.hide(),c.removeClass("hide").show());return n})},_updateRow:function(g){var c=this.formname,e=a("#rdy-"+c+"-0"),h;if(h=e.length?!0:!1){e.hide();var f=a("#throbber-"+c+"-0").removeClass("hide").show();this._removeErrors()}var k=this._deserialize(),q=this._collectData(k,"0",g);if(null===q)return h&&
(f.hide(),e.removeClass("hide").show()),a.Deferred().reject();if(q._delete)return k.data[g]._delete=!0,this._serialize(),a.Deferred().resolve();var l=this._validate(k,"0",q),n=this;return l.then(function(m){if(null!==m&&(m._id=k.data[g]._id,m._changed=!0,m._index=g,k.data[g]=m,n._serialize(),h)){var p=[],r=k.fields,v,y=function(){n._markChanged(n);n._catchSubmit()};for(v=0;v<r.length;v++){var B=r[v].name;p.push(m[B].text);var t=a("#sub_"+c+"_"+c+"_i_"+B+"_edit_default");var u=a("#sub_"+c+"_"+c+"_i_"+
B+"_edit_0");"file"==u.attr("type")?(t=t.clone(),t.attr("id",u.attr("id")).attr("name",u.attr("name")).change(y),u.replaceWith(t)):(t=t.val(),u.val(t));t=a("#dummy_sub_"+c+"_"+c+"_i_"+B+"_edit_default").val();a("#dummy_sub_"+c+"_"+c+"_i_"+B+"_edit_0").val(t)}m=a("#edit-row-"+c);m.removeClass("changed");p=n._renderReadRow(c,g,p);m.hide().data("rowindex",null);p.removeClass("hide").show();n._enableAddRow();n._showHeaders()}h&&(f.hide(),e.removeClass("hide").show())},function(){h&&(f.hide(),e.removeClass("hide").show());
return l})},_removeRow:function(g){var c=this.formname,e=c+"-"+g;if(!confirm(i18n.delete_confirmation))return!1;this._deserialize().data[g]._delete=!0;this._serialize();a("#read-row-"+e).remove();this._showHeaders();a('input[name^="upload_'+c+'_"][name$="_'+g+'"]').remove();g=a("#edit-row-"+c);g.hasClass("required")&&!a("#read-row-"+c+"-0").length&&(a("#add-row-"+c).addClass("required"),g.removeClass("required"),this._catchSubmit());return!0},_validateAll:function(){var g=this,c=[];a(g.element).find(".inline-form.changed, .inline-form.required").each(function(){var k=
a(this),q=!0;if(k.hasClass("required")||k.hasClass("edit-row"))q=!1;else for(var l=k.find("input, select, textarea"),n,m,p=l.length;p--;){n=a(l[p]);if(n.is('[type="hidden"]')){if(!n.data("input"))continue}else if(!n.is(":visible"))continue;if("SELECT"==n.prop("tagName")&&!k.hasClass("single")&&(m=n.attr("id").split("_"),m.pop(),m.push("default"),m=a("#"+m.join("_")),m.length&&m.val()==n.val()))continue;if("checkbox"!=n.attr("type")&&n.val()||n.prop("checked")){q=!1;break}}q||(k.hasClass("add-row")?
c.push(g._addRow()):c.push(g._updateRow(k.data("rowindex"))))});var e=a(this.element).closest("form"),h=e.data("pendingValidations"),f=this.eventNamespace+this.id;a.when.apply(null,c).then(function(){h[f]&&(h[f].resolve(),delete h[f]);e.off("validateInline"+f)},function(){h[f]&&h[f].reject()})},_bindEvents:function(){const g=a(this.element),c=this.eventNamespace,e=this;g.on("click"+c,".read-row",function(h){if(!a(this).closest(".inline-component").hasClass("readonly")){var f=h.target;if(!f||"A"!=
f.tagName||!f.href)return f=a(this).attr("id").split("-").pop(),h.preventDefault(),e._editRow(f),!1}}).on("click"+c,".inline-add",function(){e._addRow();return!1}).on("click"+c,".inline-dsc",function(){e._resetAddRow();return!1}).on("click"+c,".inline-cnc",function(){var h=a(this).attr("id").split("-");h.pop();h=h.pop();h=a("#edit-row-"+h).data("rowindex");e._cancelEdit(h);return!1}).on("click"+c,".inline-rdy",function(){var h=a(this).attr("id").split("-");h.pop();h=h.pop();h=a("#edit-row-"+h).data("rowindex");
e._updateRow(h);return!1}).on("click"+c,".inline-edt",function(){var h=a(this).attr("id").split("-").pop();e._editRow(h);return!1}).on("click"+c,".inline-rmv",function(){var h=a(this).attr("id").split("-").pop();e._removeRow(h);return!1}).on("click"+c,".error",function(){a(this).fadeOut("medium",function(){a(this).remove()});return!1});a(".add-row,.edit-row",g).each(function(){var h=a(this);a("div.map_wrapper",h).on("change"+c,function(){e._markChanged(this);e._catchSubmit()});a('input[type="text"],input[type="file"],textarea',
h).on("input"+c,function(){e._markChanged(this);e._catchSubmit()});a('input[type="file"]',h).on("change"+c,function(){e._markChanged(this);e._catchSubmit()});a("input.s3-calendar-widget",h).on("change"+c,function(){e._markChanged(this);e._catchSubmit()});a('input[type!="text"][type!="file"],select',h).on("focusin"+c,function(){a(this).one("change"+c,function(){e._markChanged(this);e._catchSubmit()}).one("focusout",function(){a(this).off("change"+c)})});a("select.multiselect-widget",h).on("multiselectopen"+
c,function(){a(this).off("change"+c).one("change"+c,function(){e._markChanged(this);e._catchSubmit()})});a("input.s3-hierarchy-input",h).on("change"+c,function(){e._markChanged(this);e._catchSubmit()});a("input",h).on("keypress"+c,function(f){return 13==f.which?(f.preventDefault(),!1):!0})});a(".add-row",g).each(function(){a("input",a(this)).on("keyup"+c,function(h){switch(h.which){case 13:e._addRow()}})});a(".edit-row",g).each(function(){a("input",a(this)).on("keyup"+c,function(h){var f=a(this).closest(".edit-row").data("rowindex");
switch(h.which){case 13:e._updateRow(f);break;case 27:e._cancelEdit(f)}})});a(".inline-open-add",g).on("click"+c,function(h){h.preventDefault();a("#add-row-"+e.formname).removeClass("hide").show();a(this).hide()});return!0},_unbindEvents:function(){var g=a(this.element),c=this.eventNamespace;a(".inline-locationselector-widget",g).off(c);a(".add-row,.edit-row",g).each(function(){a(this).find("input,textarea,select").off(c)});a(".inline-open-add",g).off(c);g.off(c);return!0}})})(jQuery);
$(function(){$(".inline-component").inlinecomponent(S3.inlineComponentsOpts||{})});S3.search={};
(function(){var a=function(t,u,x){if("GET"==t.type){t.type="POST";var w=function(L){var O=L[0];return"$filter"==L||"$$"==L.slice(0,2)||"_"!=O&&(-1!=L.search(/\./)||"("==O&&-1!=L.search(/\)/))},C=t.url.split("#"),A=C[0],z=null,D=null;1<C.length&&(z=C[1]);C=A.split("?");A=C[0];1<C.length&&(D=C[1]);var F=t.data,E={};C={};var G,I,H,J,M=function(L,O,P){if(Array.isArray(P))for(H=0,G=P.length;H<G;H++)M(L,O,P[H]);else L.hasOwnProperty(O)?Array.isArray(L[O])?L[O].push(P):L[O]=[L[O],P]:L[O]=P};if(F){var R=
0;for(I=F.length;R<I;R++){var S=F[R];M(C,S.name,S.value)}}if(D)for(J in F=S3.queryString.parse(D),F)D=F[J],w(J)?M(E,J,D):M(C,J,D);t.data="ajax"==u?JSON.stringify(E):E;t.processData=!1;delete C.$search;u=A+"?$search="+u;x&&(delete C.$action,u=u+"&$action="+x);(x=S3.queryString.stringify(C))&&(u+="&"+x);null!==z&&(u+="#"+z);t.url=u}};S3.search.searchRewriteAjaxOptions=a;var b={timeout:1E4,retryLimit:5,dataType:"json",contentType:"application/json; charset=utf-8",processData:!1,async:!0,type:"POST"};
$.searchS3=function(t){t=$.extend({},b,t);a(t,"ajax");return $.ajaxS3(t)};$.searchDownloadS3=function(t,u){var x=$.extend({},b,{url:t});t=document.createElement("form");x.type="GET";a(x,"form");t.action=x.url;t.method="POST";t.target=u||"_self";t.enctype="multipart/form-data";if(u=x.data)for(var w in u)x=document.createElement("textarea"),x.name=w,x.value=JSON.stringify(u[w]),t.appendChild(x);t.style.display="none";document.body.appendChild(t);t.submit()};var d={},g=function(t){return t?(t=t.replace(/"/,
'\\"'),-1!=t.search(/,/)&&(t='"'+t+'"'),t):t},c=function(t){if(!t)return t;for(var u=[],x=!1,w=0,C=0;C<t.length;C++){var A=t[C];u[w]=u[w]||"";'"'==A?x=!x:","!=A||x?u[w]+=A:("NONE"==u[w]&&(u[w]=null),++w)}return u},e=function(t,u){void 0===t&&(t=$(".filter-form").first());t.data("noAutoSubmit",1);t.find(".text-filter").val("");t.find(".options-filter, .location-filter").each(function(){var x=$(this);if("select"==this.tagName.toLowerCase())x.val(""),x.hasClass("groupedopts-filter-widget")&&x.groupedopts("instance")?
x.groupedopts("refresh"):x.hasClass("multiselect-filter-widget")&&x.multiselect("instance")&&x.multiselect("refresh");else{var w=x.attr("id");$("input[name='"+w+"']:checked").each(function(){$(this).trigger("click")})}x.hasClass("location-filter")&&v(this)});t.find(".map-filter").each(function(){var x=$(this);x.val("");x=x.attr("id");x=S3.gis.maps[x+"-map"].s3.polygonButton;"drawpolygonclear-off"==x.getIconClass()&&x.items[0].btnEl.dom.click()});t.find(".range-filter-input").val("").trigger("change.slider");
t.find(".date-filter-input").each(function(){$(this).calendarWidget("clear")});t.find(".hierarchy-filter").each(function(){var x=$(this);x.hasClass("s3-cascade-select")?x.cascadeSelect("reset"):x.hierarchicalopts("reset")});t.find(".age-filter-input").val("");t.find(".filter-manager-widget").each(function(){var x=$(this);void 0!==x.filtermanager&&x.filtermanager("clear")});t.data("noAutoSubmit",0);u||t.trigger("optionChanged")};S3.search.clearFilters=e;var h=/__(?!link\.)([a-z_]+)$/,f=function(t){"undefined"==
typeof t&&(t=$(".filter-form").first());var u,x,w=[],C,A,z,D,F,E;$(".text-filter",t).each(function(){C=$(this);x=C.attr("id");A=$("#"+x+"-data").val();if(z=C.val().trim()){D=z.split(" ");var G=C.data("match"),I=[];for(u=0;u<D.length;u++)if(F=$.trim(D[u]),""!==F){var H=g("*"+F+"*");"any"==G?I.push(H):w.push([A,H])}"any"==G&&w.push([A,I.join(",")])}else w.push([A,null])});$(".s3-groupedopts-widget",t).prev(".options-filter.groupedopts-filter-widget").add($(".ui-multiselect",t).prev(".options-filter.multiselect-filter-widget")).add($(".options-filter,.options-filter.multiselect-filter-widget",
t)).each(function(){C=$(this);x=C.attr("id");A=$("#"+x+"-data").val();E=$("input:radio[name='"+x+"_filter']:checked").val();switch(E){case "any":A=A.replace(/__contains$|__belongs$/,"__anyof");break;case "all":A=A.replace(/__anyof$|__belongs$/,"__contains")}if("select"==this.tagName.toLowerCase()){if(z="",D=C.val())for(D instanceof Array||(D=D.split(",")),u=0;u<D.length;u++){var G=g(D[u]);z=""===z?G:z+","+G}}else z="",$("input[name='"+x+"']:checked").each(function(){z=""===z?g($(this).val()):z+","+
g($(this).val())});""===z||"*"==z?w.push([A,null]):w.push([A,z])});$(".map-filter",t).each(function(){C=$(this);x=C.attr("id");A=$("#"+x+"-data").val();(z=C.val())?w.push([A,z]):w.push([A,null])});$(".range-filter-input",t).each(function(){C=$(this);x=C.attr("id");A=$("#"+x+"-data").val();(z=C.val())?w.push([A,z]):w.push([A,null])});$(".date-filter-input",t).each(function(){C=$(this);if(C.calendarWidget("instance")){x=C.attr("id");A=$("#"+x+"-data").val();z=C.val();E=x.split("-").pop();if(C.hasClass("datetimepicker"))var G=
function(Q){return Q.getFullYear()+"-"+("0"+(Q.getMonth()+1)).slice(-2)+"-"+("0"+Q.getDate()).slice(-2)+"T"+("0"+Q.getHours()).slice(-2)+":"+("0"+Q.getMinutes()).slice(-2)+":"+("0"+Q.getSeconds()).slice(-2)};else{var I="";C.hasClass("hide-time")&&(I="le"==E?"T23:59:59":"T00:00:00");G=function(Q){return Q.getFullYear()+"-"+("0"+(Q.getMonth()+1)).slice(-2)+"-"+("0"+Q.getDate()).slice(-2)+I}}var H=!1;"le"==E&&(H=!0);if(C.hasClass("negative")){if(H){var J=!1;H=x.slice(0,-3);var M=$("#"+H+"-ge");var R=
M.val();if(R){J=!0;M=M.calendarWidget("getJSDate",!1);var S=G(M);var L=$("#"+H+"-ge-data").val();L=L.replace(h,"")}if(z){J=!0;M=C.calendarWidget("getJSDate",!0);var O=G(M);var P=A.replace(h,"")}J&&(G="("+$("#"+H+"-negative").val()+" eq NONE)",R&&(G+=" or ("+L+' lt "'+S+'")'),z&&(G+=" or ("+P+' gt "'+O+'")'),O=$("#"+H+"-filterby"),O.length&&(O=O.val(),H=$("#"+H+"-filter_opts").val(),G+=" or ("+O+' belongs "'+H+'")'),w.push(["$filter",G]))}}else z?(M=C.calendarWidget("getJSDate",H),O=G(M),H&&C.hasClass("end_date")||
C.hasClass("optional")?(H=A.replace(h,""),w.push(["$filter","("+H+" "+E+' "'+O+'") or ('+H+" eq NONE)"])):w.push([A,O])):w.push([A,null])}});$(".s3-groupedopts-widget",t).prev(".location-filter.groupedopts-filter-widget").add($(".ui-multiselect",t).prev(".location-filter.multiselect-filter-widget")).add($(".location-filter,.location-filter.multiselect-filter-widget",t)).each(function(){C=$(this);x=C.attr("id");A=$("#"+x+"-data").val();z="";if("select"==this.tagName.toLowerCase()){if(D=$(this).val(),
D)for(u=0;u<D.length;u++){var G=g(D[u]);z=""===z?G:z+","+G}}else $("input[name='"+x+"']:checked").each(function(){z=""===z?g($(this).val()):z+","+g($(this).val())});""===z?w.push([A,null]):w.push([A,z])});$(".hierarchy-filter",t).each(function(){C=$(this);x=C.attr("id");A=$("#"+x+"-data").val();z="";if(D=C.hasClass("s3-cascade-select")?C.cascadeSelect("get"):C.hierarchicalopts("get"))for(u=0;u<D.length;u++)z=""===z?z+D[u]:z+","+D[u];""===z?w.push([A,null]):w.push([A,z])});$(".age-filter-input",t).each(function(){C=
$(this);x=C.attr("id");A=$("#"+x+"-data").val();z=C.val();""!==z?w.push([A,z]):w.push([A,null])});$(".value-filter",t).each(function(){C=$(this);x=C.attr("id");A=$("#"+x+"-data").val();C.prop("checked")?w.push([A,"None"]):w.push([A,null])});w.filter(function(G){return null!=G[1]}).length?t.addClass("has-active-filters"):t.removeClass("has-active-filters");return w};S3.search.getCurrentFilters=f;S3.search.setCurrentFilters=function(t,u){void 0===t&&(t=$(".filter-form").first());t.data("noAutoSubmit",
1);var x,w={},C,A,z;var D=0;for(C=u.length;D<C;D++){var F=u[D];var E=F[0];var G="string"==typeof F[1]?c(F[1]):F[1];w.hasOwnProperty(E)?w[E]=w[E].concat(G):w[E]=G}t.find(".text-filter").each(function(){A=$(this);x=A.attr("id");E=$("#"+x+"-data").val();if(w.hasOwnProperty(E)){A.is(":visible")||A.hasClass("active")||B(t);G=w[E];z="";if(G){var I;D=0;for(C=G.length;D<C;D++)if(I=G[D])0<D&&(z+=" "),"*"==I[0]&&(I=I.slice(1)),"*"==I.slice(-1)&&(I=I.slice(0,-1)),z+=I}A.val(z)}});t.find(".options-filter").each(function(){A=
$(this);x=A.attr("id");E=$("#"+x+"-data").val();var I=$('input:radio[name="'+x+'_filter"]:checked').val();if(this.tagName&&"select"==this.tagName.toLowerCase()){var H=!1,J=E.replace(h,"");if(w.hasOwnProperty(J+"__eq"))G=w[J+"__eq"],H=!0;else if(w.hasOwnProperty(J))G=w[J],H=!0;else if(w.hasOwnProperty(E))G=w[E],H=!0;else if("any"==I||"all"==I)w.hasOwnProperty(J+"__anyof")?(G=w[J+"__anyof"],H=!0,$('input:radio[name="'+x+'_filter"][value="any"]').prop("checked",!0)):w.hasOwnProperty(J+"__contains")&&
(G=w[J+"__contains"],H=!0,$('input:radio[name="'+x+'_filter"][value="all"]').prop("checked",!0));H&&(A.is(":visible")||A.hasClass("active")||B(t),A.val(G),A.hasClass("groupedopts-filter-widget")&&A.groupedopts("instance")?A.groupedopts("refresh"):A.hasClass("multiselect-filter-widget")&&A.multiselect("instance")&&A.multiselect("refresh"))}});t.find(".map-filter").each(function(){A=$(this);x=A.attr("id");E=$("#"+x+"-data").val();if(w.hasOwnProperty(E))if(A.is(":visible")||A.hasClass("active")||B(t),
G=w[E],G){A.val(G[0]);var I=x+"-map";S3.gis.maps[I].s3.polygonButtonLoaded()}else A.val(""),I=x+"-map",S3.gis.maps[I].s3.layerRefreshed()});t.find(".range-filter-input").each(function(){A=$(this);x=A.attr("id");E=$("#"+x+"-data").val();w.hasOwnProperty(E)&&(A.is(":visible")||A.hasClass("active")||B(t),(G=w[E])?A.val(G[0]):A.val(""))});t.find(".date-filter-input").each(function(){var I=$(this),H=$("#"+I.attr("id")+"-data").val(),J=H.replace(h,""),M=!1;w.hasOwnProperty(H)?M=w[H]:w.hasOwnProperty(J)&&
(M=w[J]);!1!==M&&(I.is(":visible")||I.hasClass("active")||B(t),M?(H=M[0].replace(" ","T"),I.calendarWidget("setJSDate",new Date(H))):I.calendarWidget("clear"))});t.find(".age-filter-input").each(function(){A=$(this);x=A.attr("id");E=$("#"+x+"-data").val();w.hasOwnProperty(E)&&(A.is(":visible")||A.hasClass("active")||B(t),(G=w[E])?A.val(G[0]):A.val(""))});t.find(".location-filter").each(function(){A=$(this);x=A.attr("id");E=$("#"+x+"-data").val();var I=$('input:radio[name="'+x+'_filter"]:checked').val();
if(this.tagName&&"select"==this.tagName.toLowerCase()){var H=!1;if(w.hasOwnProperty(E))G=w[E],H=!0;else if("any"==I||"all"==I)I=E.replace(h,""),w.hasOwnProperty(I+"__anyof")?(G=w[I+"__anyof"],H=!0,$('input:radio[name="'+x+'_filter"][value="any"]').prop("checked",!0)):w.hasOwnProperty(I+"__contains")&&(G=w[I+"__contains"],H=!0,$('input:radio[name="'+x+'_filter"][value="all"]').prop("checked",!0));H&&(A.is(":visible")||A.hasClass("active")||B(t),A.val(G),A.hasClass("groupedopts-filter-widget")&&A.groupedopts("instance")?
A.groupedopts("refresh"):A.hasClass("multiselect-filter-widget")&&A.multiselect("instance")&&A.multiselect("refresh"),v(this))}});t.find(".hierarchy-filter:visible").each(function(){A=$(this);x=A.attr("id");E=$("#"+x+"-data").val();w.hasOwnProperty(E)&&(A.is(":visible")||A.hasClass("active")||B(t),G=w[E],A.hasClass("s3-cascade-select")?A.cascadeSelect("set",G):A.hierarchicalopts("set",G))});t.data("noAutoSubmit",0);t.trigger("optionChanged")};var k=function(t,u){void 0===u&&(u=f());t=t.split("?");
var x={},w={},C,A=[];u=u.filter(function(I){return"$filter"==I[0]?(A.push(I),!1):!0});A.length&&u.push(A.reduce(function(I,H){return["$filter","("+I[1]+") and ("+H[1]+")"]}));var z=0;for(C=u.length;z<C;z++){var D=u[z];var F=D[0];D=D[1];null===D?x.hasOwnProperty(F)||(w[F]=!0):(w.hasOwnProperty(F)&&(w[F]=!1),x[F]=!0)}var E=[];if(1!=S3.search.stripFilters&&1<t.length){var G=t[1].split("&");z=0;for(C=G.length;z<C;z++)D=G[z].split("="),1<D.length&&(F=S3.urlDecode(D[0]),w[F]||x[F]||E.push(G[z]))}z=0;for(C=
u.length;z<C;z++)D=u[z],F=D[0],D=D[1],x[F]&&E.push(F+"="+encodeURIComponent(D));u=E.join("&");t=t[0];u&&(t=t+"?"+u);return t};S3.search.filterURL=k;S3.search.ajaxUpdateOptions=function(t,u){var x=$(t);t=x.find("input.filter-ajax-url");t.length&&(t=$(t[0]).val());$.ajax({url:t,dataType:"json"}).done(function(w){x.data("noAutoSubmit",1);for(var C in w){var A=$("#"+C);if(A.length){var z=w[C];if(A.hasClass("options-filter")){if("select"==A[0].tagName.toLowerCase()){var D=A.siblings(".no-options-available");
if(z.hasOwnProperty("empty"))A.html(""),A.hasClass("multiselect-filter-widget")&&A.multiselect("instance")?(A.multiselect("refresh"),A.multiselect("instance").$button.hide()):A.hasClass("groupedopts-filter-widget")&&A.groupedopts("instance")?A.groupedopts("refresh"):A.hide(),D.length&&(D.html(z.empty),D.removeClass("hide").show());else{var F=A.val(),E=[],G="",I;if(z.hasOwnProperty("groups")){var H=0;for(I=z.groups.length;H<I;H++){var J=z.groups[H];J.label&&(G+='<optgroup label="'+J.label+'">');for(var M=
0,R=J.items.length;M<R;M++){var S=J.items[M];var L=S[0].toString();F&&0<=$.inArray(L,F)&&E.push(L);G+='<option value="'+L+'"';(L=S[3])&&(G+=' title="'+L+'"');S=S[1];G+=">"+S+"</option>"}J.label&&(G+="</optgroup>")}}else for(H=0,I=z.length;H<I;H++)S=z[H],L=S[0],L=null===L?"None":L.toString(),S=S[1],F&&0<=$.inArray(L,F)&&E.push(L),G+='<option value="'+L+'">'+S+"</option>";A.html(G);E&&A.val(E);D.length&&D.hide();A.hasClass("groupedopts-filter-widget")&&A.groupedopts("instance")?A.groupedopts("refresh"):
A.hasClass("multiselect-filter-widget")&&A.multiselect("instance")?(A.multiselect("refresh"),A.multiselect("instance").$button.show()):A.removeClass("hide").show()}}}else A.hasClass("date-filter")&&(A=z.min,z=z.max,$("#"+C+"-ge").calendarWidget("instance").option("minDateTime",A).option("maxDateTime",z).refresh(),$("#"+C+"-le").calendarWidget("instance").option("minDateTime",A).option("maxDateTime",z).refresh())}}x.data("noAutoSubmit",0);u&&u.apply()}).fail(function(w,C,A){console.log("UNAUTHORIZED"==
A?i18n.gis_requires_login:w.responseText)})};var q=function(t,u){$("#"+t[0].id).closest(".dt-wrapper").find(".dt-export").each(function(){var x=$(this),w=x.data("url");w&&x.data("url",k(w,u))})},l=function(t){var u=$("#"+t).find('input.filter-submit-url[type="hidden"]').first().val(),x=d[t],w;d[t]={};for(w in x){var C=$("#"+w);var A=C.is(":visible")?!0:!1;var z=x[w];C=z.needs_reload;if(A){if(C){var D=f($("#"+t));u=k(u,D);window.location.href=u}}else d[t][w]=z}for(w in x)C=$("#"+w),C.is(":visible")&&
(z=x[w],C=$("#"+w),C.hasClass("dataTable")?(t=C.dataTable(),z=z.ajaxurl,t.fnReloadAjax(z),q(t,D),$("#"+t[0].id+"_dataTable_filterURL").val(z)):C.hasClass("dl")?C.datalist("ajaxReload",z.queries):C.hasClass("map_wrapper")?S3.gis.refreshLayer("search_results",z.queries):C.hasClass("gi-container")?C.groupedItems("reload",null,z.queries):C.hasClass("pt-container")?C.pivottable("reload",null,z.queries):C.hasClass("tp-container")?C.timeplot("reload",null,z.queries):C.hasClass("s3-organizer")&&C.organizer("reload"))};
S3.search.filterFormAutoSubmit=function(t,u){t=$("#"+t);if(t.length&&u)t.on("optionChanged",function(){var x=$(this);if(!x.data("noAutoSubmit")){var w=x.data("autoSubmitTimeout");w&&clearTimeout(w);w=setTimeout(function(){y(x)},u);x.data("autoSubmitTimeout",w)}})};var n=function(){var t=new jQuery.Deferred;setTimeout(function x(){void 0!=S3.gis.maps?t.resolve("loaded"):"pending"===t.state()&&(t.notify("waiting for JS to load..."),setTimeout(x,500))},1);return t.promise()},m=function(t,u,x){void 0===
x&&(x=f($("#"+t)));d.hasOwnProperty(t)||(d[t]={});if(!d[t].hasOwnProperty(u)){var w=$("#"+u);if(w.hasClass("dl")||w.hasClass("gi-container")||w.hasClass("pt-container")||w.hasClass("tp-container")||w.hasClass("map_wrapper")||w.hasClass("s3-organizer"))var C=null;else if(w.hasClass("dataTable")){if(w=$("input#"+u+"_configurations"),w.length)if(C=JSON.parse($(w).val()).ajaxUrl,"undefined"!=typeof C)C=k(C,x);else return}else return;d[t][u]={needs_reload:!1,ajaxurl:C,queries:x}}};S3.search.setup_hidden_widget=
m;var p=function(t){t=$(t);if(t.hasClass("responsive"))(t=t.DataTable())&&t.responsive&&t.responsive.recalc();else if(t.hasClass("doublescroll"))try{t.dataTableS3("doubleScroll")}catch(u){}},r=function(t,u){var x=u.find(".map_wrapper"),w=x.length;w?$.when(n()).then(function(){for(var C=S3.gis,A=0;A<w;A++){var z=x[A].attributes.id.value;void 0===C.maps[z]&&C.show_map(z,C.options[z])}l(t)},function(C){s3_debug(C)},function(C){s3_debug(C)}):l(t);u.find("table.dataTable.display").each(function(){p(this)})};
S3.search.unhide_section=r;S3.search.summary_tabs=function(t,u,x){if(x)for(var w=f($("#"+t)),C=x.split(","),A=0,z=C.length;A<z;A++)x=C[A],m(t,x,w);void 0!=u?($("#summary-tabs").tabs({active:u,activate:function(D,F){D=$(F.newPanel);D.removeClass("hide");if(F.newTab.length){var E=$(F.newTab).index();F=$("#"+t).find('input.filter-submit-url[type="hidden"]');if(F.length){F=F.first();var G=$(F).val(),I=G.split("?"),H=[];if(1<I.length){G=I[1].split("&");for(var J,M,R=0;R<G.length;R++)J=G[R].split("="),
1<J.length&&(M=S3.urlDecode(J[0]),"t"!=M&&H.push(J[0]+"="+J[1]));H.push("t="+E);E=H.join("&");I=I[0];E&&(I=I+"?"+E)}else I=G+"?t="+E;$(F).val(I)}}r(t,D)}}).css({visibility:"visible"}),$('.ui-tabs-panel[aria-hidden="false"]').first().removeClass("hide").find("table.dataTable.display").each(function(){p(this)})):$("#summary-tabs").css({visibility:"visible"}).find("table.dataTable.display").each(function(){p(this)})};S3.search.summary_maps=function(t){for(var u=$("#summary-common, #summary-sections").find(".map_wrapper"),
x=0;x<u.length;x++){var w=u[x];if(!w.hidden){var C=S3.gis;w=w.attributes.id.value;if(void 0===C.maps[w]){var A=C.options[w];void 0!=A&&(C.show_map(w,A),w=f($("#"+t)),C.refreshLayer("search_results",w))}}}};S3.search.s3map=function(t){var u=S3.gis;void 0===t&&(t="default_map");u.show_map(t,u.options[t]);t=f();u.refreshLayer("search_results",t)};var v=function(t){var u=t.name,x=u.slice(0,-1),w=parseInt(u.slice(-1)),C=$("#"+u);if(C.val()){var A=w+1,z=x+A,D=$("#"+z);D.length||(A=w+2,z=x+A,D=$("#"+z));
if(D.length){var F=z.replace(/-/g,"_");S3[F]();D.next(".ui-multiselect").show();F=S3.location_filter_hierarchy;if(void 0!=S3.location_name_l10n){D=!0;var E=S3.location_name_l10n}else D=!1;t.options1=[];t.options2=[];t.options3=[];t.options4=[];t.options5=[];for(u=w;0<=u&&!F.hasOwnProperty("L"+u);u--);var G=function(L){var O,P;for(O in L)if(L.hasOwnProperty(O)){O&&"null"!=O&&t["options"+A].push(O);var Q=L[O];if("object"===typeof Q&&(z=A+1,$("#"+x+z).length||(z=A+2),$("#"+x+z).length))for(P in Q)Q.hasOwnProperty(P)&&
P&&"null"!=P&&t["options"+z].push(P)}},I=function(L,O){var P,Q,U=$("#"+x+O).val();for(Q in L)if(L.hasOwnProperty(Q))if(null===U)if(O===w)G(L[Q]);else{var N=O+1;$("#"+x+N).length||N++;I(L[Q],N)}else for(P in U)U[P]===Q&&(O===w?G(L[Q]):(N=O+1,$("#"+x+N).length||N++,I(L[Q],N)))};I(F["L"+u],u);for(F=A;5>=F;F++){var H=$("#"+x+F);if(H.length){var J=t["options"+F];J.sort();var M="";for(var R in J)if(J.hasOwnProperty(R)){u=J[R];var S=D?E[u]||u:u;M+='<option value="'+u+'">'+S+"</option>"}H.html(M);if(H.hasClass("groupedopts-filter-widget")&&
H.groupedopts("instance"))try{H.groupedopts("refresh")}catch(L){}else H.hasClass("multiselect-filter-widget")&&H.multiselect("instance")&&H.multiselect("refresh");F===A&&(H.next("button").removeClass("hidden").show(),u=C.next(".ui-multiselect").next(".location-filter").next(".ui-multiselect"),u.length&&(u=u.next(".location-filter").next(".ui-multiselect"),u.length&&(u.hide(),u=u.next(".location-filter").next(".ui-multiselect"),u.length&&(u.hide(),u=u.next(".location-filter").next(".ui-multiselect"),
u.length&&(u.hide(),u=u.next(".location-filter").next(".ui-multiselect"),u.length&&u.hide())))))}}}}else{for(F=w+1;5>=F;F++)if(H=$("#"+x+F),H.length)if(H.html(""),H.hasClass("groupedopts-filter-widget")&&H.groupedopts("instance"))try{H.groupedopts("refresh")}catch(L){}else H.hasClass("multiselect-filter-widget")&&H.multiselect("instance")&&H.multiselect("refresh");u=C.next(".ui-multiselect").next(".location-filter").next(".ui-multiselect");u.length&&(u.hide(),u=u.next(".location-filter").next(".ui-multiselect"),
u.length&&(u.hide(),u=u.next(".location-filter").next(".ui-multiselect"),u.length&&(u.hide(),u=u.next(".location-filter").next(".ui-multiselect"),u.length&&(u.hide(),u=u.next(".location-filter").next(".ui-multiselect"),u.length&&u.hide()))))}},y=function(t){S3.hideAlerts("warning");var u=t.attr("id"),x=t.find('input.filter-submit-url[type="hidden"]').val(),w=f(t);if(t.hasClass("filter-ajax")){t=t.find('input.filter-submit-target[type="hidden"]').val();d[u]={};t=t.split(" ");var C={},A;for(A=0;A<t.length;A++){var z=
t[A];var D=$("#"+z);var F=D.is(":visible")?!0:!1;var E=!1;var G=null;D.hasClass("dataTable")?(E=$("input#"+t[A]+"_configurations"),E.length&&(G=JSON.parse($(E).val()),G=G.ajaxUrl,G="undefined"!=typeof G?k(G,w):null),G?(C[t[A]]=G,E=!1):E=!0):D.hasClass("dl")||D.hasClass("map_wrapper")||D.hasClass("cms_content")||D.hasClass("gi-container")||D.hasClass("pt-container")||D.hasClass("tp-container")||D.hasClass("s3-target")||D.hasClass("s3-organizer")?E=!1:F?(x=k(x,w),window.location.href=x):E=!0;F||(d[u][z]=
{needs_reload:E,ajaxurl:G,queries:w})}for(A=0;A<t.length;A++)z=t[A],D=$("#"+z),D.is(":visible")&&(D.hasClass("dataTable")?(u=D.dataTable(),z=C[z],u.fnReloadAjax(z),q(u,w),$("#"+u[0].id+"_dataTable_filterURL").val(z)):D.hasClass("dl")?D.datalist("ajaxReload",w):D.hasClass("map_wrapper")?S3.gis.refreshLayer("search_results",w):D.hasClass("gi-container")?D.groupedItems("reload",null,w):D.hasClass("pt-container")?D.pivottable("reload",null,w):D.hasClass("tp-container")?D.timeplot("reload",null,w):D.hasClass("s3-target")?
D.s3Target("reload",k(x,w)):D.hasClass("s3-organizer")&&D.organizer("reload"))}else x=k(x,w),window.location.href=x},B=function(t,u){t=$(t);var x;t.find(".advanced").each(function(){var w=$(this);w.hasClass("hide")?(w.removeClass("hide").show().find(".multiselect-filter-widget,.groupedopts-filter-widget").each(function(){var C=$(this);C.addClass("active");C.hasClass("groupedopts-filter-widget")&&C.groupedopts("instance")?C.groupedopts("refresh"):C.hasClass("multiselect-filter-widget")&&C.multiselect("instance")&&
C.multiselect("refresh")}),x=!0):(w.addClass("hide").hide().find(".multiselect-filter-widget,.groupedopts-filter-widget").removeClass("active"),x=!1)});t=$(t.find(".filter-advanced-label"));x?t.text(t.data("off")).siblings().toggle():t.text(t.data("on")).siblings().toggle()};$(function(){$(".groupedopts-filter-widget:visible,.multiselect-filter-widget:visible").addClass("active");$(".filter-clear").on("click",function(){var t=$(this).closest(".filter-form");e(t)});$(".show-filter-manager").on("click",
function(){$(".filter-manager-row").removeClass("hide").show();$(".show-filter-manager").hide()});$(".filter-submit").on("click",function(){y($(this).closest(".filter-form"))});$(".filter-form").on("dataChanged",function(t,u,x){u&&(t=$(this).find("input.filter-submit-target").val())&&(t=t.split(" "),t.length&&-1!=$.inArray(u+"",t)&&S3.search.ajaxUpdateOptions(this,x));return!1});$(".filter-advanced").on("click",function(){B($(this).closest("form"))});$(".location-filter").on("change",function(){v(this)});
$(".text-filter").on("keyup.autosubmit",function(t){27==t.keyCode&&$(this).val("").closest("form").trigger("optionChanged")});$(".text-filter, .range-filter-input").on("input.autosubmit",function(){$(this).closest("form").trigger("optionChanged")});$(".options-filter, .location-filter, .date-filter-input, .age-filter-input, .map-filter, .value-filter").on("change.autosubmit",function(){$(this).closest("form").trigger("optionChanged")});$('.s3-options-filter-anyall input[type="radio"]').on("change.autosubmit",
function(){$(this).closest("form").trigger("optionChanged")});$(".hierarchy-filter").on("select.s3hierarchy",function(){$(this).closest("form").trigger("optionChanged")});$(".map-filter").each(function(){var t=$(this);$.when(n()).then(function(){var u=t.attr("id"),x=$("#"+u),w,C=S3.gis,A=C.maps[u+"-map"],z=A.s3;z.pointPlaced=function(D){var F={internalProjection:A.getProjectionObject(),externalProjection:C.proj4326};w=(new OpenLayers.Format.WKT(F)).write(D);x.val('"'+w+'"').trigger("change")};z.polygonButtonOff=
function(){x.val("").trigger("change")};z.layerRefreshed=function(){var D=z.polygonButton;D&&"drawpolygonclear-off"==D.getIconClass()&&(z.lastDraftFeature?z.lastDraftFeature.destroy():1<z.draftLayer.features.length&&z.draftLayer.features[0].destroy(),D.control.deactivate(),D.items[0].pressed=!0)};z.polygonButtonLoaded=function(){if(w=x.val()){z.polygonButton.items[0].btnEl.dom.click();var D=OpenLayers.Geometry.fromWKT(w);D.transform(C.proj4326,A.getProjectionObject());D=new OpenLayers.Feature.Vector(D,
{},null);var F=z.draftLayer;F.addFeatures([D]);z.lastDraftFeature=D;A.zoomToExtent(F.getDataExtent())}};z.polygonButtonLoaded()},function(u){s3_debug(u)},function(u){s3_debug(u)})});$(".filter-form").each(function(){f($(this))});$(".text-filter").on("keypress",function(t){return 13==t.which?(t.preventDefault(),!1):!0})})})();
(function(a,b){var d=0;a.widget("s3.filtermanager",{options:{filters:{},ajaxURL:null,readOnly:!1,explicitLoad:!1,allowCreate:!0,allowUpdate:!0,allowDelete:!0,createTooltip:null,loadTooltip:null,saveTooltip:null,deleteTooltip:null,selectHint:"Saved filters...",emptyHint:"No saved filters",titleHint:"Enter a title",confirmUpdate:null,confirmDelete:null,createText:null,loadText:null,saveText:null,deleteText:null,buttonClass:"action-btn"},_create:function(){this.id=d++},_init:function(){this.refresh()},
_destroy:function(){},refresh:function(){var g=this.id,c=this.element.val(""),e=this.options;this._unbindEvents();var h=e.buttonClass;this.create_btn&&this.create_btn.remove();this.create_btn=e.createText?a('<a class="fm-create '+h+'" id="fm-create-'+g+'">'+e.createText+"</a>"):a('<div class="fm-create" id="fm-create-'+g+'">');e.createTooltip&&this.create_btn.attr("title",e.createTooltip);this.load_btn&&this.load_btn.remove();this.load_btn=e.loadText?a('<a class="fm-load '+h+'" id="fm-load-'+g+'">'+
e.loadText+"</a>"):a('<div class="fm-load" id="fm-load-'+g+'">');e.loadTooltip&&this.load_btn.attr("title",e.loadTooltip);this.save_btn&&this.save_btn.remove();this.save_btn=e.saveText?a('<a class="fm-save '+h+'" id="fm-save-'+g+'">'+e.saveText+"</a>"):a('<div class="fm-save" id="fm-save-'+g+'">');e.saveTooltip&&this.save_btn.attr("title",e.saveTooltip);this.delete_btn&&this.delete_btn.remove();this.delete_btn=e.deleteText?a('<a class="fm-delete '+h+'" id="fm-delete-'+g+'">'+e.deleteText+"</a>"):
a('<div class="fm-delete" id="fm-delete-'+g+'">');e.deleteTooltip&&this.delete_btn.attr("title",e.deleteTooltip);this.throbber&&this.throbber.remove();this.throbber=a('<div class="inline-throbber" id="fm-throbber-'+g+'">').css({"float":"left"});this.accept_btn&&this.accept_btn.remove();this.accept_btn=a('<div class="fm-accept" id="fm-accept-'+g+'">');this.cancel_btn&&this.cancel_btn.remove();this.cancel_btn=a('<div class="fm-cancel" id="fm-cancel-'+g+'">');a(c).after(this.load_btn.hide(),this.create_btn.hide(),
this.save_btn.hide(),this.delete_btn.hide(),this.throbber.hide(),this.accept_btn.hide(),this.cancel_btn.hide());this._cancel();this._bindEvents()},_newFilter:function(){if(!this.options.readOnly){var g=this.element.hide(),c=this;this._hideCRUDButtons();this.input=a('<input type="text" id="fm-title-input-'+this.id+'" placeholder="'+this.options.titleHint+'">').on("keyup",function(e){switch(e.which){case 13:e.preventDefault();c._accept();break;case 27:a(this).val(""),c._cancel()}}).insertAfter(g).trigger("focus");
this.accept_btn.show();this.cancel_btn.show()}},_accept:function(){if(!this.options.readOnly){var g=this.element,c=this,e=this.input.val();if(e){this.accept_btn.hide();this.cancel_btn.hide();this.throbber.show();var h={title:e,query:S3.search.getCurrentFilters(a(g).closest("form")),url:this._getFilterURL()};a.ajaxS3({url:this.options.ajaxURL,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(h),success:function(f){if(f=f.created){c.options.filters[f]=h.query;
var k=a('<option value="'+f+'">'+h.title+"</option>");a(g).append(k).val(f).trigger("change").prop("disabled",!1)}c._cancel()},error:function(){c._cancel()}})}}},_save:function(){var g=this.element,c=this,e=this.options,h=a(g).val();if(h&&(!e.confirmUpdate||confirm(e.confirmUpdate))){this._hideCRUDButtons();this.throbber.show();var f={id:h,query:S3.search.getCurrentFilters(a(g).closest("form")),url:this._getFilterURL()};a.ajaxS3({url:this.options.ajaxURL,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",
data:JSON.stringify(f),success:function(){c.options.filters[h]=f.query;c._cancel()},error:function(){c._cancel()}})}},_delete:function(){var g=a(this.element),c=this.options,e=g.val();if(e&&(!c.confirmDelete||confirm(c.confirmDelete))){this._hideCRUDButtons();this.throbber.show();c={id:e};var h=""+this.options.ajaxURL;h=-1!=h.search(/.*\?.*/)?h+"&delete=1":h+"?delete=1";var f=this;a.ajaxS3({url:h,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(c),success:function(){g.val("").find("option[value="+
e+"]").remove();delete f.options.filters[e];f._cancel()},error:function(){f._cancel()}})}},_cancel:function(){this.throbber.hide();this.input&&(this.input.remove(),this.input=null);this.accept_btn.hide();this.cancel_btn.hide();var g=this.element.show(),c=this.options,e=a(g).find("option");1==e.length&&e.first().hasClass("filter-manager-prompt")?(a(g).prop("disabled",!0),a(g).find("option.filter-manager-prompt").text(c.emptyHint)):(a(g).prop("disabled",!1),a(g).find("option.filter-manager-prompt").text(c.selectHint));
this._showCRUDButtons()},_load:function(){const g=a(this.element).closest("form"),c=this.options.filters,e=a(this.element).val();e&&c.hasOwnProperty(e)&&(S3.search.clearFilters(g,!0),S3.search.setCurrentFilters(g,c[e]))},clear:function(){a(this.element).val("");this._cancel()},_showCRUDButtons:function(){var g=this.options;this._hideCRUDButtons();!g.readOnly&&g.allowCreate&&this.create_btn.show();a(this.element).val()&&(g.explicitLoad&&this.load_btn.show(),g.readOnly||(g.allowUpdate&&this.save_btn.show(),
g.allowDelete&&this.delete_btn.show()))},_hideCRUDButtons:function(){this.create_btn.hide();this.load_btn.hide();this.delete_btn.hide();this.save_btn.hide()},_getFilterURL:function(){var g=a(this.element).closest("form").find('input.filter-submit-url[type="hidden"]');return g.length?g.first().val():document.URL},_bindEvents:function(){var g=this;this.create_btn.on("click",function(){g._newFilter()});this.accept_btn.on("click",function(){g._accept()});this.cancel_btn.on("click",function(){g._cancel()});
this.element.on("change",function(){g._showCRUDButtons();g.options.explicitLoad||g._load()});if(this.options.explicitLoad)this.load_btn.on("click",function(){g._load()});this.save_btn.on("click",function(){g._save()});this.delete_btn.on("click",function(){g._delete()})},_unbindEvents:function(){this.create_btn&&this.create_btn.off("click");this.accept_btn&&this.accept_btn.off("click");this.cancel_btn&&this.cancel_btn.off("click");this.load_btn&&this.options.explicitLoad&&this.load_btn.off("click");
this.save_btn&&this.save_btn.off("click");this.delete_btn&&this.delete_btn.off("click");this.element.off("change")}})})(jQuery);
(function(a,b){var d=0;a.widget("s3.groupedopts",{options:{columns:3,emptyText:"No options available",orientation:"columns",sort:!0,table:!0,comment:""},_create:function(){var g=this.element.hide();this.id=d;d+=1;g.attr("multiple")!==b?this.multiple=!0:this.multiple=!1;this.menu=null},_init:function(){this.refresh()},_destroy:function(){this.menu.remove();this.element.show()},refresh:function(){var g=this.element,c=this.options;this.index=0;this.name="s3-groupedopts-"+this.id;this.menu&&this.menu.remove();
this.selected=g.val();var e=g.find("optgroup");if(g.find("option").length)if(e.length)for(this.grouped=!0,this.menu=a('<div class="s3-groupedopts-widget">'),c=0;c<e.length;c++)this._renderGroup(e[c]);else this.grouped=!1,this.menu=c.table?a('<table class="s3-groupedopts-widget">'):a('<div class="s3-groupedopts-widget">'),e=g.find("option"),this._renderRows(e,this.menu);else this.grouped=!0,this.menu=a('<div class="s3-groupedopts-widget"><span class="no-options-available">'+c.emptyText+"</span></div>");
g.after(this.menu);this._bindEvents()},hide:function(){this.menu.hide()},show:function(){this.menu.show()},visible:function(){return this.menu.is(":visible")},_renderGroup:function(g){var c=a(g).attr("label");g=a(g).find("option");g.length&&(c=a('<div class="s3-groupedopts-label">'+c+"</div>"),this.menu.append(c),c=this.options.table?a('<table class="s3-groupedopts-widget">'):a('<div class="s3-groupedopts-widget">'),this._renderRows(g,c),a(c).hide(),this.menu.append(c))},_renderRows:function(g,c){var e=
this.options,h=e.columns,f=a.makeArray(g);e.sort&&f.sort(function(n,m){return a(n).text()<a(m).text()?-1:1});g=[];var k,q;if("columns"==e.orientation){var l=Math.ceil(f.length/h);for(k=0;k<h;k++)for(q=0;q<l;q++)f.length&&(g.length<q+1&&g.push([]),g[q].push(f.shift()))}else for(;f.length;){q=[];for(k=0;k<h&&f.length;k++)q.push(f.shift());g.push(q)}e=e.table;for(k=0;k<g.length;k++){h=e?a("<tr>"):a('<div class="s3-groupedopts-row">');for(q=0;q<g[k].length;q++)this._renderItem(g[k][q],h,e);c.append(h)}},
_renderItem:function(g,c,e){var h=this.options.comment,f=this.multiple,k=a(g),q="s3-groupedopts-option-"+this.id+"-"+this.index,l=f?"checkbox":"radio";this.index+=1;g=k.val();var n=k.html(),m=k.attr("title");k=this.selected;var p=a('<label for="'+q+'">');m&&""!==m&&p.attr("title",m);f||g==k||p.addClass("inactive");p.append(a('<span class="optlabel">'+n+"</span>"));q=a('<input type="'+l+'" id="'+q+'" name="'+this.name+'" class="s3-groupedopts-option" value="'+g+'">').prependTo(p);0<=(f?a.inArray(g,
k):g==k?1:-1)&&a(q).prop("checked",!0);e=e?a("<td>").append(p):a('<div class="s3-groupedopts-item">').append(p);h&&(_.templateSettings={interpolate:/\{(.+?)\}/g},h=_.template(h)({v:g}),e.append(a(h)));c.append(e)},_bindEvents:function(){var g=this;g.menu.find(".s3-groupedopts-option").on("click",function(){var c=a(this),e=c.val(),h=g.element,f=g.multiple,k=h.val();null===k&&f&&(k=[]);f?(f=a.inArray(e,k),c.is(":checked")?0>f&&k.push(e):0<=f&&k.splice(f,1)):c.is(":checked")&&(k=e,g.menu.find(".s3-groupedopts-option").each(function(){c=
a(this);c.is(":checked")?c.next().removeClass("inactive"):c.next().addClass("inactive")}));this.selected=k;h.val(k).trigger("change")});g.menu.find("label[title]").cluetip({splitTitle:"|",showTitle:!1});g.menu.find(".s3-groupedopts-label").on("click",function(){var c=a(this);c.next("table").toggle();c.toggleClass("expanded")})}})})(jQuery);
(function(){S3.autocomplete={};S3.autocomplete.normal=function(d,g,c,e,h,f,k,q,l){var n="dummy_"+e,m=$("#"+n);if(m.length){g=S3.Ap.concat("/",g,"/",c,"/search_ac.json?field=",d);h&&(g+="&"+h);f&&(g+="&link="+f);var p=$("#"+e).hide();e=p.val();var r;e&&(r={value:e,label:m.val()});p.data("existing",r);p.data("url",g);var v=$("#"+n+"_throbber");void 0==q&&(q=800);void 0==l&&(l=2);m.val();m.autocomplete({delay:q,minLength:l,source:function(y,B){$.ajax({url:p.data("url"),data:{term:y.term}}).done(function(t){var u=
{id:0};0==t.length?(p.val("").trigger("change"),u[d]=i18n.no_matching_records):u[d]=i18n.none_of_the_above;t.push(u);B(t)})},search:function(y,B){v.removeClass("hide").show();return!0},response:function(y,B,t){v.hide();return t},focus:function(y,B){return!1},select:function(y,B){y=B.item;y.id?(m.val(y[d]),p.val(y.id).trigger("change"),r={value:y.id,label:y[d]}):(m.val(""),p.val("").trigger("change"));k&&eval(k);return!1}}).data("ui-autocomplete")._renderItem=function(y,B){var t=B.label?B.label:B[d];
return $("<li>").data("item.autocomplete",B).append("<a>"+t+"</a>").appendTo(y)};m.on("blur",function(){r&&r.label!=m.val()&&p.val("").trigger("change")})}};S3.autocomplete.generic=function(d,g,c,e,h){var f="dummy_"+g,k=$("#"+f);if(k.length){var q=$("#"+g).hide();g=q.val();var l;g&&(l={value:g,name:k.val()});q.data("existing",l);q.data("url",d);var n=$("#"+f+"_throbber");void 0==e&&(e=800);void 0==h&&(h=2);k.autocomplete({delay:e,minLength:h,source:function(m,p){$.ajax({url:q.data("url"),data:{term:m.term}}).done(function(r){0==
r.length?(q.val("").trigger("change"),r.push({id:0,value:"",label:i18n.no_matching_records})):r.push({id:0,value:"",label:i18n.none_of_the_above});p(r)})},search:function(m,p){n.removeClass("hide").show();return!0},response:function(m,p,r){n.hide();return r},focus:function(m,p){return!1},select:function(m,p){m=p.item;(p=m.id)?(k.val(m.name),q.val(p).trigger("change"),l={value:m.id,name:m.name}):(k.val(""),q.val("").trigger("change"));c&&eval(c);return!1}}).data("ui-autocomplete")._renderItem=function(m,
p){if(p.label)var r=p.label;else p.matchString?(r=p.matchString+"<b>"+p.nextString+"</b>",p.context&&(r+=" - "+p.context)):r=p.name;return $("<li>").data("item.autocomplete",p).append("<a>"+r+"</a>").appendTo(m)};k.on("blur",function(){l&&l.name!=k.val()&&q.val("").trigger("change")})}};S3.autocomplete.location=function(d,g,c,e,h){var f="dummy_"+d,k=$("#"+f);if(k.length){var q=S3.Ap.concat("/gis/location/search_ac.json"),l=$("#"+d).hide();d=l.val();var n;d&&(n={value:d,name:k.val()});l.data("existing",
n);l.data("url",q);var m=$("#"+f+"_throbber");g&&(q+="?level="+g);void 0==e&&(e=800);void 0==c&&(c=2);k.autocomplete({delay:e,minLength:c,source:function(p,r){$.ajax({url:l.data("url"),data:{term:p.term}}).done(function(v){0==v.length?(l.val("").trigger("change"),v.push({id:0,value:"",label:i18n.no_matching_records})):v.push({id:0,value:"",label:i18n.none_of_the_above});r(v)})},search:function(p,r){m.removeClass("hide").show();return!0},response:function(p,r,v){m.hide();return v},focus:function(p,
r){return!1},select:function(p,r){p=r.item;p.id?(k.val(r.item.name),l.val(p.id).trigger("change"),n={value:p.id,name:r.item.name}):(k.val(""),l.val("").trigger("change"));h&&eval(h);return!1}}).data("ui-autocomplete")._renderItem=function(p,r){if(void 0!=r.label)var v=r.label;else v=r.name?r.match_type?r.next_string?r.match_string+"<b>"+r.next_string+"</b>":r.match_string:r.name:"",r.addr&&(v=v?v+(", "+r.addr):r.addr),r.L5&&(v=v?v+(", "+r.L5):r.L5),r.L4&&(v=v?v+(", "+r.L4):r.L4),r.L3&&(v=v?v+(", "+
r.L3):r.L3),r.L2&&(v=v?v+(", "+r.L2):r.L2),r.L1&&(v=v?v+(", "+r.L1):r.L1),r.L0&&(v=v?v+(", "+r.L0):r.L0);return $("<li>").data("item.autocomplete",r).append("<a>"+v+"</a>").appendTo(p)};k.on("blur",function(){n&&n.name!=k.val()&&l.val("").trigger("change")})}};var a=function(d){return void 0!=d.label?d.label:d.org||d.job?b(d):d.name};S3.autocomplete.person=function(d,g,c,e,h,f,k){var q="dummy_"+c,l=$("#"+q);if(l.length){d=S3.Ap.concat("/",d,"/",g,"/search_ac.json");e&&(d+="?"+e);var n=$("#"+c).hide();
c=n.val();var m;c&&(m={value:c,name:l.val()});n.data("existing",m);n.data("url",d);var p=$("#"+q+"_throbber");void 0==f&&(f=800);void 0==k&&(k=2);l.autocomplete({delay:f,minLength:k,source:function(r,v){$.ajax({url:n.data("url"),data:{term:r.term}}).done(function(y){0==y.length?(n.val("").trigger("change"),y.push({id:0,value:"",label:i18n.no_matching_records})):y.push({id:0,value:"",label:i18n.none_of_the_above});v(y)})},search:function(r,v){p.removeClass("hide").show();return!0},response:function(r,
v,y){p.hide();return y},focus:function(r,v){return!1},select:function(r,v){r=v.item;r.id?(v=a(r),l.val(v),n.val(r.id).trigger("change"),m={value:r.id,name:v}):(l.val(""),n.val("").trigger("change"));h&&eval(h);return!1}}).data("ui-autocomplete")._renderItem=function(r,v){var y=a(v);return $("<li>").data("item.autocomplete",v).append("<a>"+y+"</a>").appendTo(r)};l.on("blur",function(){m&&m.name!=l.val()&&n.val("").trigger("change")})}};S3.autocomplete.pentity=function(d,g,c,e,h,f,k){var q="dummy_"+
c,l=$("#"+q);if(l.length){var n=S3.Ap.concat("/",d,"/",g,"/search_ac.json"),m=$("#"+c).hide();d=m.val();var p;d&&(p={value:d,name:l.val()});m.data("existing",p);m.data("url",n);var r=$("#"+q+"_throbber");void 0==h&&(h=800);void 0==f&&(f=2);l.autocomplete({delay:h,minLength:f,source:function(v,y){n=m.data("url");k&&(n+="?types="+k);$.ajax({url:n,data:{term:v.term}}).done(function(B){0==B.length?(m.val("").trigger("change"),B.push({id:0,value:"",label:i18n.no_matching_records})):B.push({id:0,value:"",
label:i18n.none_of_the_above});y(B)})},search:function(v,y){r.removeClass("hide").show();return!0},response:function(v,y,B){r.hide();return B},focus:function(v,y){return!1},select:function(v,y){v=y.item;v.id?(l.val(v.name),m.val(v.id).trigger("change"),p={value:v.id,name:v.name}):(l.val(""),m.val("").trigger("change"));e&&eval(e);return!1}}).data("ui-autocomplete")._renderItem=function(v,y){var B=y.label?y.label:y.name;return $("<li>").data("item.autocomplete",y).append("<a>"+B+"</a>").appendTo(v)};
l.on("blur",function(){p&&p.name!=l.val()&&m.val("").trigger("change")})}};var b=function(d){if(void 0!=d.label)return d.label;var g=d.name,c=d.org;d=d.job;if(c||d)d?(g+=" ("+d,c&&(g+=", "+c),g+=")"):g+=" ("+c+")";return g};S3.autocomplete.hrm=function(d,g,c,e,h){var f="dummy_"+g,k=$("#"+f);if(k.length){d="staff"==d?S3.Ap.concat("/hrm/hr_search/search_ac?group=staff"):"volunteer"==d?S3.Ap.concat("/vol/hr_search/search_ac"):"deploy"==d?S3.Ap.concat("/deploy/hr_search/search_ac"):S3.Ap.concat("/hrm/hr_search/search_ac");
var q=$("#"+g).hide();g=q.val();var l;g&&(l={value:g,name:k.val()});q.data("existing",l);q.data("url",d);var n=$("#"+f+"_throbber");void 0==e&&(e=800);void 0==h&&(h=2);k.autocomplete({delay:e,minLength:h,source:function(m,p){$.ajax({url:q.data("url"),data:{term:m.term}}).done(function(r){0==r.length?(q.val("").trigger("change"),r.push({id:0,value:"",label:i18n.no_matching_records})):r.push({id:0,value:"",label:i18n.none_of_the_above});p(r)})},search:function(m,p){n.removeClass("hide").show();return!0},
response:function(m,p,r){n.hide();return r},focus:function(m,p){return!1},select:function(m,p){m=p.item;m.id?(p=a(m),k.val(p),q.val(m.id).trigger("change"),l={value:m.id,name:p}):(k.val(""),q.val("").trigger("change"));c&&eval(c);return!1}}).data("ui-autocomplete")._renderItem=function(m,p){var r=b(p);return $("<li>").data("item.autocomplete",p).append("<a>"+r+"</a>").appendTo(m)};k.on("blur",function(){l&&l.name!=k.val()&&q.val("").trigger("change")})}};S3.autocomplete.org=function(d,g,c,e){var h=
"dummy_"+d,f=$("#"+h);if(f.length){var k=S3.Ap.concat("/org/organisation/search_ac.json"),q=$("#"+d).hide();d=q.val();var l;d&&(l={value:d,name:f.val()});q.data("existing",l);q.data("url",k);var n=$("#"+h+"_throbber");void 0==c&&(c=800);void 0==e&&(e=2);f.autocomplete({delay:c,minLength:e,source:function(m,p){$.ajax({url:q.data("url"),data:{term:m.term}}).done(function(r){0==r.length?(q.val("").trigger("change"),r.push({id:0,value:"",label:i18n.no_matching_records})):r.push({id:0,value:"",label:i18n.none_of_the_above});
p(r)})},search:function(m,p){n.removeClass("hide").show();return!0},response:function(m,p,r){n.hide();return r},focus:function(m,p){return!1},select:function(m,p){m=p.item;m.id?(f.val(m.name),q.val(m.id).trigger("change"),l={value:m.id,name:m.name}):(f.val(""),q.val("").trigger("change"));g&&eval(g);return!1}}).data("ui-autocomplete")._renderItem=function(m,p){if(void 0!=p.label)var r=p.label;else p.matchString?"acronym"==p.match?(r=p.name,p.parent&&(r=p.parent+" > "+r),r+=" - "+p.matchString+"<b>"+
p.nextString+"</b>"):(r=p.matchString+"<b>"+p.nextString+"</b>",p.parent?r=p.parent+" > "+r:p.acronym&&(r+=" - "+p.acronym)):(r=p.name,p.parent?r=p.parent+" > "+p.name:p.acronym&&(r+=" ("+p.acronym+")"));return $("<li>").data("item.autocomplete",p).append("<a>"+r+"</a>").appendTo(m)};f.on("blur",function(){l&&l.name!=f.val()&&q.val("").trigger("change")})}};S3.autocomplete.site=function(d,g,c,e){var h="dummy_"+d,f=$("#"+h);if(f.length){var k=S3.Ap.concat("/org/site/search_ac.json"),q=$("#"+d).hide();
d=q.val();var l;d&&(l={value:d,name:f.val()});q.data("existing",l);q.data("url",k);var n=$("#"+h+"_throbber");void 0==c&&(c=800);void 0==e&&(e=2);f.autocomplete({delay:c,minLength:e,source:function(m,p){$.ajax({url:q.data("url"),data:{term:m.term}}).done(function(r){0==r.length?(q.val("").trigger("change"),r.push({id:0,value:"",label:i18n.no_matching_records})):r.push({id:0,value:"",label:i18n.none_of_the_above});p(r)})},search:function(m,p){n.removeClass("hide").show();return!0},response:function(m,
p,r){n.hide();return r},focus:function(m,p){return!1},select:function(m,p){m=p.item;m.id?(f.val(m.name),q.val(m.id).trigger("change"),l={value:m.id,name:m.name}):(f.val(""),q.val("").trigger("change"));g&&eval(g);return!1}}).data("ui-autocomplete")._renderItem=function(m,p){if(void 0!=p.label)var r=p.label;else if(p.match_type)if(r="<b>"+p.match_string+"</b>",p.pre_string&&(r=p.pre_string+r),p.next_string&&(r+=p.next_string),"name"==p.match_type){var v=p.addr;var y=p.L4||p.L3||p.L2||p.L1;if(v||y)v?
(r+=" ("+v,y&&(r+=", "+y),r+=")"):r+=" ("+y+")";var B=p.org;y=p.instance_type;if(B||y)y?(r+=" ("+S3.org_site_types[y],B&&(r+=", "+B),r+=")"):r+=" ("+B+")"}else if("addr"==p.match_type){if(r=p.name+" ("+r,r=(y=p.L4||p.L3||p.L2||p.L1)?r+(", "+y+")"):r+")",B=p.org,y=p.instance_type,B||y)y?(r+=" ("+S3.org_site_types[y],B&&(r+=", "+B),r+=")"):r+=" ("+B+")"}else if("org"==p.match_type){B=p.name;v=p.addr;y=p.L4||p.L3||p.L2||p.L1;if(v||y)v?(B+=" ("+v,y&&(B+=", "+y),B+=")"):B+=" ("+y+")";r=(y=p.instance_type)?
B+" ("+S3.org_site_types[y]+", "+r+")":B+" ("+r+")"}else{if(B=p.name,r=(v=p.addr)?B+" ("+v+", "+r+")":B+" ("+r+")",B=p.org,y=p.instance_type,B||y)y?(r+=" ("+S3.org_site_types[y],B&&(r+=", "+B),r+=")"):r+=" ("+B+")"}else r=p.name;return $("<li>").data("item.autocomplete",p).append("<a>"+r+"</a>").appendTo(m)};f.on("blur",function(){l&&l.name!=f.val()&&q.val("").trigger("change")})}}})();
(function(a,b){a.web2py!==b&&a.error("web2py.js has already been loaded!");var d="undefined"!==typeof FormData;String.prototype.reverse=function(){return this.split("").reverse().join("")};var g;a.web2py=g={isUndefined:function(c){return void 0===c},popup:function(c){c=window.open(c,"name","height=400,width=600");window.focus&&c.focus();return!1},collapse:function(c){a("#"+c).slideToggle()},fade:function(c,e){0<e?a("#"+c).hide().fadeIn("slow"):a("#"+c).show().fadeOut("slow")},ajax:function(c,e,h,
f){f="undefined"!==typeof f?f:{};var k="";if("string"==typeof e)(e=a(e).serialize())&&(k=e);else{var q=[];if(null!==e&&!g.isUndefined(e))for(var l=0;l<e.length;l++){var n=a("[name="+e[l]+"]").serialize();n&&q.push(n)}0<q.length&&(k=q.join("&"))}e=[function(p){h&&(":eval"==h?eval(p):"string"==typeof h?a("#"+h).html(p):h(p))}];a.isArray(f.done)?e=a.merge(e,f.done):e.push(f.done);c={type:"POST",url:c,data:k,success:e};delete f.done;for(var m in f)c[m]=f[m];a.ajax(c)},ajax_fields:function(c){a('button:not([class^="btn"])',
c).addClass("btn");a('form input[type="submit"]:not([class^="btn"]), form input[type="button"]:not([class^="btn"])',c).addClass("btn");a("input[type=password][data-w2p_entropy]",c).each(function(){g.validate_entropy(a(this))});a("ul.w2p_list",c).each(function(){function e(k,q){var l=a(k).find("li:first").clone(!0);l.find(":text").val("");h(k);a(q.target).parent().is(":visible")?l.insertAfter(a(q.target).parent()):l.appendTo(k);l.find(":text").focus();return!1}function h(k){a(k).find("li").each(function(){var q=
a.trim(a(this.firstChild).val());""===q?a(this).remove():a(this.firstChild).val(q)})}var f=this;a(f).find(":text").after('<a href="#">+</a>&nbsp;<a href="#">-</a>').keypress(function(k){return 13==k.which?e(f,k):!0}).next().click(function(k){e(f,k);k.preventDefault()}).next().click(function(k){1<a(f).children().length&&a(k.target).parent().remove();k.preventDefault()})})},ajax_init:function(c){a(".w2p_hidden",c).hide();g.manage_errors(c);g.ajax_fields(c);g.show_if_handler(c);g.component_handler(c)},
manage_errors:function(c){a("div.error",c).hide().fadeIn("slow")},after_ajax:function(c){var e=c.getResponseHeader("web2py-component-command");c=c.getResponseHeader("web2py-component-flash");null!==e&&eval(decodeURIComponent(e));c&&g.flash(decodeURIComponent(c))},event_handlers:function(){var c=a(document);c.on("click",".w2p_flash",function(e){e.preventDefault();e=a(this);"0px"==e.css("top")?e.slideUp("slow"):e.fadeOut()});c.on("keyup","input.integer",function(){var e=this.value.reverse().replace(/[^0-9\-]|\-(?=.)/g,
"").reverse();this.value!=e&&(this.value=e)});c.on("keyup","input.double, input.decimal",function(){var e=this.value.reverse().replace(/[^0-9\-\.,]|[\-](?=.)|[\.,](?=[0-9]*[\.,])/g,"").reverse();this.value!=e&&(this.value=e)});c.on("click",'input[type="checkbox"].delete',function(){this.checked&&!g.confirm(i18n.delete_confirmation)&&(this.checked=!1)});a(c).on("submit","form",function(e){var h=a(this).find(g.formInputClickSelector);h.each(function(){g.disableElement(a(this))});setTimeout(function(){h.each(function(){g.enableElement(a(this))})},
5E3)});c.ajaxSuccess(function(e,h){e=h.getResponseHeader("web2py-redirect-location");null!==e&&(window.location=e,window.location.reload());null===h.getResponseHeader("web2py-component-content")&&g.after_ajax(h)});c.ajaxError(function(e,h,f,k){switch(h.status){case 500:g.flash(i18n.ajax_500)}})},trap_form:function(c,e){a("#"+e+" form").each(function(){var h=a(this);if(!h.hasClass("no_trap")){var f=a(this).attr("data-w2p_target");g.isUndefined(f)||!1===f?h.attr("data-w2p_target",e):e=f;var k=h.attr("action");
if(""===k||"#"===k||g.isUndefined(k))k=c;h.submit(function(q){g.disableElement(h.find(g.formInputClickSelector));g.hide_flash();var l=d?new FormData(h[0]):h.serialize();g.ajax_page("post",k,l,e,h);q.preventDefault()});h.on("click",g.formInputClickSelector,function(q){q.preventDefault();q=a(this).attr("name");g.isUndefined(q)||a('<input type="hidden" />').attr("name",q).attr("value",a(this).val()).appendTo(h);h.trigger("submit")})}})},ajax_page:function(c,e,h,f,k){g.isUndefined(k)&&(k=a(document));
if(g.isUndefined(f)||""===f)f="w2p_none";var q="[object FormData]"===Object.prototype.toString.call(h),l=q?!1:"application/x-www-form-urlencoded; charset=UTF-8";g.fire(k,"ajax:before",null,f)&&a.ajax({type:c,url:e,data:h,processData:!q,contentType:l,beforeSend:function(n,m){n.setRequestHeader("web2py-component-location",document.location);n.setRequestHeader("web2py-component-element",f);g.fire(k,"w2p:componentBegin",[n,m],f);return g.fire(k,"ajax:beforeSend",[n,m],f)},success:function(n,m,p){g.fire(k,
"ajax:success",[n,m,p],f)},error:function(n,m,p){g.fire(k,"ajax:error",[n,m,p],f)},complete:function(n,m){g.fire(k,"ajax:complete",[n,m],f);g.updatePage(n,f);g.trap_form(e,f);g.ajax_init("#"+f);g.after_ajax(n);g.fire(k,"w2p:componentComplete",[n,m],f)}})},component:function(c,e,h,f,k){a(function(){var q=a("#"+e),l=q.get(0),n='jQuery("#'+e+'").get(0).reload();';l.reload=function(){l.reload_check()&&g.ajax_page("get",c,null,e,k)};l.reload_check=function(){if(q.hasClass("w2p_component_stop"))return clearInterval(this.timing),
!1;if(Infinity==this.reload_counter)return!0;if(!isNaN(this.reload_counter))if(--this.reload_counter,0>this.reload_counter)this.run_once||clearInterval(this.timing);else return!0;return!1};isNaN(h)?(l.reload_counter=Infinity,g.ajax_page("get",c,null,e,k)):(l.timeout=h,l.reload_counter=f,1<f?(g.ajax_page("get",c,null,e,k),l.run_once=!1,l.timing=setInterval(n,h),--l.reload_counter):1==f&&(l.run_once=!0,l.setTimeout=setTimeout,l.timing=setTimeout(n,h)))})},updatePage:function(c,e){e=a("#"+e);var h=a.parseHTML(c.responseText,
document,!0),f=a(h).filter("title").add(a(h).find("title")),k=f.last().text();k&&(f.remove(),document.title=a.trim(k));f=c.getResponseHeader("web2py-component-content");"prepend"==f?e.prepend(c.responseText):"append"==f?e.append(c.responseText):"hide"!=f&&e.html(h)},calc_entropy:function(c){for(var e="abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789 !@#$%^&*() ~`-_=+[]{}|;:'\",.<>?/ 0123456789abcdefghijklmnopqrstuvwxyz".split(" "),h=0,f={},k={},q=null,l=c.split(""),n=0;n<l.length;n++){for(var m=
l[n],p=5,r=0;r<e.length;r++)if(-1!=e[r].indexOf(m)){p=r;break}p in k?m in f||(h+=1,f[m]=1):(k[p]=1,h+=e[p].length);p!=q&&(h+=1,q=p)}return Math.round(c.length*Math.log(h)/.6931471805599453*100)/100},validate_entropy:function(c,e){g.isUndefined(c.data("w2p_entropy"))||(e=c.data("w2p_entropy"));var h=function(){var f=(g.calc_entropy(c.val())||0)/e;if(.5>=f){var k=1;var q=2*f}else k=1-2*(Math.max(f,0)-.5),q=1;k="#"+Math.round(15*k).toString(16)+Math.round(15*q).toString(16)+(0).toString(16);c.css("background-color",
k);(k=c.data("entropy_callback"))&&k(f)};c.hasClass("entropy_check")||c.on("keyup",h).on("keydown",h).addClass("entropy_check")},web2py_websocket:function(c,e,h,f){return"WebSocket"in window?(c=new WebSocket(c),c.onopen=h?h:function(){},c.onmessage=e,c.onclose=f?f:function(){},!0):!1},formInputClickSelector:"input[type=submit], input[type=image], button[type=submit], button:not([type])",disableSelector:"input, button, textarea, select",enableSelector:"input:disabled, button:disabled, textarea:disabled, select:disabled",
fire:function(c,e,h,f){e=a.Event(e,{containerTarget:a("#"+f)[0]});c.trigger(e,h);return!1!==e.result},stopEverything:function(c){a(c.target).trigger("w2p:everythingStopped");c.stopImmediatePropagation();return!1},confirm:function(c){return confirm(c)},disableElement:function(c){if(!g.isUndefined(c.data("w2p_disable")))return!1;c.addClass("disabled");var e=c.is("input")?"val":"html";g.isUndefined(c.data("w2p_enable_with"))&&c.data("w2p_enable_with",c[e]());("default"==c.data("w2p_disable_with")||g.isUndefined(c.data("w2p_disable_with")))&&
c.data("w2p_disable_with",i18n.disable_with_message);c[e](c.data("w2p_disable_with"));c.bind("click.w2pDisable",function(h){return g.stopEverything(h)})},enableElement:function(c){var e=c.is("input")?"val":"html";g.isUndefined(c.data("w2p_enable_with"))||(c[e](c.data("w2p_enable_with")),c.removeData("w2p_enable_with"));c.removeClass("disabled");c.unbind("click.w2pDisable")},simple_component:function(c,e,h){g.component(c,e,0,1,h)},flash:function(c,e){var h=a(".w2p_flash");g.hide_flash();h.text(c).addClass(e);
h.html()&&h.append('<span id="closeflash"> &times; </span>').fadeIn()},hide_flash:function(){a(".w2p_flash").fadeOut(0).html("")},show_if_handler:function(c){var e={},h=function(){var k=a(this),q=k.attr("id");k.attr("value",k.val());for(var l=0;l<e[q].length;l++){var n=a("#"+e[q][l],c),m=a("#"+e[q][l]+"__row",c);k.is(n.attr("data-show-if"))?m.fadeIn():m.hide()}};a("[data-show-trigger]",c).each(function(){var k=a(this).attr("data-show-trigger");a("#"+k).length&&(e[k]||(e[k]=[]),e[k].push(a(this).attr("id")))});
for(var f in e)a("#"+f,c).change(h).keyup(h),h.call(a("#"+f,c))},component_handler:function(c){a("div[data-w2p_remote]",c).each(function(){var e=a(this);var h=e.data("w2p_remote");var f=e.data("w2p_times");var k=e.data("w2p_timeout");e=e.attr("id");g.component(h,e,k,f,a(this))})},a_handler:function(c,e){e.preventDefault();var h=c.data("w2p_method"),f=c.attr("href"),k=c.data("w2p_target"),q=c.data("w2p_confirm"),l=c.data("w2p_pre_call");g.isUndefined(l)||eval(l);if(q&&("default"==q&&(q=g.isUndefined(w2p_ajax_confirm_message)?
"Are you sure you want to delete this object?":w2p_ajax_confirm_message),!g.confirm(q))){g.stopEverything(e);return}g.isUndefined(k)?"GET"==h?g.ajax_page("get",f,[],"",c):"POST"==h&&g.ajax_page("post",f,[],"",c):"GET"==h?g.ajax_page("get",f,[],k,c):"POST"==h&&g.ajax_page("post",f,[],k,c)},a_handlers:function(){var c=a(document);c.on("click","a[data-w2p_method]",function(e){g.a_handler(a(this),e)});c.on("ajax:success","a[data-w2p_method][data-w2p_remove]",function(){var e=a(this),h=e.data("w2p_remove");
g.isUndefined(h)||(h=e.closest(h),h.length||(h=a(h)),h.remove())});c.on("ajax:beforeSend","a[data-w2p_method][data-w2p_disable_with]",function(){g.disableElement(a(this))});c.on("ajax:complete","a[data-w2p_method][data-w2p_disable_with]",function(){g.enableElement(a(this))})},disableFormElements:function(c){c.find(g.disableSelector).each(function(){var e=a(this),h=e.is("button")?"html":"val",f=e.data("w2p_disable_with"),k=e.data("w2p_disable");if(!g.isUndefined(k))return!1;e.is(":file")||(g.isUndefined(f)&&
e.data("w2p_disable_with",e[h]()),g.isUndefined(e.data("w2p_enable_with"))&&e.data("w2p_enable_with",e[h]()),e[h](e.data("w2p_disable_with")));e.prop("disabled",!0)})},enableFormElements:function(c){c.find(g.enableSelector).each(function(){var e=a(this),h=e.is("button")?"html":"val";e.data("w2p_enable_with")&&(e[h](e.data("w2p_enable_with")),e.removeData("w2p_enable_with"));e.prop("disabled",!1)})},form_handlers:function(){var c=a(document);c.on("ajax:beforeSend","form[data-w2p_target]",function(){g.disableFormElements(a(this))});
c.on("ajax:complete","form[data-w2p_target]",function(){g.enableFormElements(a(this))})},invalidate:function(c){a("div[data-w2p_remote]",c).each(function(){var e=a("#"+a(this).attr("id")).get(0);g.isUndefined(e.timing)||clearInterval(e.timing)});a.web2py.component_handler(c)},main_hook:function(){var c=a(".w2p_flash");c.hide();c.html()&&g.flash(c.html());g.ajax_init(document);g.event_handlers();g.a_handlers();g.form_handlers()}};a(function(){g.main_hook()})})(jQuery);ajax=jQuery.web2py.ajax;
web2py_component=jQuery.web2py.component;web2py_websocket=jQuery.web2py.web2py_websocket;web2py_ajax_page=jQuery.web2py.ajax_page;web2py_validate_entropy=jQuery.web2py.validate_entropy;web2py_ajax_fields=jQuery.web2py.ajax_fields;web2py_trap_form=jQuery.web2py.trap_form;popup=jQuery.web2py.popup;collapse=jQuery.web2py.collapse;fade=jQuery.web2py.fade;
(function(a){"function"===typeof define&&define.amd?define("jquery ./mouse ../data ../ie ../scroll-parent ../version ../widget".split(" "),a):a(jQuery)})(function(a){return a.widget("ui.sortable",a.ui.mouse,{version:"1.13.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,
scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(b,d,g){return b>=d&&b<d+g},_isFloating:function(b){return/left|right/.test(b.css("float"))||/inline|table-cell/.test(b.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();
this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(b,d){this._super(b,d);"handle"===b&&this._setHandleClassName()},_setHandleClassName:function(){var b=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");a.each(this.items,function(){b._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData(this.widgetName+
"-item");return this},_mouseCapture:function(b,d){var g=null,c=!1,e=this;if(this.reverting||this.options.disabled||"static"===this.options.type)return!1;this._refreshItems(b);a(b.target).parents().each(function(){if(a.data(this,e.widgetName+"-item")===e)return g=a(this),!1});a.data(b.target,e.widgetName+"-item")===e&&(g=a(b.target));if(!g||this.options.handle&&!d&&(a(this.options.handle,g).find("*").addBack().each(function(){this===b.target&&(c=!0)}),!c))return!1;this.currentItem=g;this._removeCurrentsFromItems();
return!0},_mouseStart:function(b,d,g){d=this.options;this.currentContainer=this;this.refreshPositions();this.appendTo=a("parent"!==d.appendTo?d.appendTo:this.currentItem.parent());this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},relative:this._getRelativeOffset()});
this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();this.scrollParent=this.placeholder.scrollParent();a.extend(this.offset,{parent:this._getParentOffset()});d.containment&&this._setContainment();if(d.cursor&&"auto"!==d.cursor){var c=this.document.find("body");
this.storedCursor=c.css("cursor");c.css("cursor",d.cursor);this.storedStylesheet=a("<style>*{ cursor: "+d.cursor+" !important; }</style>").appendTo(c)}d.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",d.zIndex));d.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",d.opacity));this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());
this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!g)for(g=this.containers.length-1;0<=g;g--)this.containers[g]._trigger("activate",b,this._uiHash(this));a.ui.ddmanager&&(a.ui.ddmanager.current=this);a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this._addClass(this.helper,"ui-sortable-helper");this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset());
this.position=this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute");this._mouseDrag(b);return!0},_scroll:function(b){var d=this.options,g=!1;this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop+d.scrollSpeed:
b.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=g=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=g=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(b.pageY-this.document.scrollTop()<d.scrollSensitivity?g=this.document.scrollTop(this.document.scrollTop()-
d.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<d.scrollSensitivity&&(g=this.document.scrollTop(this.document.scrollTop()+d.scrollSpeed)),b.pageX-this.document.scrollLeft()<d.scrollSensitivity?g=this.document.scrollLeft(this.document.scrollLeft()-d.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<d.scrollSensitivity&&(g=this.document.scrollLeft(this.document.scrollLeft()+d.scrollSpeed)));return g},_mouseDrag:function(b){var d;var g=this.options;this.position=
this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");g.scroll&&!1!==this._scroll(b)&&(this._refreshItemPositions(!0),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b));this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()};
for(g=this.items.length-1;0<=g;g--){var c=this.items[g];var e=c.item[0];if((d=this._intersectsWithPointer(c))&&c.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===d?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):1)){this.direction=1===d?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(c))this._rearrange(b,c);else break;this._trigger("change",b,this._uiHash());
break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,d){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var g=this;d=this.placeholder.offset();var c=this.options.axis,e={};c&&"x"!==c||(e.left=d.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));
c&&"y"!==c||(e.top=d.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop));this.reverting=!0;a(this.helper).animate(e,parseInt(this.options.revert,10)||500,function(){g._clear(b)})}else this._clear(b,d);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new a.Event("mouseup",{target:null}));"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):
this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,
dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var d=this._getItemsAsjQuery(b&&b.connected),g=[];b=b||{};a(d).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&g.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))});!g.length&&b.key&&g.push(b.key+"=");return g.join("&")},toArray:function(b){var d=
this._getItemsAsjQuery(b&&b.connected),g=[];b=b||{};d.each(function(){g.push(a(b.item||this).attr(b.attribute||"id")||"")});return g},_intersectsWith:function(b){var d=this.positionAbs.left,g=d+this.helperProportions.width,c=this.positionAbs.top,e=c+this.helperProportions.height,h=b.left,f=h+b.width,k=b.top,q=k+b.height,l=this.offset.click.top,n=this.offset.click.left;l="x"===this.options.axis||c+l>k&&c+l<q;n="y"===this.options.axis||d+n>h&&d+n<f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||
"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?l&&n:h<d+this.helperProportions.width/2&&g-this.helperProportions.width/2<f&&k<c+this.helperProportions.height/2&&e-this.helperProportions.height/2<q},_intersectsWithPointer:function(b){var d="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,
b.left,b.width);if(!d||!b)return!1;d=this.dragDirection.vertical;b=this.dragDirection.horizontal;return this.floating?"right"===b||"down"===d?2:1:d&&("down"===d?2:1)},_intersectsWithSides:function(b){var d=this._isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=this._isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var g=this.dragDirection.vertical,c=this.dragDirection.horizontal;return this.floating&&c?"right"===c&&b||"left"===c&&
!b:g&&("down"===g&&d||"up"===g&&!d)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!==b&&(0<b?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return 0!==b&&(0<b?"right":"left")},refresh:function(b){this._refreshItems(b);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor===String?[b.connectWith]:b.connectWith},
_getItemsAsjQuery:function(b){function d(){e.push(this)}var g,c,e=[],h=[],f=this._connectWith();if(f&&b)for(b=f.length-1;0<=b;b--){var k=a(f[b],this.document[0]);for(g=k.length-1;0<=g;g--)(c=a.data(k[g],this.widgetFullName))&&c!==this&&!c.options.disabled&&h.push(["function"===typeof c.options.items?c.options.items.call(c.element):a(c.options.items,c.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),c])}h.push(["function"===typeof this.options.items?this.options.items.call(this.element,
null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=h.length-1;0<=b;b--)h[b][0].each(d);return a(e)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(d){for(var g=0;g<b.length;g++)if(b[g]===d.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var d,g,c,e,h=this.items,
f=[["function"===typeof this.options.items?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]];if((e=this._connectWith())&&this.ready)for(d=e.length-1;0<=d;d--){var k=a(e[d],this.document[0]);for(g=k.length-1;0<=g;g--)(c=a.data(k[g],this.widgetFullName))&&c!==this&&!c.options.disabled&&(f.push(["function"===typeof c.options.items?c.options.items.call(c.element[0],b,{item:this.currentItem}):a(c.options.items,c.element),c]),this.containers.push(c))}for(d=
f.length-1;0<=d;d--)for(b=f[d][1],k=f[d][0],g=0,e=k.length;g<e;g++)c=a(k[g]),c.data(this.widgetName+"-item",b),h.push({item:c,instance:b,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(b){var d;for(d=this.items.length-1;0<=d;d--){var g=this.items[d];if(!this.currentContainer||g.instance===this.currentContainer||g.item[0]===this.currentItem[0]){var c=this.options.toleranceElement?a(this.options.toleranceElement,g.item):g.item;b||(g.width=c.outerWidth(),g.height=c.outerHeight());c=c.offset();
g.left=c.left;g.top=c.top}}},refreshPositions:function(b){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1;this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());this._refreshItemPositions(b);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;0<=b;b--){var d=this.containers[b].element.offset();this.containers[b].containerCache.left=d.left;
this.containers[b].containerCache.top=d.top;this.containers[b].containerCache.width=this.containers[b].element.outerWidth();this.containers[b].containerCache.height=this.containers[b].element.outerHeight()}return this},_createPlaceholder:function(b){b=b||this;var d=b.options;if(!d.placeholder||d.placeholder.constructor===String){var g=d.placeholder;var c=b.currentItem[0].nodeName.toLowerCase();d.placeholder={element:function(){var e=a("<"+c+">",b.document[0]);b._addClass(e,"ui-sortable-placeholder",
g||b.currentItem[0].className)._removeClass(e,"ui-sortable-helper");"tbody"===c?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(e)):"tr"===c?b._createTrPlaceholder(b.currentItem,e):"img"===c&&e.attr("src",b.currentItem.attr("src"));g||e.css("visibility","hidden");return e},update:function(e,h){if(!g||d.forcePlaceholderSize)h.height()&&(!d.forcePlaceholderSize||"tbody"!==c&&"tr"!==c)||h.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||
0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),h.width()||h.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);d.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,d){var g=this;b.children().each(function(){a("<td>&#160;</td>",g.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(d)})},
_contactContainers:function(b){var d,g,c,e=c=null;for(d=this.containers.length-1;0<=d;d--)a.contains(this.currentItem[0],this.containers[d].element[0])||(this._intersectsWith(this.containers[d].containerCache)?c&&a.contains(this.containers[d].element[0],c.element[0])||(c=this.containers[d],e=d):this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",b,this._uiHash(this)),this.containers[d].containerCache.over=0));if(c)if(1===this.containers.length)this.containers[e].containerCache.over||
(this.containers[e]._trigger("over",b,this._uiHash(this)),this.containers[e].containerCache.over=1);else{d=1E4;var h=null;c=(g=c.floating||this._isFloating(this.currentItem))?"left":"top";var f=g?"width":"height";var k=g?"pageX":"pageY";for(g=this.items.length-1;0<=g;g--)if(a.contains(this.containers[e].element[0],this.items[g].item[0])&&this.items[g].item[0]!==this.currentItem[0]){var q=this.items[g].item.offset()[c];var l=!1;b[k]-q>this.items[g][f]/2&&(l=!0);Math.abs(b[k]-q)<d&&(d=Math.abs(b[k]-
q),h=this.items[g],this.direction=l?"up":"down")}if(h||this.options.dropOnEmpty)this.currentContainer===this.containers[e]?this.currentContainer.containerCache.over||(this.containers[e]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1):(h?this._rearrange(b,h,null,!0):this._rearrange(b,null,this.containers[e].element,!0),this._trigger("change",b,this._uiHash()),this.containers[e]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[e],this.options.placeholder.update(this.currentContainer,
this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.containers[e]._trigger("over",b,this._uiHash(this)),this.containers[e].containerCache.over=1)}},_createHelper:function(b){var d=this.options;b="function"===typeof d.helper?a(d.helper.apply(this.element[0],[b,this.currentItem])):"clone"===d.helper?this.currentItem.clone():this.currentItem;b.parents("body").length||
this.appendTo[0].appendChild(b[0]);b[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});b[0].style.width&&!d.forceHelperSize||b.width(this.currentItem.width());b[0].style.height&&!d.forceHelperSize||b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){"string"===typeof b&&(b=b.split(" "));Array.isArray(b)&&
(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&
a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var b=
this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=
this.options;"parent"===b.containment&&(b.containment=this.helper[0].parentNode);if("document"===b.containment||"window"===b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===b.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===b.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-
this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var d=a(b.containment)[0];b=a(b.containment).offset();var g="hidden"!==a(d).css("overflow");this.containment=[b.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,b.left+(g?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),
10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(g?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,d){d||(d=this.position);b="absolute"===b?1:-1;var g="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?
this.scrollParent:this.offsetParent,c=/(html|body)/i.test(g[0].tagName);return{top:d.top+this.offset.relative.top*b+this.offset.parent.top*b-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():c?0:g.scrollTop())*b,left:d.left+this.offset.relative.left*b+this.offset.parent.left*b-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():c?0:g.scrollLeft())*b}},_generatePosition:function(b){var d=this.options;var g=b.pageX;var c=b.pageY;var e="absolute"!==this.cssPosition||this.scrollParent[0]!==
this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(e[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(g=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&
(c=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(g=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(c=this.containment[3]+this.offset.click.top)),d.grid&&(c=this.originalPageY+Math.round((c-this.originalPageY)/d.grid[1])*d.grid[1],c=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-d.grid[1]:c+d.grid[1]:
c,g=this.originalPageX+Math.round((g-this.originalPageX)/d.grid[0])*d.grid[0],g=this.containment?g-this.offset.click.left>=this.containment[0]&&g-this.offset.click.left<=this.containment[2]?g:g-this.offset.click.left>=this.containment[0]?g-d.grid[0]:g+d.grid[0]:g));return{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:e.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+
("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:e.scrollLeft())}},_rearrange:function(b,d,g,c){g?g[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?d.item[0]:d.item[0].nextSibling);var e=this.counter=this.counter?++this.counter:1;this._delay(function(){e===this.counter&&this.refreshPositions(!c)})},_clear:function(b,d){function g(h,f,k){return function(q){k._trigger(h,q,f._uiHash(f))}}this.reverting=!1;var c,e=[];!this._noFinalSort&&
this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)if("auto"===this._storedCSS[c]||"static"===this._storedCSS[c])this._storedCSS[c]="";this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!d&&e.push(function(h){this._trigger("receive",h,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===
this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||d||e.push(function(h){this._trigger("update",h,this._uiHash())});this===this.currentContainer||d||(e.push(function(h){this._trigger("remove",h,this._uiHash())}),e.push(function(h){return function(f){h._trigger("receive",f,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(h){return function(f){h._trigger("update",f,this._uiHash(this))}}.call(this,this.currentContainer)));
for(c=this.containers.length-1;0<=c;c--)d||e.push(g("deactivate",this,this.containers[c])),this.containers[c].containerCache.over&&(e.push(g("out",this,this.containers[c])),this.containers[c].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);this.dragging=
!1;d||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null);if(!d){for(c=0;c<e.length;c++)e[c].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!this.cancelHelperRemoval},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var d=b||this;return{helper:d.helper,
placeholder:d.placeholder||a([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:b?b.element:null}}})});
(function(a){"function"===typeof define&&define.amd?define(["jquery","../version","../keycode","../unique-id","../widget"],a):a(jQuery)})(function(a){return a.widget("ui.accordion",{version:"1.13.2",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(b){return b.find("> li > :first-child").add(b.find("> :not(li)").even())},heightStyle:"auto",
icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=a();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");b.collapsible||
!1!==b.active&&null!=b.active||(b.active=0);this._processPanels();0>b.active&&(b.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;if(b){var d=a("<span>");this._addClass(d,"ui-accordion-header-icon","ui-icon "+b.header);d.prependTo(this.headers);d=this.active.children(".ui-accordion-header-icon");this._removeClass(d,b.header)._addClass(d,null,b.activeHeader)._addClass(this.headers,
"ui-accordion-icons")}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();var b=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&b.css("height","")},
_setOption:function(b,d){"active"===b?this._activate(d):("event"===b&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(d)),this._super(b,d),"collapsible"!==b||d||!1!==this.options.active||this._activate(0),"icons"===b&&(this._destroyIcons(),d&&this._createIcons()))},_setOptionDisabled:function(b){this._super(b);this.element.attr("aria-disabled",b);this._toggleClass(null,"ui-state-disabled",!!b);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",
!!b)},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var d=a.ui.keyCode,g=this.headers.length,c=this.headers.index(b.target),e=!1;switch(b.keyCode){case d.RIGHT:case d.DOWN:e=this.headers[(c+1)%g];break;case d.LEFT:case d.UP:e=this.headers[(c-1+g)%g];break;case d.SPACE:case d.ENTER:this._eventHandler(b);break;case d.HOME:e=this.headers[0];break;case d.END:e=this.headers[g-1]}e&&(a(b.target).attr("tabIndex",-1),a(e).attr("tabIndex",0),a(e).trigger("focus"),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===
a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().trigger("focus")},refresh:function(){var b=this.options;this._processPanels();!1===b.active&&!0===b.collapsible||!this.headers.length?(b.active=!1,this.active=a()):!1===b.active?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active);this._destroyIcons();
this._refresh()},_processPanels:function(){var b=this.headers,d=this.panels;this.headers="function"===typeof this.options.header?this.options.header(this.element):this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");d&&(this._off(b.not(this.headers)),
this._off(d.not(this.panels)))},_refresh:function(){var b=this.options,d=b.heightStyle,g=this.element.parent();this.active=this._findActive(b.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var e=a(this),h=e.uniqueId().attr("id"),f=e.next(),k=f.uniqueId().attr("id");e.attr("aria-controls",
k);f.attr("aria-labelledby",h)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(b.event);if("fill"===d){var c=g.height();this.element.siblings(":visible").each(function(){var e=
a(this),h=e.css("position");"absolute"!==h&&"fixed"!==h&&(c-=e.outerHeight(!0))});this.headers.each(function(){c-=a(this).outerHeight(!0)});this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else"auto"===d&&(c=0,this.headers.next().each(function(){var e=a(this).is(":visible");e||a(this).show();c=Math.max(c,a(this).css("height","").height());e||a(this).hide()}).height(c))},_activate:function(b){b=this._findActive(b)[0];
b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var d={keydown:"_keydown"};b&&a.each(b.split(" "),function(g,c){d[c]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,d);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(b){var d,
g=this.options,c=this.active,e=a(b.currentTarget),h=(d=e[0]===c[0])&&g.collapsible,f=h?a():e.next(),k=c.next();f={oldHeader:c,oldPanel:k,newHeader:h?a():e,newPanel:f};b.preventDefault();d&&!g.collapsible||!1===this._trigger("beforeActivate",b,f)||(g.active=h?!1:this.headers.index(e),this.active=d?a():e,this._toggle(f),this._removeClass(c,"ui-accordion-header-active","ui-state-active"),g.icons&&(b=c.children(".ui-accordion-header-icon"),this._removeClass(b,null,g.icons.activeHeader)._addClass(b,null,
g.icons.header)),d||(this._removeClass(e,"ui-accordion-header-collapsed")._addClass(e,"ui-accordion-header-active","ui-state-active"),g.icons&&(d=e.children(".ui-accordion-header-icon"),this._removeClass(d,null,g.icons.header)._addClass(d,null,g.icons.activeHeader)),this._addClass(e.next(),"ui-accordion-content-active")))},_toggle:function(b){var d=b.newPanel,g=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=d;this.prevHide=g;this.options.animate?
this._animate(d,g,b):(g.hide(),d.show(),this._toggleComplete(b));g.attr({"aria-hidden":"true"});g.prev().attr({"aria-selected":"false","aria-expanded":"false"});d.length&&g.length?g.prev().attr({tabIndex:-1,"aria-expanded":"false"}):d.length&&this.headers.filter(function(){return 0===parseInt(a(this).attr("tabIndex"),10)}).attr("tabIndex",-1);d.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(b,d,g){var c,e,h=this,f=0,k=b.css("box-sizing"),
q=b.length&&(!d.length||b.index()<d.index()),l=this.options.animate||{};q=q&&l.down||l;var n=function(){h._toggleComplete(g)};"number"===typeof q&&(e=q);"string"===typeof q&&(c=q);c=c||q.easing||l.easing;e=e||q.duration||l.duration;if(!d.length)return b.animate(this.showProps,e,c,n);if(!b.length)return d.animate(this.hideProps,e,c,n);var m=b.show().outerHeight();d.animate(this.hideProps,{duration:e,easing:c,step:function(p,r){r.now=Math.round(p)}});b.hide().animate(this.showProps,{duration:e,easing:c,
complete:n,step:function(p,r){r.now=Math.round(p);"height"!==r.prop?"content-box"===k&&(f+=r.now):"content"!==h.options.heightStyle&&(r.now=Math.round(m-d.outerHeight()-f),f=0)}})},_toggleComplete:function(b){var d=b.oldPanel,g=d.prev();this._removeClass(d,"ui-accordion-content-active");this._removeClass(g,"ui-accordion-header-active")._addClass(g,"ui-accordion-header-collapsed");d.length&&(d.parent()[0].className=d.parent()[0].className);this._trigger("activate",null,b)}})});
