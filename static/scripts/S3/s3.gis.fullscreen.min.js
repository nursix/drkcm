(function(){function f(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen}function g(d){var a=d.s3;a.westPanelContainer.removeAll(!1);a.mapPanelContainer.removeAll(!1);var b=a.mapWin;b.items.items=[];b.doLayout();b.destroy();S3.gis.addMapPanel(d);$("#"+a.id).removeClass("fullscreen")}var e;$(".gis_fullscreen_map-btn").on("click",function(d){if(-1==navigator.appVersion.indexOf("MSIE")){for(var a,b=this.attributes,c=0;c<b.length;c++)if("map"==b[c].name){a=b[c].value;break}void 0==
a&&(a="default_map");a=e=S3.gis.maps[a];b=a.s3;b.westPanelContainer.removeAll(!1);b.mapPanelContainer.removeAll(!1);c=b.mapWin;c.items.items=[];c.doLayout();c.destroy();S3.gis.addMapWindow(a);document.body.requestFullScreen?document.body.requestFullScreen():document.body.webkitRequestFullScreen?document.body.webkitRequestFullScreen():document.body.mozRequestFullScreen&&document.body.mozRequestFullScreen();$("#"+b.id).addClass("fullscreen");d.preventDefault()}});$("body").on("webkitfullscreenchange",
function(){f()||g(e)});$(document).on("mozfullscreenchange",function(){f()||g(e)});$("body").on("webkitfullscreenchange",function(){f()||g(e)})})();
